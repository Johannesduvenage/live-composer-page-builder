{"version":3,"file":"editor_backend.min.js","sources":["webpack:///webpack/bootstrap","webpack:///./js/src/editor/backend/codegeneration.js","webpack:///./js/src/editor/backend/dragndrop.js","webpack:///./js/src/editor/backend/events.js","webpack:///./js/src/editor/backend/index.js","webpack:///./js/src/editor/backend/modalwindow.class.js","webpack:///./js/src/editor/backend/modalwindow.js","webpack:///./js/src/editor/backend/module.js","webpack:///./js/src/editor/backend/modulearea.class.js","webpack:///./js/src/editor/backend/modulearea.js","webpack:///./js/src/editor/backend/presets.js","webpack:///./js/src/editor/backend/scroller.js","webpack:///./js/src/editor/backend/section.class.js","webpack:///./js/src/editor/backend/sections.js","webpack:///./js/src/editor/backend/sectionscontainer.class.js","webpack:///./js/src/editor/backend/settings.panel.js","webpack:///./js/src/editor/backend/templates.js","webpack:///./js/src/editor/backend/uigeneral.js","webpack:///./js/src/editor/backend/utils.class.js","webpack:///./node_modules/animejs/lib/anime.es.js","webpack:///./node_modules/sortablejs/modular/sortable.esm.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/src/editor/backend/index.js\");\n","/*********************************\n *\n * = CODE GENERATION =\n *\n * - dslc_save_composer ( Save the Page Changes )\n * - dslc_save_draft_composer ( Save the changes as draft, not publish )\n * - dslc_generate_code ( Generates Page's LC data )\n * - generateSectionCode ( Generate LC data for a specific row/section )\n * - dslca_gen_content_for_search ( Generate Readable Content For Search )\n *\n ***********************************/\n'use strict';\n/**\n * CODE GENERATION - Save Page Changes\n */\n\nvar _this = this;\n\nfunction dslc_save_composer() {\n  if (window.dslcDebug) console.log('dslc_save_composer');\n  /**\n   * Before saving code via ajax\n   * refresh the page source in a hidden #dslca-code\n   */\n\n  window.dslc_generate_code(); // Generate content for search\n\n  dslca_gen_content_for_search(); // Vars\n\n  var composerCode = jQuery('#dslca-code').val(),\n      contentForSearch = jQuery('#dslca-content-for-search').val(),\n      postID = jQuery('.dslca-container').data('post-id'); // Apply class to body to know saving is in progress\n\n  jQuery('body').addClass('dslca-saving-in-progress'); // Replace the check in publish button with a loading animation\n\n  jQuery('.dslca-save-composer .dslca-icon').removeClass('dslc-icon-ok').addClass('dslc-icon-spin dslc-icon-spinner'); // Ajax call to save the new content\n\n  jQuery.ajax({\n    method: 'POST',\n    type: 'POST',\n    url: DSLCAjax.ajaxurl,\n    data: {\n      action: 'dslc-ajax-save-composer',\n      dslc: 'active',\n      dslc_post_id: postID,\n      dslc_code: composerCode,\n      dslc_content_for_search: contentForSearch\n    },\n    timeout: 30000\n  }).done(function (response) {\n    // On success hide the publish button\n    if (response.status == 'success') {\n      jQuery('.dslca-save-composer').fadeOut(250);\n      jQuery('.dslca-save-draft-composer').fadeOut(250); // Create new cache version after it's saved.\n\n      jQuery('body').append('<iframe class=\"lbmn-cache-iframe\" id=\"lbmn-cache-iframe-' + postID + '\" src=\"' + DSLCSiteData.siteurl + '/?p=' + postID + '\" ></iframe>');\n      jQuery('.lbmn-cache-iframe').each(function (index, el) {\n        jQuery(el).load(function () {\n          jQuery(el).remove(); // Cache built at this point. Remove iframe.\n        });\n      }); // On fail show an alert message\n    } else {\n      alert('Something went wrong, please try to save again. Are you sure to make any changes? Error Code: ' + response.status);\n    }\n  }).fail(function (response) {\n    if (response.statusText == 'timeout') {\n      alert('The request timed out after 30 seconds. Server do not respond in time. Please try again.');\n    } else {\n      alert('Something went wrong. Please try again. Error Code: ' + response.statusText);\n    }\n  }).always(function (reseponse) {\n    // Replace the loading animation with a check icon\n    jQuery('.dslca-save-composer .dslca-icon').removeClass('dslc-icon-spin dslc-icon-spinner').addClass('dslc-icon-ok'); // Remove the class previously added so we know saving is finished\n\n    jQuery('body').removeClass('dslca-saving-in-progress');\n  });\n}\n/**\n * CODE GENERATION - Save Draft\n */\n\n\nfunction dslc_save_draft_composer() {\n  if (window.dslcDebug) console.log('dslc_save_draft_composer'); // Vars\n\n  var composerCode = jQuery('#dslca-code').val(),\n      postID = jQuery('.dslca-container').data('post-id'); // Apply class to body to know saving is in progress\n\n  jQuery('body').addClass('dslca-saving-in-progress'); // Replace the check in publish button with a loading animation\n\n  jQuery('.dslca-save-draft-composer .dslca-icon').removeClass('dslc-icon-ok').addClass('dslc-icon-spin dslc-icon-spinner'); // Ajax call to save the new content\n\n  jQuery.post(DSLCAjax.ajaxurl, {\n    action: 'dslc-ajax-save-draft-composer',\n    dslc: 'active',\n    dslc_post_id: postID,\n    dslc_code: composerCode\n  }, function (response) {\n    // Replace the loading animation with a check icon\n    jQuery('.dslca-save-draft-composer .dslca-icon').removeClass('dslc-icon-spin dslc-icon-spinner').addClass('dslc-icon-save'); // On success hide the publish button\n\n    if (response.status == 'success') {\n      jQuery('.dslca-save-draft-composer').fadeOut(250); // On fail show an alert message\n    } else {\n      alert('Something went wrong, please try to save again.');\n    } // Remove the class previously added so we know saving is finished\n\n\n    jQuery('body').removeClass('dslca-saving-in-progress');\n  });\n}\n/**\n * CODE GENERATION - Generate LC Data\n * @param section is not required. If no parameter provided function generates\n */\n\n\nwindow.dslc_generate_code = function () {\n  if (window.dslcDebug) console.log('dslc_generate_code'); // Vars\n\n  var moduleCode = '',\n      module_size,\n      composerCode = '',\n      pageCodeInJson = '',\n      maxPerRow = 12,\n      maxPerRowA = 12,\n      currPerRow = 0,\n      currPerRowA = 0,\n      modulesAreaSize,\n      modulesArea,\n      modulesAreaLastState,\n      modulesAreaFirstState,\n      modulesSection,\n      modulesSectionAtts = '',\n      modulesSectionJson;\n  /**\n   * Go through module areas (empty or not empty)\n   * TODO: Optimize code to go though the section/area needed only,\n   * not the whole page.\n   */\n\n  jQuery('#dslc-main .dslc-modules-area', LiveComposer.Builder.PreviewAreaDocument).each(function () {\n    if (jQuery('.dslc-module-front', this).length) {\n      jQuery(this).removeClass('dslc-modules-area-empty').addClass('dslc-modules-area-not-empty');\n      jQuery('.dslca-no-content', this).hide();\n    } else {\n      jQuery(this).removeClass('dslc-modules-area-not-empty').addClass('dslc-modules-area-empty');\n      jQuery('.dslca-no-content:not(:visible)', this).show().css({\n        '-webkit-animation-name': 'dslcBounceIn',\n        '-moz-animation-name': 'dslcBounceIn',\n        'animation-name': 'dslcBounceIn',\n        'animation-duration': '0.6s',\n        '-webkit-animation-duration': '0.6s',\n        padding: 0\n      }).animate({\n        padding: '35px 0'\n      }, 300);\n    }\n  });\n  /**\n   * Go through each row (empty or not empty)\n   */\n\n  jQuery('#dslc-main .dslc-modules-section', LiveComposer.Builder.PreviewAreaDocument).each(function () {\n    modulesSection = jQuery(this);\n    modulesSectionJson = generateSectionCode(modulesSection); // Update JSON in hidden text area with updated code.\n\n    modulesSection.find('.dslca-section-code').val(modulesSectionJson); // Add row code into the the whole page code.\n\n    pageCodeInJson = pageCodeInJson + modulesSectionJson + ','; // Close row ( section ) shortcode\n    // composerCode = composerCode + '[/dslc_modules_section] ';\n  }); // Remove the last comma in the code.\n\n  pageCodeInJson = pageCodeInJson.slice(0, -1); // pageCodeInJson = pageCodeInJson;\n\n  pageCodeInJson = '[' + pageCodeInJson + ']'; // Apply the new code values to the setting containers\n\n  jQuery('#dslca-code').val(pageCodeInJson);\n  jQuery('#dslca-export-code').val(pageCodeInJson);\n};\n/**\n * CODE GENERATION - Generate LC Data for Section\n *\n * @param  {jQuery Object} theModulesSection jQuery element for the section to process\n * @return {String}                   \t\t\tJSON code for the section\n */\n// ex. dslc_generate_section_code\n\n\nexport var generateSectionCode = function generateSectionCode(theModulesSection) {\n  if (window.dslcDebug) console.log('generateSectionCode'); // Vars\n\n  var moduleCode = '',\n      module_size,\n      composerCode = '',\n      pageCodeInJson = '',\n      maxPerRow = 12,\n      maxPerRowA = 12,\n      currPerRow = 0,\n      currPerRowA = 0,\n      modulesAreaSize,\n      modulesArea,\n      modulesAreaLastState,\n      modulesAreaFirstState,\n      modulesSection,\n      modulesSectionAtts = '',\n      modulesSectionJsonString = '',\n      modulesSectionJson;\n  modulesSection = theModulesSection; // Update dslc-modules-section-(not)empty classes\n\n  if (jQuery('.dslc-modules-area', modulesSection).length) {\n    modulesSection.removeClass('dslc-modules-section-empty').addClass('dslc-modules-section-not-empty');\n  } else {\n    modulesSection.removeClass('dslc-modules-section-not-empty').addClass('dslc-modules-section-empty');\n  } // Remove last and first classes from module areas and modules\n\n\n  jQuery('.dslc-modules-area.dslc-last-col, .dslc-modules-area.dslc-first-col', _this).removeClass('dslc-last-col dslc-first-col');\n  jQuery('.dslc-module-front.dslc-last-col, .dslc-module-front.dslc-first-col', _this).removeClass('dslc-last-col dslc-first-col'); // Vars\n\n  currPerRowA = 0; // Get current JSON.\n\n  modulesSectionJsonString = modulesSection.find('.dslca-section-code').val();\n  modulesSectionJson = JSON.parse(modulesSectionJsonString); // Generate attributes for the row shortcode\n\n  modulesSectionAtts = '';\n  jQuery('.dslca-modules-section-settings input', modulesSection).each(function () {\n    var currentInput = jQuery(this);\n    var currentAttrKey = currentInput.data('id');\n    var currentAttrVal = currentInput.val(); // Update hidden text fields with row attributes.\n\n    modulesSectionAtts = modulesSectionAtts + currentAttrKey + '=\"' + currentAttrVal + '\" '; // Update JSON object.\n\n    modulesSectionJson[currentAttrKey] = currentAttrVal;\n  }); // Delete attribute 'give_new_id'.\n  // It supposed to be used only once and by this time it was already applied.\n\n  if (undefined !== modulesSectionJson['give_new_id']) {\n    delete modulesSectionJson['give_new_id'];\n  } // Prepare place for module areas.\n\n\n  modulesSectionJson['content'] = []; // Open the module section ( row ) shortcode\n  // composerCode = composerCode + '[dslc_modules_section ' + modulesSectionAtts + '] ';\n\n  /**\n   * Go through each column of current row\n   */\n\n  jQuery('.dslc-modules-area', modulesSection).each(function () {\n    // Reset width counter for modules\n    currPerRow = 0; // Vars\n\n    modulesArea = jQuery(this);\n    modulesAreaSize = parseInt(modulesArea.data('size'));\n    modulesAreaLastState = 'no';\n    modulesAreaFirstState = 'no'; // Increment area column counter\n\n    currPerRowA += modulesAreaSize;\n    jQuery(this).removeClass('dslc-first-col');\n    jQuery(this).removeClass('dslc-last-col'); // If area column counter same as maximum\n\n    if (currPerRowA == maxPerRowA) {\n      // Apply classes to current and next column\n      jQuery(this).addClass('dslc-last-col').next('.dslc-modules-area').addClass('dslc-first-col'); // Reset area column counter\n\n      currPerRowA = 0; // Set shortcode's \"last\" attribute to \"yes\"\n\n      modulesAreaLastState = 'yes'; // If area column counter bigger than maximum\n    } else if (currPerRowA > maxPerRowA) {\n      // Apply classes to current and previous column\n      jQuery(this).removeClass('dslc-last-col').addClass('dslc-first-col'); // Set area column counter to the size of the current area\n\n      currPerRowA = modulesAreaSize; // Set shortcode's \"first\" attribute to yes\n\n      modulesAreaFirstState = 'yes';\n    } // If area column counter same as current area size\n\n\n    if (currPerRowA == modulesAreaSize) {\n      // Set shortcode's \"first\" attribute to yes\n      modulesAreaFirstState = 'yes'; // Apply classes to current and previous column\n\n      jQuery(this).removeClass('dslc-last-col').addClass('dslc-first-col');\n    } // Open the modules area ( area ) shortcode\n    // composerCode = composerCode + '[dslc_modules_area last=\"' + modulesAreaLastState + '\" first=\"' + modulesAreaFirstState + '\" size=\"' + modulesAreaSize + '\"] ';\n\n\n    var moduleAreaJSON = '{\"element_type\":\"module_area\",\"last\":\"' + modulesAreaLastState + '\",\"first\":\"' + modulesAreaFirstState + '\",\"size\":\"' + modulesAreaSize + '\"}'; // pageCodeInJson = pageCodeInJson +  moduleAreaJSON + ',';\n\n    moduleAreaJSON = JSON.parse(moduleAreaJSON); // Delete attribute 'give_new_id'.\n    // It supposed to be used only once and by this time it was already applied.\n\n    if (undefined !== moduleAreaJSON['give_new_id']) {\n      delete moduleAreaJSON['give_new_id'];\n    }\n\n    moduleAreaJSON.content = [];\n    /**\n     * Go through each module of current area\n     */\n\n    jQuery('.dslc-module-front', modulesArea).each(function () {\n      var dslc_module = jQuery(this); // Vars\n\n      module_size = parseInt(dslc_module[0].getAttribute('data-dslc-module-size'));\n      var moduleLastState = 'no';\n      var moduleFirstState = 'no';\n      jQuery(this).removeClass('dslc-first-col');\n      jQuery(this).removeClass('dslc-last-col'); // Increment modules column counter\n\n      currPerRow += module_size; // If modules column counter same as maximum\n\n      if (currPerRow == maxPerRow) {\n        // Add classes to current and next module\n        jQuery(this).addClass('dslc-last-col');\n        jQuery(this).next('.dslc-module-front').addClass('dslc-first-col'); // Reset modules column counter\n\n        currPerRow = 0; // Set shortcode's \"last\" state to \"yes\"\n\n        moduleLastState = 'yes'; // Set shorcode's \"first\" state to \"yes\"\n\n        moduleFirstState = 'yes'; // If modules column counter bigger than maximum\n      } else if (currPerRow > maxPerRow) {\n        // Add classes to current and previous module\n        jQuery(this).removeClass('dslc-last-col').addClass('dslc-first-col'); // Set modules column counter to the size of current module\n\n        currPerRow = module_size; // Set shortcode's \"first\" state to \"yes\"\n\n        moduleFirstState = 'yes';\n      } // If modules column counter same as current module size\n\n\n      if (currPerRow == module_size) {\n        // Set shortcode's \"first\" attribute to yes\n        moduleFirstState = 'yes'; // Apply classes to current and previous column\n\n        jQuery(this).removeClass('dslc-last-col').addClass('dslc-first-col');\n      }\n\n      try {\n        // Get module's LC data\n        moduleCode = dslc_module[0].querySelector('.dslca-module-code').value;\n      } catch (err) {\n        console.info('No DSLC code found in module: ' + dslc_module[0].getAttribute('id'));\n      }\n\n      if ('' !== moduleCode) {\n        // Add the module shortcode containing the data\n        // composerCode = composerCode + '[dslc_module last=\"' + moduleLastState + '\"]' + moduleCode + '[/dslc_module] ';\n        var moduleCodeJSON = JSON.parse(moduleCode); // Add idicator for the last module in the row.\n\n        moduleCodeJSON.last = moduleLastState; // RAW CODE CLEANUP: Clean the module code from keys with empty values.\n\n        jQuery.each(moduleCodeJSON, function (index, el) {\n          if (false === el || '' === el) {\n            delete moduleCodeJSON[index];\n          }\n\n          if ('content' === index) {\n            moduleCodeJSON[index] = el.replace(/\\\\'/g, \"'\");\n          }\n\n          if ('give_new_id' === index) {\n            delete moduleCodeJSON[index];\n          }\n        }); // Put optimized code back into the hidden textarea.\n\n        dslc_module[0].querySelector('.dslca-module-code').value = JSON.stringify(moduleCodeJSON); // Add the module JSON as array item\n\n        moduleAreaJSON['content'].push(moduleCodeJSON);\n      } // Fix bug with modules duplication if broken module saved.\n\n\n      moduleCode = '';\n    });\n    modulesSectionJson['content'].push(moduleAreaJSON); // Close area shortcode\n    // composerCode = composerCode + '[/dslc_modules_area] ';\n  });\n  var generatedCode = JSON.stringify(modulesSectionJson);\n  return generatedCode;\n};\n/**\n * CODE GENERATION - Document Ready\n */\n\nvar setEventListeners = function setEventListeners() {\n  /**\n   * Hook - Save Page\n   */\n  jQuery(document).on('click', '.dslca-save-composer-hook', function (e) {\n    e.preventDefault(); // If some saving action not already in progress\n\n    if (!jQuery('body').hasClass('dslca-module-saving-in-progress') && !jQuery('body').hasClass('dslca-saving-in-progress')) {\n      // Call the function to save\n      dslc_save_composer();\n    }\n  });\n  /**\n   * Hook - Save Draft\n   */\n\n  jQuery(document).on('click', '.dslca-save-draft-composer-hook', function (e) {\n    e.preventDefault(); // If some saving action not already in progress\n\n    if (!jQuery('body').hasClass('dslca-module-saving-in-progress') && !jQuery('body').hasClass('dslca-saving-in-progress')) {\n      // Call the function to save\n      dslc_save_draft_composer();\n    }\n  });\n};\n/**\n* Other - Generate Readable Content For Search\n*/\n\n\nfunction dslca_gen_content_for_search() {\n  if (window.dslcDebug) console.log('dslca_gen_content_for_search'); // Vars\n\n  var holder = document.getElementById('dslca-content-for-search');\n\n  if (null === holder) {\n    return;\n  }\n\n  var prevContent = holder.value;\n  var content = ''; // Go through each content element\n\n  var elements = LiveComposer.Builder.PreviewAreaWindow.document.querySelectorAll('#dslc-main .dslc-module-front [data-exportable-content]');\n\n  if (undefined !== elements) {\n    Array.prototype.forEach.call(elements, function (el, i) {\n      // el - current DOM element, i – counter\n      var extracted_html_code;\n\n      if (el.getAttribute('data-exportable-content') !== '') {\n        var wrapper_tag = el.getAttribute('data-exportable-content');\n        extracted_html_code = '<' + wrapper_tag + '>' + el.innerHTML + '</' + wrapper_tag + '>';\n      } else {\n        extracted_html_code = el.innerHTML;\n      }\n\n      if (extracted_html_code !== null) {\n        content += extracted_html_code.replace(/\\s+/g, ' ').trim() + '\\n';\n      }\n    });\n  } // Set the value of the content field\n\n\n  holder.value = content; // Used to show the publish button for pages made before this feature\n\n  if (prevContent !== content) {\n    window.dslc_show_publish_button();\n  }\n}\n/**\n * Other - Generate code of editable content\n */\n\n\nexport var editableContentCodeGeneration = function editableContentCodeGeneration(dslcField) {\n  if (window.dslcDebug) console.log('editableContentCodeGeneration'); // In some rare cases we have the next error:\n  // TypeError: undefined is not an object (evaluating 'dslcField.html().trim()...')\n\n  if (undefined === dslcField) {\n    return false;\n  }\n\n  var dslcModule = dslcField.closest('.dslc-module-front');\n  var moduleEl = dslcModule[0];\n  var dslcContent = dslcField.html().trim().replace(/<textarea/g, '<lctextarea').replace(/<\\/textarea/g, '</lctextarea');\n  var dslcFieldID = dslcField.data('id'); // Update module ID in raw base64 code (dslc_code) of the module\n\n  LiveComposer.Utils.update_module_property_raw(moduleEl, dslcFieldID, dslcContent); // dslcFieldID = 'content'\n  // jQuery('.dslca-module-option-front[data-id=\"' + dslcFieldID + '\"]', dslcModule).val( dslcContent );\n};\nexport var codeGenerationInitJS = function codeGenerationInitJS() {\n  setEventListeners();\n};","/**\n * UI - General - Initiate Drag and Drop Functonality\n */\nimport { moduleOutputDefault } from \"./module.js\";\nimport Sortable from 'sortablejs';\nexport var dragAndDropInit = function dragAndDropInit() {\n  var modulesSection, modulesArea, moduleID, moduleOutput; // Drag and Drop for module icons from the list of modules\n\n  var modules_list = jQuery('.dslca-modules .dslca-section-scroller-content'); // Groups that can hold modules\n  // jQuery(modules_list).each(function (i,e) {\n\n  if (modules_list.length == 0) {\n    modules_list = [document.createElement('div')];\n  }\n\n  var modules_list_sortable = Sortable.create(modules_list[0], {\n    sort: false,\n    // do not allow sorting inside the list of modules\n    group: {\n      name: 'modules',\n      pull: 'clone',\n      put: false\n    },\n    animation: 150,\n    handle: '.dslca-module',\n    draggable: '.dslca-module',\n    // ghostClass: 'dslca-module-placeholder',\n    chosenClass: 'dslca-module-dragging',\n    scroll: true,\n    // or HTMLElement\n    scrollSensitivity: 150,\n    // px, how near the mouse must be to an edge to start scrolling.\n    scrollSpeed: 15,\n    // px\n    setData: function setData(dataTransfer, dragEl) {\n      //dragEl – contains html of the draggable element like:\n      //<div class=\"dslca-module dslca-scroller-item dslca-origin dslca-origin-General\" data-id=\"DSLC_Button\" data-origin=\"General\" draggable=\"false\" style=\"\">\n      // dataTransfer.setData('Text', dragEl.textContent);\n      dataTransfer.setData(LiveComposer.Utils.msieversion() !== false ? 'Text' : 'text/html', dragEl.innerHTML);\n    },\n    // dragging started\n    onStart: function onStart(\n    /**Event*/\n    evt) {\n      evt.oldIndex; // element index within parent\n      // jQuery( '.dslc-modules-area' ).sortable( \"refreshPositions\" );\n\n      jQuery('body').removeClass('dslca-new-module-drag-not-in-progress').addClass('dslca-new-module-drag-in-progress');\n      jQuery('body', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-new-module-drag-not-in-progress').addClass('dslca-new-module-drag-in-progress');\n      jQuery('#dslc-header').addClass('dslca-header-low-z-index');\n    },\n    // dragging ended\n    onEnd: function onEnd(\n    /**Event*/\n    evt) {\n      evt.oldIndex; // element's old index within parent\n\n      evt.newIndex; // element's new index within parent\n\n      var itemEl = evt.item; // dragged HTML\n\n      evt.preventDefault(); // evt.stopPropagation();\n      //return false;\n      // Prevent drop into modules listing\n\n      if (jQuery(itemEl).closest('.dslca-section-scroller-content').length > 0) return false;\n      jQuery('.dslca-options-hovered', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-options-hovered'); // Vars\n\n      modulesArea = jQuery(itemEl.parentNode); //jQuery(this);\n\n      moduleID = itemEl.dataset.id; // get value of data-id attr.\n\n      window.dslc_generate_code();\n\n      if (moduleID == 'DSLC_M_A' || jQuery('body').hasClass('dslca-module-drop-in-progress') || modulesArea.closest('#dslc-header').length || modulesArea.closest('#dslc-footer').length) {// nothing\n      } else {\n        jQuery('body').addClass('dslca-module-drop-in-progress'); // Add padding to modules area\n\n        /*\n        if ( modulesArea.hasClass('dslc-modules-area-not-empty') )\n        \tmodulesArea.animate({ paddingBottom : 50 }, 150);\n        */\n        // TODO: Optimize expensive ajax call in this function!\n        // Load Output\n\n        moduleOutputDefault(moduleID, function (response) {\n          // Append Content\n          moduleOutput = response.output; // Remove extra padding from area\n          // modulesArea.css({ paddingBottom : 0 });\n          // Add output\n          // TODO: optimize jQuery in the string below\n\n          var dslcJustAdded = LiveComposer.Builder.Helpers.insertModule(moduleOutput, jQuery('.dslca-module', modulesArea));\n          setTimeout(function () {\n            LiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\n            jQuery('body').removeClass('dslca-module-drop-in-progress');\n          }, 700); // \"Show\" no content text // Not used anymore?\n          // jQuery('.dslca-no-content-primary', modulesArea ).css({ opacity : 1 });\n          // \"Show\" modules area management\n\n          jQuery('.dslca-modules-area-manage', modulesArea).css({\n            visibility: 'visible'\n          }); // Generete\n\n          LiveComposer.Builder.PreviewAreaWindow.dslc_carousel();\n          LiveComposer.Builder.PreviewAreaWindow.dslc_tabs();\n          LiveComposer.Builder.PreviewAreaWindow.dslc_init_accordion();\n          window.dslc_generate_code(); // Show publish\n\n          window.dslc_show_publish_button(); // LiveComposer.Builder.UI.initInlineEditors();\n        }); // Loading animation\n        // Show loader – Not used anymore.\n        // jQuery('.dslca-module-loading', modulesArea).show();\n        // Change module icon to the spinning loader.\n\n        jQuery(itemEl).find('.dslca-icon').attr('class', '').attr('class', 'dslca-icon dslc-icon-refresh dslc-icon-spin'); // Hide no content text // Not used anymore?\n        // jQuery('.dslca-no-content-primary', modulesArea).css({ opacity : 0 });\n        // Hide modules area management\n\n        jQuery('.dslca-modules-area-manage', modulesArea).css({\n          visibility: 'hidden'\n        }); // Animate loading\n\n        /*\n        var randomLoadingTime = Math.floor(Math.random() * (100 - 50 + 1) + 50) * 100;\n        jQuery('.dslca-module-loading-inner', modulesArea).css({ width : 0 }).animate({\n        \twidth : '100%'\n        }, randomLoadingTime, 'linear' );\n        */\n      }\n\n      LiveComposer.Builder.UI.stopScroller();\n      jQuery('body').removeClass('dslca-new-module-drag-in-progress').addClass('dslca-new-module-drag-not-in-progress');\n      jQuery('body', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-new-module-drag-in-progress').addClass('dslca-new-module-drag-not-in-progress');\n      jQuery('#dslc-header').removeClass('dslca-header-low-z-index');\n    },\n    // Element is dropped into the list from another list\n    onAdd: function onAdd(\n    /**Event*/\n    evt) {\n      var itemEl = evt.item; // dragged HTMLElement\n\n      evt.from; // previous list\n      // + indexes from onEnd\n      // evt.preventDefault();\n    },\n    // Changed sorting within list\n    onUpdate: function onUpdate(\n    /**Event*/\n    evt) {\n      var itemEl = evt.item; // dragged HTMLElement\n      // + indexes from onEnd\n\n      window.dslc_show_publish_button(); // evt.preventDefault();\n    },\n    // Called by any change to the list (add / update / remove)\n    onSort: function onSort(\n    /**Event*/\n    evt) {\n      // same properties as onUpdate\n      evt.preventDefault(); // evt.stopPropagation(); return false;\n    },\n    // Element is removed from the list into another list\n    onRemove: function onRemove(\n    /**Event*/\n    evt) {// same properties as onUpdate\n    },\n    // Attempt to drag a filtered element\n    onFilter: function onFilter(\n    /**Event*/\n    evt) {\n      var itemEl = evt.item; // HTMLElement receiving the `mousedown|tapstart` event.\n    },\n    // Event when you move an item in the list or between lists\n    onMove: function onMove(\n    /**Event*/\n    evt) {\n      // Example: http://jsbin.com/tuyafe/1/edit?js,output\n      evt.dragged; // dragged HTMLElement\n\n      evt.draggedRect; // TextRectangle {left, top, right и bottom}\n\n      evt.related; // HTMLElement on which have guided\n\n      evt.relatedRect; // TextRectangle\n      // return false; — for cancel\n\n      jQuery(evt.to).addClass('dslca-options-hovered');\n    }\n  });\n};","/**\n * The place to do all the events bindings.\n */\nexport var eventsInit = function eventsInit() {\n  // Parent page events.\n  document.addEventListener('click', function (event) {\n    if (event.target.matches('[data-event=\"modal-wysiwyg-cancel\"]')) {\n      // Create a new \"Modal Cancel\" event\n      var modalWysiwygCancel = new CustomEvent('modalWysiwygCancel', {\n        detail: event.target\n      });\n      document.dispatchEvent(modalWysiwygCancel);\n    }\n\n    if (event.target.matches('[data-event=\"modal-wysiwyg-confirm\"]')) {\n      // Create a new \"Modal Cancel\" event\n      var modalWysiwygConfirm = new CustomEvent('modalWysiwygConfirm', {\n        detail: event.target\n      });\n      document.dispatchEvent(modalWysiwygConfirm);\n    }\n  }, false); // Preview iframe events.\n\n  LiveComposer.Builder.PreviewAreaWindow.document.addEventListener('click', function (event) {\n    event.preventDefault();\n\n    if (event.target.matches('[data-event=\"module-edit\"]')) {\n      // Create a new \"Open Module Editing\" event\n      var moduleEdit = new CustomEvent('moduleEdit', {\n        detail: event.target\n      });\n      document.dispatchEvent(moduleEdit);\n    }\n\n    if (event.target.matches('[data-event=\"module-duplicate\"]')) {\n      // Create a new \"Duplicate Module\" event\n      var moduleDuplicate = new CustomEvent('moduleDuplicate', {\n        detail: event.target\n      });\n      document.dispatchEvent(moduleDuplicate);\n    }\n\n    if (event.target.matches('[data-event=\"module-delete\"]')) {\n      // Create a new \"Delete Module\" event\n      var moduleDelete = new CustomEvent('moduleDelete', {\n        detail: event.target\n      });\n      document.dispatchEvent(moduleDelete);\n    }\n\n    if (event.target.matches('.dslca-change-width-module-options [data-size]')) {\n      // Create a new \"Change Module Width\" event\n      var moduleChangeWidth = new CustomEvent('moduleChangeWidth', {\n        detail: event.target\n      });\n      document.dispatchEvent(moduleChangeWidth);\n    }\n\n    if (event.target.matches('[data-event=\"wysiwyg-edit\"]')) {\n      // Create a new \"Module WYSIWYG Editing\" event\n      var wysiwygEdit = new CustomEvent('wysiwygEdit', {\n        detail: event.target\n      });\n      document.dispatchEvent(wysiwygEdit);\n    }\n  }, false);\n};","/**\n * Main builder file\n */\nimport { templatesPanelInit } from './templates.js';\nimport { fixContenteditable, keypressEvents } from './uigeneral.js';\nimport { CSectionsContainer } from './sectionscontainer.class.js';\nimport { settingsPanelInit } from './settings.panel.js';\nimport { sectionsInit } from './sections.js';\nimport { dragAndDropInit } from './dragndrop.js';\nimport { codeGenerationInitJS } from './codegeneration.js';\nimport { initPreviewAreaScroller } from './scroller.js';\nimport { untilsInitJs } from './utils.class.js';\nimport { modalwindowInitJS } from './modalwindow.js';\nimport { moduleInitJS } from './module.js';\nimport { presetsInit } from \"./presets.js\";\nimport { eventsInit } from './events.js';\nvar dslcDebug = false; // dslcDebug = true;\n// Global Plugin Object\n\nwindow.LiveComposer = {\n  Builder: {\n    Elements: {},\n    UI: {},\n    Actions: {},\n    Flags: {},\n    PreviewFrame: {},\n    Helpers: {}\n  },\n  Production: {},\n  Utils: {}\n};\n\n(function () {\n  LiveComposer.Builder.Flags = {\n    windowScroller: false,\n    panelOpened: false,\n    // Settings panel opened\n    uiHidden: false,\n    // ex composer-hidden\n    modalOpen: false,\n    // Used to prevent multiple code generation when\n    // cancelling row edits\n    generate_code_after_row_changed: true\n  };\n  LiveComposer.Builder.Actions = {\n    postponed_actions_queue: {},\n    add_postponed_action: function add_postponed_action(action_name) {\n      if (action_name === undefined) {\n        return;\n      }\n\n      if (isNaN(this.postponed_actions_queue[action_name])) {\n        this.postponed_actions_queue[action_name] = 0;\n      }\n\n      this.postponed_actions_queue[action_name] += 1;\n    },\n    release_postponed_actions: function release_postponed_actions() {\n      var self = this;\n      jQuery.each(this.postponed_actions_queue, function (index, value) {\n        if (1 < value) {\n          self.postponed_actions_queue[index] -= 1;\n        } else if (1 == value) {\n          window[index](); // Run function with action name\n\n          self.postponed_actions_queue[index] -= 1;\n        }\n      });\n    },\n    // LiveComposer.Builder.Actions.optionsChanged() - if calling from parent.\n    // parent.LiveComposer.Builder.Actions.optionsChanged() - if calling from iframe.\n    optionsChanged: function optionsChanged() {\n      window.dslc_show_publish_button();\n    }\n    /**\n     * Inserts module fixing inline scripts bug\n     *\n     * @param {string} moduleHTML\n     * @param {string} afterObject after what module should be inserted\n     *\n     * @return {DOM} inserted object\n     */\n\n  };\n\n  LiveComposer.Builder.Helpers.insertModule = function (moduleHTML, afterObject) {\n    var newModule = jQuery(moduleHTML),\n        afterObject = jQuery(afterObject);\n    var scripts = [];\n    newModule.find('script').each(function () {\n      scripts.push(this.innerHTML);\n      this.parentNode.removeChild(this);\n    }); // Insert 'updated' module output after module we are editing.\n    // && Delete 'old' instance of the module we are editing.\n\n    afterObject.after(newModule).remove();\n    scripts.forEach(function (item) {\n      var script = LiveComposer.Builder.PreviewAreaDocument[0].createElement('script');\n      script.innerHTML = item;\n      script.type = 'text/javascript';\n      LiveComposer.Builder.PreviewAreaDocument[0].getElementById(newModule[0].id).appendChild(script);\n    });\n    scripts = null;\n    afterObject = null;\n    return newModule;\n  };\n})();\n/** Wait till tinyMCE loaded */\n\n\nwindow.previewAreaTinyMCELoaded = function (windowObj) {\n  LiveComposer.Builder.PreviewAreaWindow = windowObj;\n  LiveComposer.Builder.PreviewAreaDocument = jQuery(windowObj.document); // Disable WP admin bar in editing mode\n\n  jQuery('#wpadminbar', LiveComposer.Builder.PreviewAreaDocument).remove(); // LiveComposer.Builder.UI.initInlineEditors();\n\n  fixContenteditable();\n  templatesPanelInit();\n  settingsPanelInit();\n  sectionsInit();\n  var mainDraggable = LiveComposer.Builder.PreviewAreaDocument.find(\"#dslc-main\").eq(0)[0];\n  new CSectionsContainer(mainDraggable);\n  jQuery(document).trigger('editorFrameLoaded');\n  dragAndDropInit();\n  codeGenerationInitJS();\n  window.dslc_generate_code(); // Catch keypress events (from both parent and iframe) to add keyboard support\n\n  keypressEvents();\n  initPreviewAreaScroller();\n  modalwindowInitJS();\n  moduleInitJS();\n  untilsInitJs();\n  presetsInit();\n  eventsInit();\n}; // Disable the prompt ( are you sure ) on refresh\n\n\nwindow.onbeforeunload = function () {\n  return;\n};","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Modal Window Class file\n */\n\n/**\n * Shows modal window\n *\n * @param {object} params\n * @params.title         {string} - modal window title\n * @params.content       {string}- modal window description\n * @params.confirm       {function} - modal window confirm action\n * @params.cancel        {function} - modal window cancel action\n * @params.cancel_title  {string} - modal window cancel title\n * @params.confirm_title {string} - modal window confirm title\n * @params.ok_title {string} - modal window OK title\n */\nexport var CModalWindow = function CModalWindow(params) {\n  if (_typeof(params) != 'object' || LiveComposer.Builder.Flags.modalOpen === true) return false;\n  var self = this; // Show Modal Window\n\n  var modalWindowWrap = '<div class=\"dslca-prompt-modal dslca-prompt-modal-active\">' + '<div class=\"dslca-prompt-modal-content\"><div class=\"dslca-prompt-modal-msg\">' + '<span class=\"dslca-prompt-modal-title\">' + params.title + '</span>' + '<span class=\"dslca-prompt-modal-descr\">' + params.content + '</span></div>';\n  var modalWindowActions = '';\n\n  if (params.confirm || params.cancel) {\n    modalWindowActions = '<div class=\"dslca-prompt-modal-actions\">' + '<a href=\"#\" class=\"dslca-prompt-modal-confirm-hook\"><span class=\"dslc-icon dslc-icon-ok\">' + '</span>' + (params.confirm_title ? params.confirm_title : 'Confirm') + '</a><span class=\"dslca-prompt-modal-cancel-hook\"><span class=\"dslc-icon dslc-icon-remove\">' + '</span>' + (params.cancel_title ? params.cancel_title : 'Cancel') + '</span></div>';\n  } else {\n    modalWindowActions = '<div class=\"dslca-prompt-modal-actions\">' + '<a href=\"#\" class=\"dslca-prompt-modal-confirm-hook\"><span class=\"dslc-icon dslc-icon-ok\">' + '</span>' + (params.ok_title ? params.ok_title : 'OK') + '</a></div>';\n  }\n\n  modalWindowWrap += modalWindowActions + '</div>';\n  modalWindowWrap = jQuery(modalWindowWrap);\n  if (typeof params.confirm != 'function') params.confirm = function () {};\n  if (typeof params.cancel != 'function') params.cancel = function () {}; // Confirm handler (function)\n\n  modalWindowWrap.find('.dslca-prompt-modal-confirm-hook').click(function (e) {\n    e.stopPropagation();\n    modalWindowWrap.find('.dslca-prompt-modal-content').animate({\n      top: '55%'\n    }, 400);\n    modalWindowWrap.animate({\n      opacity: 0\n    }, 400, function () {\n      params.confirm();\n      LiveComposer.Builder.Flags.modalOpen = false;\n      jQuery(this).remove(); // – moved here as it prevent some JS to get value on time\n    });\n    return false;\n  }); // Cancel handler (function)\n\n  modalWindowWrap.find('.dslca-prompt-modal-cancel-hook').click(function (e) {\n    e.stopPropagation();\n    modalWindowWrap.find('.dslca-prompt-modal-content').animate({\n      top: '55%'\n    }, 400);\n    modalWindowWrap.animate({\n      opacity: 0\n    }, 400, function () {\n      jQuery(this).remove();\n      LiveComposer.Builder.Flags.modalOpen = false;\n      params.cancel();\n    });\n    return false;\n  });\n  modalWindowWrap.hide();\n  jQuery(\"body\").append(modalWindowWrap);\n  modalWindowWrap.css({\n    opacity: 0\n  }).show().animate({\n    opacity: 1\n  }, 400); // Animate modal\n\n  modalWindowWrap.find('.dslca-prompt-modal-content').css({\n    top: '55%'\n  }).animate({\n    top: '50%'\n  }, 400);\n  LiveComposer.Builder.Flags.modalOpen = true;\n};","/*********************************\n *\n * = UI - MODAL =\n * Note: Used for the templates save/export/import and icons\n *\n * - dslc_show_modal ( Show Modal )\n * - dslc_hide_modal ( Hide Modal )\n *\n ***********************************/\nimport { editableContentCodeGeneration } from \"./codegeneration.js\";\n/**\n * MODAL - Show\n *\n * @param {Object} hook - Button that was clicked to open modal\n * @param {string} modal - CSS address of the modal, like '.modal-icons'\n */\n\nfunction dslc_show_modal(hook, modal) {\n  if (typeof dslcDebug !== 'undefined' && dslcDebug) console.log('dslc_show_modal');\n\n  if (jQuery('.dslca-modal:visible').length) {\n    // If a modal already visibile hide it\n    hideModal('', jQuery('.dslca-modal:visible'));\n  } // Vars\n\n\n  var modal = jQuery(modal); // Calc popup height\n\n  var containerHeight = jQuery('.dslca-container').height();\n  modal.outerHide({\n    clbk: function clbk() {\n      hideModal('', jQuery('.dslca-modal:visible'));\n    }\n  }); // Vars ( Calc Offset )\n\n  var position = jQuery(hook).position(),\n      diff = modal.outerWidth() / 2 - hook.outerWidth() / 2,\n      offset = position.left - diff; // Show Modal\n\n  modal.css({\n    left: offset\n  });\n  jQuery(\".dslca-prompt-modal-custom\").insertAfter(modal);\n\n  if (jQuery(\".dslca-prompt-modal-custom\").length > 0) {\n    jQuery(\".dslca-prompt-modal-custom\").fadeIn();\n  }\n\n  modal.addClass('dslca-modal-open').show(); // Animate Modal\n  // modal.css({\n  // '-webkit-animation-name' : 'dslcBounceIn',\n  // '-moz-animation-name' : 'dslcBounceIn',\n  // 'animation-name' : 'dslcBounceIn',\n  // 'animation-duration' : '0.6s',\n  // '-webkit-animation-duration' : '0.6s'\n  // }).fadeIn(600);\n}\n/**\n * MODAL - Hide\n */\n// ex. dslc_hide_modal\n\n\nexport var hideModal = function hideModal(hook, modal) {\n  if (typeof dslcDebug !== 'undefined' && dslcDebug) console.log('hideModal'); // Vars\n\n  var modal = jQuery(modal); // Hide ( with animation )\n\n  modal.outerHide('destroy');\n  modal.hide();\n\n  if (jQuery(\".dslca-prompt-modal-custom\").length > 0) {\n    jQuery(\".dslca-prompt-modal-custom\").fadeOut();\n  }\n\n  modal.removeClass('dslca-modal-open');\n  /*\n  modal.css({\n  \t'-webkit-animation-name' : 'dslcBounceOut',\n  \t'-moz-animation-name' : 'dslcBounceOut',\n  \t'animation-name' : 'dslcBounceOut',\n  \t'animation-duration' : '0.6s',\n  \t'-webkit-animation-duration' : '0.6s'\n  }).fadeOut(600);\n  */\n}; // Hide if clicked outside of modal\n\n/*jQuery(document).mouseup(function (e) {\n\t\tvar container = jQuery(\".dslca-modal-open\");\n\n\t\tif (!container.is(e.target) // if the target of the click isn't the container...\n\t\t&& container.has(e.target).length === 0) // ... nor a descendant of the container\n\t\t{\n\t\tcontainer.hide();\n\t\t}\n});*/\n\n/**\n * MODAL - Document Ready\n */\n\njQuery(document).ready(function ($) {\n  /**\n   * Hook - Show Modal\n   */\n  jQuery(document).on('click', '.dslca-open-modal-hook', function (e) {\n    e.preventDefault();\n    var modal = jQuery(this).data('modal');\n    dslc_show_modal(jQuery(this), modal);\n  });\n  /**\n   * Hook - Hide Modal\n   */\n\n  jQuery(document).on('click', '.dslca-close-modal-hook', function (e) {\n    e.preventDefault();\n\n    if (!jQuery(this).hasClass('dslca-action-disabled')) {\n      var modal = jQuery(this).data('modal');\n      hideModal(jQuery(this), modal);\n    }\n  });\n});\n/*********************************\n *\n * 5) = UI - PROMPT MODAL =\n *\n * - dslc_js_confirm\n * - dslc_js_confirm_close\n *\n ***********************************/\n\nfunction dslc_js_confirm(dslcID, dslcContent, dslcTarget) {\n  if (typeof dslcDebug !== 'undefined' && dslcDebug) console.log('dslc_js_confirm'); // Add \"active\" class\n\n  jQuery('.dslca-prompt-modal').addClass('dslca-prompt-modal-active'); // Add the ID of current event\n\n  jQuery('.dslca-prompt-modal').data('id', dslcID);\n  jQuery('.dslca-prompt-modal').data('target', dslcTarget); // Add modal content\n\n  jQuery('.dslca-prompt-modal-msg').html(dslcContent); // Show modal\n\n  jQuery('.dslca-prompt-modal').css({\n    opacity: 0\n  }).show().animate({\n    opacity: 1\n  }, 400); // Animate modal\n\n  jQuery('.dslca-prompt-modal-content').css({\n    top: '55%'\n  }).animate({\n    top: '50%'\n  }, 400);\n} // ex. dslc_js_confirm_close\n\n\nexport var confirmClose = function confirmClose() {\n  if (typeof dslcDebug !== 'undefined' && dslcDebug) console.log('dslc_js_confirm_close'); // Remove \"active\" class\n\n  jQuery('.dslca-prompt-modal').removeClass('dslca-prompt-modal-active'); // Hide modal\n\n  jQuery('.dslca-prompt-modal').animate({\n    opacity: 0\n  }, 400, function () {\n    jQuery(this).hide();\n    jQuery('.dslca-prompt-modal-cancel-hook').show();\n    jQuery('.dslca-prompt-modal-confirm-hook').html('<span class=\"dslc-icon dslc-icon-ok\"></span>' + DSLCString.str_confirm);\n  });\n  jQuery('.dslca-prompt-modal-content').animate({\n    top: '55%'\n  }, 400);\n};\n/**\n * Hook - Confirm on Enter, Cancel on Esc\n */\n\nwindow.dslc_modal_keypress_events = function dslc_modal_keypress_events(e) {\n  // Enter ( confirm )\n  if (e.which == 13) {\n    if (jQuery('.dslca-prompt-modal-active').length) {\n      jQuery('.dslca-prompt-modal-confirm-hook').trigger('click');\n    } // Escape ( cancel )\n\n  } else if (e.which == 27) {\n    if (jQuery('.dslca-prompt-modal-active').length) {\n      jQuery('.dslca-prompt-modal-cancel-hook').trigger('click');\n    }\n  }\n};\n/**\n * UI - PROMPT MODAL - Document Ready\n */\n\n\njQuery(document).ready(function ($) {\n  jQuery(document).on('click', '.dslca-prompt-modal-cancel-hook', function (e) {\n    e.preventDefault();\n    var dslcAction = jQuery('.dslca-prompt-modal').data('id');\n    var dslcTarget = jQuery('.dslca-prompt-modal').data('target');\n\n    if (dslcAction == 'edit_in_progress') {\n      /// MOVED\n      dslc_module_options_cancel_changes(function () {\n        dslcTarget.trigger('click');\n      });\n    } else if (dslcAction == 'delete_module') {}\n\n    confirmClose();\n    jQuery('.dslca-prompt-modal').data('id', '');\n  });\n  jQuery(document).on('click', '.dslca-prompt-modal-confirm-hook', function (e) {\n    e.preventDefault();\n    var dslcAction = jQuery('.dslca-prompt-modal').data('id');\n    var dslcTarget = jQuery('.dslca-prompt-modal').data('target');\n    var closeAtEnd = true;\n\n    if (dslcAction == 'edit_in_progress') {\n      /// MOVED\n      dslc_module_options_confirm_changes(function () {\n        dslcTarget.trigger('click');\n      });\n    } else if (dslcAction == 'disable_lc') {\n      window.location = dslcTarget;\n    } else if ('delete_module' === dslcAction) {\n      /// MOVED\n      var module = dslcTarget.closest('.dslc-module-front');\n      dslc_module_delete(module);\n    } else if ('delete_modules_area' === dslcAction) {\n      var modulesArea = dslcTarget.closest('.dslc-modules-area');\n      var parentSectionContainer = modulesArea.closest('.dslc-modules-section-inner');\n      dslc_modules_area_delete(modulesArea);\n    } else if (dslcAction == 'delete_modules_section') {\n      /// MOVED\n      dslc_row_delete(dslcTarget.closest('.dslc-modules-section'));\n    } else if (dslcAction == 'export_modules_section') {} else if (dslcAction == 'import_modules_section') {\n      /// MOVED\n      dslc_row_import(jQuery('.dslca-prompt-modal textarea').val());\n      jQuery('.dslca-prompt-modal-confirm-hook span').css({\n        opacity: 0\n      });\n      jQuery('.dslca-prompt-modal-confirm-hook .dslca-loading').show();\n      closeAtEnd = false;\n    }\n\n    if (closeAtEnd) {\n      confirmClose();\n    }\n\n    jQuery('.dslca-prompt-modal').data('id', '');\n  });\n});\n/**\n * DON'T MOVE THE FUNCTION BELLOW OUT OF THIS FILE!\n * Hide element when click on another element on the page\n */\n\njQuery.fn.outerHide = function (params) {\n  var $ = jQuery;\n  params = params ? params : {};\n  var self = this;\n\n  if ('destroy' == params) {\n    jQuery(document).unbind('click.outer_hide');\n    return false;\n  }\n\n  jQuery(document).bind('click.outer_hide', function (e) {\n    if (jQuery(e.target).closest(self).length == 0 && e.target != self && $.inArray(jQuery(e.target)[0], jQuery(params.clickObj)) == -1 && jQuery(self).css('display') != 'none') {\n      if (params.clbk) {\n        params.clbk();\n      } else {\n        jQuery(self).hide();\n      }\n    }\n  });\n};\n/**\n * Cancel changes in standard WP Editor (TinyMCE) WYSIWYG\n */\n\n\ndocument.addEventListener('modalWysiwygCancel', function (customEvent) {\n  jQuery('.dslca-wp-editor').hide();\n  jQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-wysiwyg-active');\n});\n/**\n * Confirm changes in standard WP Editor (TinyMCE) WYSIWYG\n */\n\ndocument.addEventListener('modalWysiwygConfirm', function (customEvent) {\n  var module = jQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument).closest('.dslc-module-front');\n\n  if (typeof tinymce != \"undefined\") {\n    if (jQuery('#wp-dslcawpeditor-wrap').hasClass('tmce-active')) {\n      var editor = tinymce.get('dslcawpeditor');\n      var content = editor.getContent();\n    } else {\n      var content = jQuery('#dslcawpeditor').val();\n    }\n\n    content = content.trim();\n    jQuery('.dslca-wp-editor').hide();\n    jQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument).html(content);\n\n    if (module.hasClass('dslc-module-handle-like-accordion')) {\n      jQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument).siblings('.dslca-editable-content').html(content);\n      jQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument).siblings('.dslca-accordion-plain-content').val(content);\n      var dslcAccordion = module.find('.dslc-accordion');\n      LiveComposer.Builder.PreviewAreaWindow.dslc_accordion_generate_code(dslcAccordion);\n    } else if (module.hasClass('dslc-module-handle-like-tabs')) {\n      jQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument).siblings('.dslca-editable-content').html(content);\n      jQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument).siblings('.dslca-tab-plain-content').val(content);\n      var dslcTabs = module.find('.dslc-tabs');\n      LiveComposer.Builder.PreviewAreaWindow.dslc_tabs_generate_code(dslcTabs);\n    }\n\n    editableContentCodeGeneration(jQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument));\n    jQuery('.dslca-wysiwyg-active', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-wysiwyg-active');\n  } else {\n    console.info('Live Composer: TinyMCE is undefined.');\n  }\n});\nexport var modalwindowInitJS = function modalwindowInitJS() {};","/**\n *  Builder module functions & hooks\n *\n *   = MODULES =\n *\n * - dslc_module_delete ( Deletes a module )\n * - moduleDuplicate ( Copies a module )\n * - dslc_module_width_set ( Sets a width to module )\n * - dslc_module_options_show ( Show module options )\n * - dslc_module_options_section_filter ( Filter options section )\n * - dslc_module_options_hideshow_tabs ( Hide show tabs based on option choices )\n * - dslc_module_options_confirm_changes ( Confirm changes )\n * - dslc_module_options_cancel_changes ( Cancel changes )\n * - dslc_module_options_tooltip ( Helper tooltips for options )\n * - dslc_module_options_font ( Actions for font option type )\n * - dslc_module_options_icon ( Actions for icon font option type )\n * - dslc_module_options_icon_returnid (Fill icon option type with selected icon ID/name)\n * - dslc_module_options_text_align ( Actions for text align option type )\n * - dslc_module_options_checkbox ( Actions for checkbox option type )\n * - dslc_module_options_box_shadow ( Actions for box shadow option type )\n * - dslc_modules_options_box_shadow_color ( Initiate colorpicker for box shadow)\n * - dslc_module_options_text_shadow ( Actions for text shadow option type )\n * - dslc_modules_options_text_shadow_color ( Initiate colorpicker for text shadow)\n * - dslc_module_options_color ( Actions for color option type )\n * - dslc_module_output_default ( Get module output with default settings )\n * - dslc_module_output_altered ( Get module output when settings altered )\n *\n */\nimport { CModalWindow } from './modalwindow.class.js';\nimport { hidePublishButton, showSection } from './uigeneral.js';\nimport anime from 'animejs';\nimport { editableContentCodeGeneration } from \"./codegeneration.js\";\n\nvar actionAvail = function actionAvail() {\n  if (LiveComposer.Builder.Flags.panelOpened) {\n    LiveComposer.Builder.UI.shakePanelConfirmButton();\n    return false;\n  }\n\n  return true;\n};\n/**\n * Hook - Duplicate Module\n */\n\n\ndocument.addEventListener('moduleDuplicate', function (customEvent) {\n  var elClicked = customEvent.detail; // customEvent.detail - is element being clicked passed as additional data in the event.\n  // Check if action can be fired\n\n  if (!actionAvail()) return false;\n\n  if (!elClicked.classList.contains('dslca-action-disabled')) {\n    moduleDuplicate(elClicked.closest('.dslc-module-front'));\n  }\n});\n/**\n * Hook - Module Delete\n */\n\ndocument.addEventListener('moduleDelete', function (customEvent) {\n  var elClicked = customEvent.detail; // customEvent.detail - is element being clicked passed as additional data in the event.\n  // Check if action can be fired\n\n  if (!actionAvail()) return false;\n  var self = this;\n\n  if (!elClicked.classList.contains('dslca-action-disabled')) {\n    CModalWindow({\n      title: DSLCString.str_del_module_title,\n      content: DSLCString.str_del_module_descr,\n      confirm: function confirm() {\n        var module = elClicked.closest('.dslc-module-front');\n        dslc_module_delete(module);\n      }\n    });\n  }\n});\n/**\n * Hook - Edit Module On Click ( Display Options Panel )\n */\n\ndocument.addEventListener('moduleEdit', function (customEvent) {\n  var elClicked = customEvent.detail; // customEvent.detail - is element being clicked passed as additional data in the event.\n\n  var currentModuleEl = elClicked.closest('.dslc-module-front');\n  var currentModuleId = currentModuleEl.dataset.module;\n  var elEditing = LiveComposer.Builder.PreviewAreaWindow.document.querySelector('.dslca-module-being-edited');\n  var row_edited = jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).length; /// If settings panel opened - do not proceed.\n\n  if (LiveComposer.Builder.Flags.uiHidden || null !== elEditing && elEditing.length > 0 || row_edited > 0) {\n    if (elEditing != currentModuleEl) {\n      LiveComposer.Builder.UI.shakePanelConfirmButton();\n    }\n\n    return false;\n  }\n\n  unmarkModulesBeingEdited(); // Add the \"being edited\" class to current module\n\n  currentModuleEl.classList.add('dslca-module-being-edited'); // Call the function to display options\n\n  dslc_module_options_show(currentModuleId); // Cover up other modules with semi transp cover\n\n  LiveComposer.Builder.PreviewAreaWindow.document.body.classList.add('module-editing-in-progress');\n});\n/**\n * Hook - Edit Module On Click ( Display Options Panel ) - Fixed: https://github.com/live-composer/live-composer-page-builder/issues/895\n */\n\nvar adjustZindex = function adjustZindex() {\n  LiveComposer.Builder.PreviewAreaDocument.on({\n    mouseenter: function mouseenter() {\n      jQuery('.dslca-modules-section-manage', LiveComposer.Builder.PreviewAreaDocument).css(\"z-index\", \"99998\");\n    },\n    mouseleave: function mouseleave() {\n      jQuery('.dslca-modules-section-manage', LiveComposer.Builder.PreviewAreaDocument).css(\"z-index\", \"999999\");\n    }\n  }, '.dslca-change-width-module-hook, .dslc-module-front .dslca-module-manage');\n};\n/**\n * Hook - Set Module Width\n */\n\n\ndocument.addEventListener('moduleChangeWidth', function (customEvent) {\n  var elClicked = customEvent.detail; // customEvent.detail - is element being clicked passed as additional data in the event.\n\n  var currentModuleEl = elClicked.closest('.dslc-module-front');\n\n  if (!elClicked.classList.contains('dslca-action-disabled')) {\n    var oldSize = currentModuleEl.dataset.dslcModuleSize;\n    var newSize = elClicked.dataset.size; // Start expensive function only if the value changed.\n\n    if (Number(oldSize) !== Number(newSize)) {\n      dslc_module_width_set(currentModuleEl, newSize);\n    }\n  }\n});\n/**\n * Hook - Show code for altering module's defaults\n */\n\n/*\nFIXIT\nLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-module-get-defaults-hook', function(){\n\n\t// Vars\n\tvar module = jQuery(this).closest('.dslc-module-front');\n\tvar code = dslc_dm_get_defaults( module );\n\n\t// Generate modal's text\n\tvar message = '<span class=\"dslca-prompt-modal-title\">Module Defaults</span>'\n\t\t+ '<span class=\"dslca-prompt-modal-descr\">The code bellow is used to alter the defaults.</span>'\n\t\t+ '<textarea></textarea><br><br>';\n\n\t// Hide modal's cancel button\n\tjQuery('.dslca-prompt-modal-cancel-hook').hide();\n\n\t// Show confirm button and change it to \"OK\"\n\tjQuery('.dslca-prompt-modal-confirm-hook').html('<span class=\"dslc-icon dslc-icon-ok\"></span>OK');\n\n\t// Show the modal prompt\n\tdslc_js_confirm( 'dev_mode_get_default', message, module );\n}); */\n\n/**\n * Hook - Refresh Module\n * We have 'refresh' icon on blog posts grid and other post-based modules.\n * It's visible only when there are no posts to render.\n */\n\n/*\nFIXIT\nLiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-refresh-module-hook', function(e){\n\n\tjQuery(this).css({\n\t\t'-webkit-animation-name' : 'dslcRotate',\n\t\t'-moz-animation-name' : 'dslcRotate',\n\t\t'animation-name' : 'dslcRotate',\n\t\t'animation-duration' : '0.6s',\n\t\t'-webkit-animation-duration' : '0.6s',\n\t\t'animation-iteration-count' : 'infinite',\n\t\t'-webkit-animation-iteration-count' : 'infinite'\n\t});\n\tjQuery(this).closest('.dslc-module-front').addClass('dslca-module-being-edited');\n\tmoduleOutputAltered( function() {\n\n\t\tjQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\n\t});\n}); */\n\n/**\n * Show WYSIWYG\n */\n\ndocument.addEventListener('wysiwygEdit', function (customEvent) {\n  var elClicked = customEvent.detail; // customEvent.detail - is element being clicked passed as additional data in the event.\n\n  var currentModuleEl = elClicked.closest('.dslc-module-front'); // const editableEl = elClicked.querySelector('.dslca-editable-content');\n\n  var idToEdit = elClicked.dataset.idToEdit;\n  var editableEl = currentModuleEl.querySelector('[data-edit-id=\"' + idToEdit + '\"]');\n  var content = '';\n\n  if ('TEXTAREA' === editableEl.tagName || 'INPUT' === editableEl.tagName) {\n    content = editableEl.value;\n  } else {\n    content = editableEl.innerHTML;\n  }\n\n  if (undefined === content) {\n    content = '';\n  }\n\n  if (content.trim().length) {\n    // Extract Content for current tab/accordion:\n\n    /* if ( currentModuleEl.classList.contains('dslc-module-handle-like-accordion') || currentModuleEl.classList.contains('dslc-module-handle-like-tabs') ) {\n    \tconst full_content_arr = content.split('(dslc_sep)');\n    \tif ( full_content_arr.length ) {\n    \t\tcontent = full_content_arr[idToEdit].trim();\n    \t}\n    } */\n    content = content.replace(/<lctextarea/g, '<textarea').replace(/<\\/lctextarea/g, '</textarea');\n  } // Restore shortcodes presentation.\n\n\n  if (content.includes('%')) {\n    content = content.replace(/%\\(\\(%/g, '[');\n    content = content.replace(/%\\)\\)%/g, ']');\n    content = content.replace(/%\\(%/g, '[');\n    content = content.replace(/%\\)%/g, ']');\n    content = content.replace(/%\\{%/g, '[');\n    content = content.replace(/%\\}%/g, ']');\n  }\n\n  content = content.trim(); // Fill TinyMCE editor with extracted above content.\n\n  if (typeof tinymce != 'undefined') {\n    var editor = tinymce.get('dslcawpeditor');\n\n    if (document.getElementById('wp-dslcawpeditor-wrap').classList.contains('tmce-active')) {\n      editor.setContent(content, {\n        format: 'html'\n      });\n    } else {\n      document.getElementById('dslcawpeditor').value = content;\n    }\n\n    if (!currentModuleEl.classList.contains('dslca-module-being-edited')) {\n      currentModuleEl.querySelector('.dslca-module-edit-hook').click();\n    }\n\n    jQuery('.dslca-wp-editor').show();\n    editableEl.classList.add('dslca-wysiwyg-active');\n    jQuery('#dslcawpeditor_ifr, #dslcawpeditor').css({\n      height: jQuery('.dslca-wp-editor').height() - 300\n    });\n  } else {\n    console.info('Live Composer: TinyMCE is undefined.');\n  }\n}); // Editable Contents.\n\nvar editableContentTextEvents = function editableContentTextEvents() {\n  // Preview iframe events.\n\n  /* LiveComposer.Builder.PreviewAreaWindow.document.addEventListener('blur', function (event) {\n  \t// event.preventDefault();\n  \tif ( event.target.matches( '[data-event=\"module-edit\"]' ) ) {\n  \t\t}\n  });\n  */\n\n  /* \tLiveComposer.Builder.PreviewAreaWindow.document.addEventListener('keyup', function (event) {\n  \t\t// event.preventDefault();\n  \t\tif ( event.target.matches( '[data-event=\"module-edit\"]' ) ) {\n  \n  \t\t}\n  \t});\n   */\n  LiveComposer.Builder.PreviewAreaDocument.on('blur', '.dslca-editable-content', function () {\n    if (!LiveComposer.Builder.Flags.uiHidden && jQuery(this).data('type') == 'simple') {\n      editableContentCodeGeneration(jQuery(this));\n    }\n  }).on('paste', '.dslca-editable-content:not(.inline-editor)', function () {\n    if (!LiveComposer.Builder.Flags.uiHidden && jQuery(this).data('type') == 'simple') {\n      var dslcRealInput = jQuery(this);\n      setTimeout(function () {\n        if (dslcRealInput.data('type') == 'simple') {\n          dslcRealInput.html(dslcRealInput.text());\n        }\n\n        editableContentCodeGeneration(dslcRealInput);\n      }, 100);\n    }\n  }).on('focus', '.dslca-editable-content', function () {\n    if (jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).length > 0 && !jQuery(this).closest('.dslc-module-front').hasClass('dslca-module-being-edited')) {\n      jQuery(this).trigger('blur');\n    }\n  }).on('keyup', '.dslca-editable-content', function () {\n    if (jQuery(this).data('type') == 'simple') {\n      jQuery(this).closest('.dslc-module-front').addClass('dslca-module-change-made');\n    }\n  });\n};\n/**\n * MODULES - Delete a Module\n */\n\n\nfunction dslc_module_delete(module) {\n  if (window.dslcDebug) console.log('dslc_delete_module');\n  showSection('.dslca-modules');\n  anime({\n    targets: module,\n    easing: 'easeOutExpo',\n    scale: 0,\n    opacity: 0,\n    duration: 350,\n    delay: 0,\n    endDelay: 0,\n    complete: function complete(anim) {\n      // Remove module, regenerate code, show publish button\n      module.parentNode.removeChild(module);\n      window.dslc_generate_code();\n      window.dslc_show_publish_button();\n    }\n  });\n}\n\nvar unmarkModulesBeingEdited = function unmarkModulesBeingEdited() {\n  // Remove being edited class if some module is being edited.\n  var elEditing = LiveComposer.Builder.PreviewAreaWindow.document.querySelector('.dslca-module-being-edited');\n\n  if (null !== elEditing) {\n    elEditing.classList.remove('dslca-module-being-edited');\n  }\n};\n/**\n * Modules - Copy a Module\n */\n\n\nfunction moduleDuplicate(module) {\n  if (window.dslcDebug) console.log('dslc_copy_module');\n  unmarkModulesBeingEdited(); // Duplicate the module and append it to the same area\n\n  var module_new = module.cloneNode(true);\n  jQuery(module_new).appendTo(module.closest('.dslc-modules-area')).css({\n    '-webkit-animation-name': 'none',\n    '-moz-animation-name': 'none',\n    'animation-name': 'none',\n    'animation-duration': '0',\n    '-webkit-animation-duration': '0',\n    opacity: 0,\n    top: -50\n  }).addClass('dslca-module-being-edited'); // Generate new ID for the new module and change it in HTML/CSS of the module.\n\n  getNewModuleId(module_new); // Module fully cloned. Finish the process.\n  // Need to call this function to update last column class for the modules.\n\n  window.dslc_generate_code(); // Fade in the module\n\n  anime({\n    targets: module_new,\n    easing: 'easeOutExpo',\n    // scale: 0,\n    top: 0,\n    opacity: 1,\n    duration: 400,\n    delay: 0,\n    endDelay: 0,\n    complete: function complete(anim) {\n      module_new.classList.remove('dslca-module-being-edited');\n    }\n  });\n  window.dslc_show_publish_button();\n}\n/**\n * Generate new ID for the module provided\n *\n * Search/Replace old module ID with new one in HTML/CSS of the module.\n *\n * @param DOM module Module that needs ID updated (new ID).\n * @return void\n */\n\n\nexport var getNewModuleId = function getNewModuleId(moduleEl) {\n  // Vars\n  var dslc_module_id = LiveComposer.Utils.get_unique_id(); // Generate new module ID.\n\n  var dslc_module_id_original = moduleEl.getAttribute('id'); // Original Module ID.\n  // Update module ID in data attribute\n\n  moduleEl.setAttribute('data-module-id', dslc_module_id); // Update module ID in id attribute of element\n\n  moduleEl.setAttribute('id', 'dslc-module-' + dslc_module_id);\n  /**\n   * Search/Replace module id in the inline CSS\n   */\n\n  var inline_css_el = moduleEl.getElementsByTagName('style')[0];\n  var inline_css_code = inline_css_el.textContent; // Update id attribute for <style> element with new value\n\n  inline_css_el.setAttribute('id', '#css-for-dslc-module-' + dslc_module_id); // Search/Replace all occurrences of module ID in inline CSS\n\n  inline_css_code = inline_css_code.split(dslc_module_id_original).join('dslc-module-' + dslc_module_id); // Put CSS code back into <style> element\n\n  inline_css_el.textContent = inline_css_code; // Update module ID in raw base64 code (dslc_code) of the module\n\n  LiveComposer.Utils.update_module_property_raw(moduleEl, 'module_instance_id', dslc_module_id);\n};\n/**\n * MODULES - Set Width\n */\n\nfunction dslc_module_width_set(moduleEl, new_width) {\n  if (window.dslcDebug) console.log('dslc_module_width_set'); // Generate new column class\n\n  var newClass = 'dslc-' + new_width + '-col'; // Add new column class and change size \"data\"\n\n  jQuery(moduleEl).removeClass('dslc-1-col dslc-2-col dslc-3-col dslc-4-col dslc-5-col dslc-6-col dslc-7-col dslc-8-col dslc-9-col dslc-10-col dslc-11-col dslc-12-col').addClass(newClass).data('dslc-module-size', new_width); //.addClass('dslca-module-being-edited'); – Deprecated\n  // Change module size in element attribute\n\n  moduleEl.setAttribute('data-dslc-module-size', new_width); // Update module size in raw base64 code (dslc_code) of the module\n\n  LiveComposer.Utils.update_module_property_raw(moduleEl, 'dslc_m_size', new_width);\n  LiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\n  window.dslc_generate_code();\n  window.dslc_show_publish_button();\n}\n/**\n * MODULES - Show module options\n */\n\n\nfunction dslc_module_options_show(moduleID) {\n  if (window.dslcDebug) console.log('dslc_module_options_show');\n\n  if (undefined === moduleID) {\n    console.warn('No module ID defined in dslc_module_options_show function.');\n  } // Vars\n\n\n  var dslcModule = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument),\n      dslcModuleOptions = jQuery('.dslca-module-options-front textarea', dslcModule),\n      dslcDefaultSection = jQuery('.dslca-header').data('default-section'),\n      pseudoPanel = jQuery(jQuery('#pseudo-panel').html());\n  jQuery(\"#wpwrap\").append(pseudoPanel); // Settings array for the Ajax call\n\n  var dslcSettings = {};\n  dslcSettings['action'] = 'dslc-ajax-display-module-options';\n  dslcSettings['dslc'] = 'active';\n  dslcSettings['dslc_module_id'] = moduleID;\n  dslcSettings['dslc_post_id'] = jQuery('.dslca-container').data('data-post-id');\n  dslcSettings.dslc_url_vars = LiveComposer.Utils.get_page_params(); // Go through each option to fill dslcSettings array\n  // with current module setting values\n\n  dslcModuleOptions.each(function () {\n    // Vars\n    var dslcOption = jQuery(this),\n        dslcOptionID = dslcOption.data('id'),\n        dslcOptionValue = dslcOption.val();\n\n    if (dslcOptionValue.includes('%')) {\n      // Restore shortcodes.\n      dslcOptionValue = dslcOptionValue.replace(/%\\(\\(%/g, '[');\n      dslcOptionValue = dslcOptionValue.replace(/%\\)\\)%/g, ']');\n      dslcOptionValue = dslcOptionValue.replace(/%\\(%/g, '[');\n      dslcOptionValue = dslcOptionValue.replace(/%\\)%/g, ']');\n      dslcOptionValue = dslcOptionValue.replace(/%\\{%/g, '[');\n      dslcOptionValue = dslcOptionValue.replace(/%\\}%/g, ']');\n    } // Add option ID and value to the settings array\n\n\n    dslcSettings[dslcOptionID] = dslcOptionValue;\n  }); // Hide the save/cancel actions for text editor and show notification\n\n  jQuery('.dslca-wp-editor-actions').hide();\n  jQuery('.dslca-wp-editor-notification').show(); // Hide the publish button\n\n  hidePublishButton(); // LiveComposer.Builder.UI.initInlineEditors();\n  // Set up backup\n\n  var moduleBackup = jQuery('.dslca-module-options-front', dslcModule).children().clone();\n  LiveComposer.Builder.moduleBackup = moduleBackup;\n  LiveComposer.Builder.Flags.panelOpened = true; // Show pseudo settings panel\n\n  pseudoPanel.show();\n  pseudoPanel.addClass('show'); // AJAX call to get options HTML\n\n  jQuery.post(DSLCAjax.ajaxurl, dslcSettings, function (response) {\n    // Hide pseudo panel\n    pseudoPanel.remove(); // Show edit section\n\n    showSection('.dslca-module-edit'); // Add the options\n\n    if (!jQuery('body').hasClass('rtl')) {\n      jQuery('.dslca-module-edit-options-inner').html(response.output);\n    } else {\n      jQuery('.dslca-module-edit-options-inner').html(response.output);\n    }\n\n    jQuery('.dslca-module-edit-options-tabs').html(response.output_tabs);\n    var sectionsUsed = []; // – Array with tab ids to show for current module.\n\n    /**\n     * Go through each option and check its tab property.\n     * Fill sectionsUsed array with ids of the tabs to display.\n     * We don't want to display tabs with no options inside.\n     */\n\n    jQuery('.dslca-module-edit-options-inner .dslca-module-edit-option').each(function () {\n      var currentOptionSection = jQuery(this).data('section'); // Check if this section is in the list of tabs to show.\n\n      if (sectionsUsed.indexOf(currentOptionSection) == -1) {\n        sectionsUsed.push(currentOptionSection);\n      }\n    });\n    var tabs_total = sectionsUsed.length;\n\n    for (var i = 0; i < tabs_total; i++) {\n      // Show the tabs used by the current module.\n      jQuery('.dslca-header .dslca-options-filter-hook[data-section=\"' + sectionsUsed[i] + '\"]').show();\n    } // Show the filter hooks\n    // jQuery('.dslca-header .dslca-options-filter-hook').show();\n    // Trigger click on first filter hook\n\n\n    if (jQuery('.dslca-module-edit-option[data-section=\"' + dslcDefaultSection + '\"]').length) {\n      jQuery('.dslca-header .dslca-options-filter-hook[data-section=\"' + dslcDefaultSection + '\"]').show();\n      jQuery('.dslca-header .dslca-options-filter-hook[data-section=\"' + dslcDefaultSection + '\"]').trigger('click');\n    } else {\n      jQuery('.dslca-header .dslca-options-filter-hook:first').hide();\n      jQuery('.dslca-header .dslca-options-filter-hook:first').next('.dslca-options-filter-hook').trigger('click');\n    } // Show the save/cancel actions\n\n\n    jQuery('.dslca-module-edit-actions').show(); // Show the save/cancel actions for text editor and hide notification\n\n    jQuery('.dslca-wp-editor-notification').hide();\n    jQuery('.dslca-wp-editor-actions').show(); // Hide the section hooks\n\n    jQuery('.dslca-header .dslca-go-to-section-hook').hide(); // Hide the row save/cancel actions\n\n    jQuery('.dslca-row-edit-actions').hide();\n    LiveComposer.Builder.UI.loadOptionsDeps();\n  });\n}\n/**\n * MODULES - Module output default settings\n */\n\n\nexport var moduleOutputDefault = function moduleOutputDefault(dslc_module_id, callback) {\n  if (window.dslcDebug) console.log('moduleOutputDefault');\n  jQuery.post(DSLCAjax.ajaxurl, {\n    action: 'dslc-ajax-add-module',\n    dslc: 'active',\n    dslc_module_id: dslc_module_id,\n    // ex. DSLC_Button\n    dslc_post_id: jQuery('.dslca-container').data('post-id'),\n    dslc_url_vars: LiveComposer.Utils.get_page_params(),\n    dslc_new_module: true\n  }, function (response) {\n    callback(response);\n  });\n};\n/**\n * MODULES - Redraw module output when settings altered\n */\n\nexport var moduleOutputAltered = function moduleOutputAltered(callback) {\n  if (window.dslcDebug) console.log('moduleOutputAltered');\n  callback = typeof callback !== 'undefined' ? callback : false;\n  var dslcModule = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument),\n      dslc_module_id = dslcModule.data('module'),\n      dslcModuleOptions = jQuery('.dslca-module-options-front textarea', dslcModule),\n      dslcModuleInstanceID = dslcModule.data('module-id');\n  /**\n   * Generate code\n   */\n\n  var dslcSettings = {};\n  dslcSettings['action'] = 'dslc-ajax-add-module';\n  dslcSettings['dslc'] = 'active';\n  dslcSettings['dslc_module_id'] = dslc_module_id;\n  dslcSettings['dslc_module_instance_id'] = dslcModuleInstanceID;\n  dslcSettings['dslc_post_id'] = jQuery('.dslca-container').data('post-id');\n  if (dslcModule.hasClass('dslca-preload-preset')) dslcSettings['dslc_preload_preset'] = 'enabled';else dslcSettings['dslc_preload_preset'] = 'disabled';\n  dslcModule.removeClass('dslca-preload-preset');\n  dslcModuleOptions.each(function () {\n    var dslcOption = jQuery(this);\n    var dslcOptionID = dslcOption.data('id');\n    var dslcOptionValue = dslcOption.val();\n    dslcSettings[dslcOptionID] = dslcOptionValue;\n  });\n  dslcSettings.dslc_url_vars = LiveComposer.Utils.get_page_params();\n  /**\n   * Call AJAX for preview\n   */\n\n  jQuery.post(DSLCAjax.ajaxurl, dslcSettings, function (response) {\n    var newModule = LiveComposer.Builder.Helpers.insertModule(response.output, dslcModule);\n    newModule.addClass('dslca-module-being-edited');\n    response = null;\n    newModule = null; // TODO: Add new postponed action to run after all done\n    // window.dslc_show_publish_button();\n\n    LiveComposer.Builder.PreviewAreaWindow.dslc_carousel();\n    LiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\n    LiveComposer.Builder.PreviewAreaWindow.dslc_tabs();\n    LiveComposer.Builder.PreviewAreaWindow.dslc_init_accordion();\n    /**\n     * Create Custom Event/Hook\n     *\n     * Third-party developers should use it like this:\n     * window.addEventListener('moduleOutputAltered', function (e) {\n     * \t....\n     * }, false);\n     */\n\n    var event = new Event('moduleOutputAltered'); // Dispatch the event.\n\n    LiveComposer.Builder.PreviewAreaWindow.dispatchEvent(event);\n\n    if (callback) {\n      callback(response);\n    }\n  });\n};\n/**\n * MODULES - Reload a specific module\n */\n\nfunction dslc_module_output_reload(dslcModule, callback) {\n  if (window.dslcDebug) console.log('dslc_module_output_reload');\n  callback = typeof callback !== 'undefined' ? callback : false;\n  var dslc_module_id = dslcModule.data('module'),\n      dslcModuleOptions = jQuery('.dslca-module-options-front textarea', dslcModule),\n      dslcModuleInstanceID = dslcModule.data('module-id');\n  /**\n   * Generate code\n   */\n\n  var dslcSettings = {};\n  dslcSettings['action'] = 'dslc-ajax-add-module';\n  dslcSettings['dslc'] = 'active';\n  dslcSettings['dslc_module_id'] = dslc_module_id;\n  dslcSettings['dslc_module_instance_id'] = dslcModuleInstanceID;\n  dslcSettings['dslc_post_id'] = jQuery('.dslca-container').data('post-id');\n  dslcSettings['dslc_preload_preset'] = 'enabled';\n  dslcModule.removeClass('dslca-preload-preset');\n  dslcModuleOptions.each(function () {\n    var dslcOption = jQuery(this);\n    var dslcOptionID = dslcOption.data('id');\n    var dslcOptionValue = dslcOption.val();\n    dslcSettings[dslcOptionID] = dslcOptionValue;\n  });\n  /**\n   * Loader\n   */\n\n  dslcModule.append('<div class=\"dslca-module-reloading\"><span class=\"dslca-icon dslc-icon-spin dslc-icon-refresh\"></span></div>');\n  /**\n   * Call AJAX for preview\n   */\n\n  jQuery.post(DSLCAjax.ajaxurl, dslcSettings, function (response) {\n    dslcModule.after(response.output).next().addClass('dslca-module-being-edited');\n    dslcModule.remove();\n    window.dslc_generate_code();\n    window.dslc_show_publish_button();\n    LiveComposer.Builder.PreviewAreaWindow.dslc_carousel();\n    LiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\n    LiveComposer.Builder.PreviewAreaWindow.dslc_tabs();\n    LiveComposer.Builder.PreviewAreaWindow.dslc_init_accordion();\n\n    if (callback) {\n      callback(response);\n    }\n\n    jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\n  });\n}\n/**\n * Other - Get Alter Module Defaults Code\n */\n\n\nfunction dslc_dm_get_defaults(module) {\n  if (window.dslcDebug) console.log('dslc_dm_get_defaults'); // The module code value\n\n  var optionsCode = module.find('.dslca-module-code').val(); // Ajax call to get the plain PHP code\n\n  jQuery.post(DSLCAjax.ajaxurl, {\n    action: 'dslc-ajax-dm-module-defaults',\n    dslc: 'active',\n    dslc_modules_options: optionsCode\n  }, function (response) {\n    // Apply the plain PHP code to the textarea\n    jQuery('.dslca-prompt-modal textarea').val(response.output);\n  });\n}\n/**\n * Deprecated Functions and Fallbacks\n */\n\n\nfunction dslc_copy_module(module) {\n  moduleDuplicate(module);\n}\n\nfunction dslc_display_module_options(moduleID) {\n  dslc_module_options_show(moduleID);\n}\n\nfunction dslc_preview_change(callback) {\n  moduleOutputAltered(callback);\n}\n\nfunction dslc_reload_module(moduleID, callback) {\n  dslc_module_output_reload(moduleID, callback);\n}\n\nexport var moduleInitJS = function moduleInitJS() {\n  adjustZindex();\n  editableContentTextEvents();\n};","/**\n * DSLC_ModuleArea class\n */\nimport Sortable from 'sortablejs';\nimport { modulesAreaAdd } from \"./modulearea.js\";\nexport var ModuleArea = function ModuleArea(elem) {\n  var self = this;\n  this.section = jQuery(elem).closest('.dslc-modules-section');\n  this.elem = elem;\n  /** Set observer to change elems class */\n\n  this.observer = new mqMutationObserver(elem, function () {\n    var classList = self.elem.classList;\n\n    if (elem.querySelectorAll('.dslc-module-front').length == 0) {\n      classList.add('dslc-modules-area-empty');\n      classList.remove('dslc-modules-area-not-empty');\n    } else {\n      classList.remove('dslc-modules-area-empty');\n      classList.add('dslc-modules-area-not-empty');\n    }\n  }, {\n    childList: true\n  });\n  /**\n   * Make MODULES inside the Modules Area draggable/sortable\n   */\n\n  this.sortable = Sortable.create(elem, {\n    group: 'modules',\n    animation: 350,\n    handle: '.dslca-move-module-hook',\n    draggable: '.dslc-module-front',\n    ghostClass: 'dslca-module-ghost',\n    chosenClass: 'dslca-module-dragging',\n    scroll: true,\n    // or HTMLElement\n    scrollSensitivity: 150,\n    // px, how near the mouse must be to an edge to start scrolling.\n    scrollSpeed: 15,\n    // px\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData(LiveComposer.Utils.msieversion() !== false ? 'Text' : 'text/html', dragEl.innerHTML);\n    },\n    // dragging started\n    onStart: function onStart(evt) {\n      evt.oldIndex; // element index within parent\n\n      jQuery('body').removeClass('dslca-drag-not-in-progress').addClass('dslca-drag-in-progress');\n      jQuery('body', LiveComposer.Builder.PreviewAreaWindow.document).removeClass('dslca-drag-not-in-progress').addClass('dslca-drag-in-progress');\n    },\n    // dragging ended\n    onEnd: function onEnd(evt) {\n      evt.oldIndex; // element's old index within parent\n\n      evt.newIndex; // element's new index within parent\n\n      evt.preventDefault();\n      window.dslc_generate_code();\n      LiveComposer.Builder.UI.stopScroller();\n      jQuery('body').removeClass('dslca-drag-in-progress').addClass('dslca-drag-not-in-progress');\n      jQuery('body', LiveComposer.Builder.PreviewAreaWindow.document).removeClass('dslca-drag-in-progress').addClass('dslca-drag-not-in-progress');\n    },\n    // Element is dropped into the list from another list\n    onAdd: function onAdd(evt) {\n      var itemEl = evt.item; // dragged HTMLElement\n\n      evt.from; // previous list\n      // If container/column/modules area droped.\n\n      if (jQuery(itemEl).data('id') == 'DSLC_M_A') {\n        modulesAreaAdd(jQuery(self.section).find('.dslc-modules-section-wrapper .dslc-modules-section-inner'));\n        itemEl.remove();\n      } // + indexes from onEnd\n      // evt.preventDefault();\n      // evt.stopPropagation(); return false;\n\n    },\n    // Changed sorting within list\n    onUpdate: function onUpdate(evt) {\n      var itemEl = evt.item; // dragged HTMLElement\n      // + indexes from onEnd\n      // evt.preventDefault();\n      // evt.stopPropagation(); return false;\n\n      window.dslc_show_publish_button();\n    },\n    // Called by any change to the list (add / update / remove)\n    onSort: function onSort(evt) {// same properties as onUpdate\n      // evt.preventDefault();\n      // evt.stopPropagation(); return false;\n    },\n    // Element is removed from the list into another list\n    onRemove: function onRemove(evt) {// same properties as onUpdate\n    },\n    // Attempt to drag a filtered element\n    onFilter: function onFilter(evt) {\n      var itemEl = evt.item; // HTMLElement receiving the `mousedown|tapstart` event.\n    },\n    // Event when you move an item in the list or between lists\n    onMove: function onMove(evt) {\n      // Example: http://jsbin.com/tuyafe/1/edit?js,output\n      evt.dragged; // dragged HTMLElement\n\n      evt.draggedRect; // TextRectangle {left, top, right и bottom}\n\n      evt.related; // HTMLElement on which have guided\n\n      evt.relatedRect; // TextRectangle\n      // return false; — for cancel\n      // Add here the function to update underlying class\n\n      if (jQuery('.dslc-modules-area-empty').find('.dslc-module-front').length > 0) {\n        jQuery(this).removeClass('dslc-modules-area-empty').addClass('dslc-modules-area-not-empty');\n        jQuery('.dslca-no-content:not(:visible)', this).show().css({\n          '-webkit-animation-name': 'dslcBounceIn',\n          '-moz-animation-name': 'dslcBounceIn',\n          'animation-name': 'dslcBounceIn',\n          'animation-duration': '0.6s',\n          '-webkit-animation-duration': '0.6s',\n          padding: 0\n        }).animate({\n          padding: '35px 0'\n        }, 300, function () {});\n      }\n    }\n  }); // Mark module area as initialized\n\n  jQuery(elem).attr('data-jsinit', 'initialized');\n  /** Sort option setter */\n\n  jQuery(document).on('LC.sortableOff', function () {\n    self.sortable && self.sortable.option && self.sortable.option('disabled', true);\n  });\n  jQuery(document).on('LC.sortableOn', function () {\n    self.sortable && self.sortable.option && self.sortable.option('disabled', false);\n  });\n};","/**\n * Functions powering Module Areas functionality\n *\n * = AREAS ( MODULE AREAS ) =\n *\n * - Actions/Events (Duplicate, Change Width, Delete, ...)\n * - dslc_modules_area_add ( Adds a new modules area )\n * - dslc_modules_area_delete ( Deletes modules area )\n * - dslc_modules_area_width_set ( Sets specific width to the modules area )\n * - dslc_copy_modules_area ( Copies modules area )\n *\n */\nimport { dragAndDropInit } from './dragndrop.js';\nimport { addSection } from './sections.js';\nimport { ModuleArea } from './modulearea.class.js';\nimport { CModalWindow } from './modalwindow.class.js';\nimport { showSection } from './uigeneral.js';\nimport { getNewModuleId } from \"./module.js\";\n/**\n * Module Area Actions (Duplicate, Change Width, Delete, ...)\n *\n * Attach these actions once the editing iFrame loaded.\n */\n\n;\njQuery(document).on('editorFrameLoaded', function () {\n  function init_sortables() {\n    var el = jQuery('.dslc-modules-area', LiveComposer.Builder.PreviewAreaDocument); // Groups that can hold modules\n\n    jQuery(el).each(function (i, e) {\n      new ModuleArea(e);\n    });\n  }\n\n  var actionAvail = function actionAvail() {\n    if (LiveComposer.Builder.Flags.panelOpened) {\n      LiveComposer.Builder.UI.shakePanelConfirmButton();\n      return false;\n    }\n\n    return true;\n  };\n  /**\n   * Action - Automatically Add a Row if Empty\n   */\n\n\n  if (!jQuery('#dslc-main .dslc-modules-section', LiveComposer.Builder.PreviewAreaDocument).length && !jQuery('#dslca-tut-page', LiveComposer.Builder.PreviewAreaDocument).length) {\n    addSection(init_sortables());\n  } else {\n    init_sortables();\n  }\n  /**\n   * Hook - Copy Module Area\n   */\n\n\n  LiveComposer.Builder.PreviewAreaDocument.on('click', '.dslca-copy-modules-area-hook', function (e) {\n    e.preventDefault(); // Check if action can be fired\n\n    if (!actionAvail()) return false;\n\n    if (!jQuery(this).hasClass('dslca-action-disabled')) {\n      var modulesArea = jQuery(this).closest('.dslc-modules-area');\n      dslc_copy_modules_area(modulesArea);\n    }\n  });\n  /**\n   * Hook - Delete Module Area\n   */\n\n  LiveComposer.Builder.PreviewAreaDocument.on('click', '.dslca-delete-modules-area-hook', function (e) {\n    e.preventDefault(); // Check if action can be fired\n\n    if (!actionAvail()) return false;\n\n    if (!jQuery(this).hasClass('dslca-action-disabled')) {\n      // Check if current modules area is empty.\n      var modulesAreaEmpty = jQuery(this).closest('.dslc-modules-area').hasClass('dslc-modules-area-empty');\n\n      if (!modulesAreaEmpty) {\n        var self = jQuery(this);\n        CModalWindow({\n          title: DSLCString.str_del_area_title,\n          content: DSLCString.str_del_area_descr,\n          confirm: function confirm() {\n            var modulesArea = self.closest('.dslc-modules-area');\n            dslc_modules_area_delete(modulesArea);\n          }\n        }); // Show confirmation modal only if the module area isn't empty.\n\n        /*dslc_js_confirm( 'delete_modules_area', '<span class=\"dslca-prompt-modal-title\">' + DSLCString.str_del_area_title +\n        \t'</span><span class=\"dslca-prompt-modal-descr\">' + DSLCString.str_del_area_descr + '</span>', jQuery(this) );*/\n      } else {\n        var modulesArea = jQuery(this).closest('.dslc-modules-area'); // Delete module area without asking anything.\n\n        dslc_delete_modules_area(modulesArea);\n      }\n    }\n  });\n  /**\n   * Hook - Set Width of the Module Area\n   */\n\n  LiveComposer.Builder.PreviewAreaDocument.on('click', '.dslca-change-width-modules-area-options span', function () {\n    // Check if action can be fired\n    if (!actionAvail()) return false;\n\n    if (!jQuery(this).hasClass('dslca-action-disabled')) {\n      var moduleAreaJQ = jQuery(this).closest('.dslc-modules-area');\n      var oldSize = moduleAreaJQ.data('size');\n      var newSize = jQuery(this).data('size'); // Start expensive function only if the value changed.\n\n      if (Number(oldSize) !== Number(newSize)) {\n        dslc_modules_area_width_set(moduleAreaJQ, newSize);\n      }\n    }\n  });\n  /**\n   * Action - Show/Hide Width Options Popup for the Module Area\n   */\n\n  /* LiveComposer.Builder.PreviewAreaDocument.on( 'click', '.dslca-change-width-modules-area-hook', function(e){\n  \t\te.preventDefault();\n  \t\t// Check if action can be fired\n  \tif ( ! actionAvail() ) return false;\n  \t\tif ( ! jQuery(this).hasClass('dslca-action-disabled') ) {\n  \t\t\t// Is visible\n  \t\tif ( jQuery('.dslca-change-width-modules-area-options:visible', this).length ) {\n  \t\t\t\t// Hide\n  \t\t\tjQuery('.dslca-change-width-modules-area-options', this).hide();\n  \t\t\t// Is hidden\n  \t\t} else {\n  \t\t\t\t// Show\n  \t\t\tjQuery('.dslca-change-width-modules-area-options', this).show();\n  \t\t}\n  \t}\n  }); */\n\n  /* \n  \tLiveComposer.Builder.PreviewAreaDocument.on( 'mouseleave', '.dslca-change-width-modules-area-options', function(e){\n  \n  \t\t// Hide width seleciton panel.\n  \t\tjQuery(this).hide();\n  \t});\n   */\n\n  /**\n   * Hook - Add Modules Area\n   * TODO: Where we use it? Delete maybe?\n   */\n\n  LiveComposer.Builder.PreviewAreaDocument.on('click', '.dslca-add-modules-area-hook', function (e) {\n    e.preventDefault(); // Check if action can be fired\n\n    if (!actionAvail()) return false;\n    modulesAreaAdd(jQuery(this).closest('.dslc-modules-section').find('.dslc-modules-section-inner'));\n  });\n});\n/**\n * AREAS - Add New\n */\n// ex. dslc_modules_area_add\n\nexport var modulesAreaAdd = function modulesAreaAdd(row) {\n  if (window.dslcDebug) console.log('modulesAreaAdd'); // Add class to body so we know it's in progress\n  // jQuery('body', LiveComposer.Builder.PreviewAreaDocument).addClass('dslca-anim-in-progress');\n\n  var uiIconsUrl = window.DSLCSiteData.editorUrl + 'css/icons';\n  var output = \"<div class=\\\"dslc-modules-area dslc-col dslc-12-col dslc-modules-area-dnd dslc-modules-area-empty dslc-last-col\\\" data-size=\\\"12\\\">\\n\\t\\t<div class=\\\"dslca-modules-area-manage\\\">\\n\\t\\t\\t<span class=\\\"dslca-modules-area-manage-line\\\"></span>\\n\\t\\t\\t<div class=\\\"dslca-modules-area-manage-inner\\\">\\n\\t\\t\\t\\t<span class=\\\"dslca-manage-action dslca-copy-modules-area-hook\\\" title=\\\"Duplicate\\\">\\n\\t\\t\\t\\t\\t<svg class=\\\"feather\\\">\\n\\t\\t\\t\\t\\t\\t<use xlink:href=\\\"\" + uiIconsUrl + \"/feather-sprite.svg#copy\\\"></use>\\n\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t<span class=\\\"dslca-manage-action dslca-move-modules-area-hook\\\" title=\\\"Drag to move\\\">\\n\\t\\t\\t\\t\\t<svg class=\\\"feather\\\">\\n\\t\\t\\t\\t\\t\\t<use xlink:href=\\\"\" + uiIconsUrl + \"/feather-sprite.svg#move\\\"></use>\\n\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t<span class=\\\"dslca-manage-action dslca-change-width-modules-area-hook\\\" title=\\\"Change width\\\">\\n\\t\\t\\t\\t\\t<svg class=\\\"feather\\\">\\n\\t\\t\\t\\t\\t\\t<use xlink:href=\\\"\" + uiIconsUrl + \"/feather-sprite.svg#columns\\\"></use>\\n\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t\\t<div class=\\\"dslca-change-width-modules-area-options\\\"><span>Container Width</span><span data-size=\\\"1\\\">1/12</span><span data-size=\\\"2\\\">2/12</span>\\n\\t\\t\\t\\t\\t\\t<span data-size=\\\"3\\\">3/12</span><span data-size=\\\"4\\\">4/12</span>\\n\\t\\t\\t\\t\\t\\t<span data-size=\\\"5\\\">5/12</span><span data-size=\\\"6\\\">6/12</span>\\n\\t\\t\\t\\t\\t\\t<span data-size=\\\"7\\\">7/12</span><span data-size=\\\"8\\\">8/12</span>\\n\\t\\t\\t\\t\\t\\t<span data-size=\\\"9\\\">9/12</span><span data-size=\\\"10\\\">10/12</span>\\n\\t\\t\\t\\t\\t\\t<span data-size=\\\"11\\\">11/12</span><span data-size=\\\"12\\\">12/12</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t<span class=\\\"dslca-manage-action dslca-delete-modules-area-hook\\\" title=\\\"Delete\\\">\\n\\t\\t\\t\\t\\t<svg class=\\\"feather\\\">\\n\\t\\t\\t\\t\\t\\t<use xlink:href=\\\"\" + uiIconsUrl + \"/feather-sprite.svg#x\\\"></use>\\n\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t\\t<!-- .dslc-module -->\\n\\t</div>\"; // Append new area and animate\n\n  jQuery(output).appendTo(row).css({\n    height: 0\n  }).animate({\n    height: 99\n  }, 300, function () {\n    jQuery(this).css({\n      height: 'auto'\n    });\n  }).addClass('dslca-init-animation'); // Re-initialize all the empty areas on the page\n\n  var emptyModuleAreas = jQuery('.dslc-modules-area-empty', LiveComposer.Builder.PreviewAreaDocument);\n  jQuery(emptyModuleAreas).each(function (i, e) {\n    new ModuleArea(e);\n  }); // Call other functions\n\n  dragAndDropInit();\n  window.dslc_generate_code();\n  window.dslc_show_publish_button(); // Remove class from body so we know it's done\n  // jQuery('body', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-anim-in-progress');\n};\n/**\n * AREAS - Delete\n */\n\nfunction dslc_modules_area_delete(area) {\n  if (window.dslcDebug) console.log('dslc_delete_modules_area'); // Vars\n\n  var modulesSection = area.closest('.dslc-modules-section').find('.dslc-modules-section-inner'),\n      dslcDeleteSectionToo = false; // Add a class to the area so we know it's being deleted\n\n  area.addClass('dslca-modules-area-being-deleted'); // If it's the last area in the row delete section as well\n\n  if (modulesSection.find('.dslc-modules-area').length < 2) {\n    dslcDeleteSectionToo = true;\n  } // If a module in the area is being edited\n\n\n  if (area.find('.dslca-module-being-edited').length) {\n    // Hide the filter hooks\n    jQuery('.dslca-header .dslca-options-filter-hook', LiveComposer.Builder.PreviewAreaDocument).hide(); // Hide the save/cancel actions\n\n    jQuery('.dslca-module-edit-actions', LiveComposer.Builder.PreviewAreaDocument).hide(); // Show the section hooks\n\n    jQuery('.dslca-header .dslca-go-to-section-hook', LiveComposer.Builder.PreviewAreaDocument).show(); // Show the modules listing\n\n    showSection('.dslca-modules');\n  } // Set a timeout so we handle deletion after animation ends\n\n\n  setTimeout(function () {\n    // Delete section if no more module areas inside.\n    if (dslcDeleteSectionToo) {\n      var parentSectionContainer = area.closest('.dslc-modules-section-inner'); // modulesAreaAdd( modulesSection );\n      // Don't delete latest module area in the latest section on the page\n\n      if (2 <= area.closest('#dslc-main').find('.dslc-modules-section').length) {\n        dslc_row_delete(area.closest('.dslc-modules-section'));\n      } else {\n        // Remove the area\n        area.remove(); // Create new empty area in current module section\n\n        modulesAreaAdd(modulesSection);\n      }\n    } // Remove the area\n\n\n    area.remove(); // Call other functions\n\n    window.dslc_generate_code();\n    window.dslc_show_publish_button();\n  }, 900); // Animation\n\n  area.css({\n    '-webkit-animation-name': 'dslcBounceOut',\n    '-moz-animation-name': 'dslcBounceOut',\n    'animation-name': 'dslcBounceOut',\n    'animation-duration': '0.6s',\n    '-webkit-animation-duration': '0.6s',\n    'overflow': 'hidden'\n  }).animate({\n    opacity: 0\n  }, 600).animate({\n    height: 0,\n    marginBottom: 0\n  }, 300, function () {\n    area.remove();\n    window.dslc_generate_code();\n    window.dslc_show_publish_button();\n  });\n}\n/**\n * AREAS - Copy\n */\n\n\nfunction dslc_modules_area_copy(area) {\n  if (window.dslcDebug) console.log('dslc_copy_modules_area'); // Vars\n\n  var dslc_moduleID,\n      modulesSection = area.closest('.dslc-modules-section').find('.dslc-modules-section-inner'); // Copy the area and append to the row\n\n  var dslc_modulesAreaCloned = area.clone().appendTo(modulesSection);\n  new ModuleArea(dslc_modulesAreaCloned[0]); // Trigger mouseleave ( so the actions that show on hover go away )\n\n  dslc_modulesAreaCloned.find('.dslca-modules-area-manage').trigger('mouseleave'); // Apply correct data size and get rid of animations\n\n  dslc_modulesAreaCloned.data('size', area.data('size')).find('.dslc-module-front').css({\n    '-webkit-animation-name': 'none',\n    '-moz-animation-name': 'none',\n    'animation-name': 'none',\n    'animation-duration': '0',\n    '-webkit-animation-duration': '0',\n    opacity: 0 // Go through each module in the area\n\n  }).each(function () {\n    var dslc_module = jQuery(this); //Generate new ID for the new module and change it in HTML/CSS of the module.\n\n    getNewModuleId(dslc_module[0]); // Remove \"dslca-module-being-edited\" class form any element\n\n    jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited'); // Need to call this function to update last column class for the modules.\n\n    window.dslc_generate_code(); // Show back new created module\n\n    dslc_module.animate({\n      opacity: 1\n    }, 300);\n  }); // Call other functions\n\n  dragAndDropInit();\n  window.dslc_show_publish_button(); // Need to call this function to update last column class for the module areas.\n\n  window.dslc_generate_code();\n}\n/**\n * AREAS - Set Width\n */\n\n\nfunction dslc_modules_area_width_set(area, newWidth) {\n  if (window.dslcDebug) console.log('dslc_modules_area_width_set'); // Generate new class based on width\n\n  var newClass = 'dslc-' + newWidth + '-col'; // Remove width classes, add new width class and set the data-size attr\n\n  area.removeClass('dslc-1-col dslc-2-col dslc-3-col dslc-4-col dslc-5-col dslc-6-col dslc-7-col dslc-8-col dslc-9-col dslc-10-col dslc-11-col dslc-12-col').addClass(newClass).data('size', newWidth); // Call other functions\n\n  LiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\n\n  if (LiveComposer.Builder.Flags.panelOpened) {\n    return false;\n  }\n\n  window.dslc_generate_code();\n  window.dslc_show_publish_button();\n}\n/**\n * Check Module Areas initialization\n *\n * @return void\n */\n\n\nexport var moduleareasInitJS = function moduleareasInitJS() {\n  // Select all the module areas form the main section of the page\n  jQuery('#dslc-main .dslc-modules-area', LiveComposer.Builder.PreviewAreaDocument).each(function () {\n    // Check if all the module areas have data attribute 'jsinit' set to 'initialized'?\n    if (jQuery(this).data('jsinit') !== 'initialized') {\n      // Initialize all the module areas without 'jsinit' attribute!\n      new ModuleArea(this);\n    }\n  });\n};\n/**\n * Deprecated Functions and Fallbacks\n */\n\nfunction dslc_delete_modules_area(area) {\n  dslc_modules_area_delete(area);\n}\n\nfunction dslc_copy_modules_area(area) {\n  dslc_modules_area_copy(area);\n}","/*********************************\n*\n* = MODULE PRESETS =\n*\n* - dslc_update_preset ( Update Styling Preset )\n*\n***********************************/\n'use strict';\n/**\n * Module Presets - Update\n */\n\nexport var updatePreset = function updatePreset() {\n  if (window.dslcDebug) console.log('updatePreset'); // Vars\n\n  var module = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument),\n      presetName = module.find('.dslca-module-option-front[data-id=\"css_load_preset\"]').val(),\n      presetCode = module.find('.dslca-module-code').val(),\n      moduleID = module.data('module'); // If preset value not \"none\"\n\n  if ('none' !== presetName && '' !== presetName) {\n    // AJAX Call to Save Preset\n    jQuery.post(DSLCAjax.ajaxurl, {\n      action: 'dslc-ajax-save-preset',\n      dslc_preset_name: presetName,\n      dslc_preset_code: presetCode,\n      dslc_module_id: moduleID\n    }, function (response) {\n      if (response.preset_setting == 'enabled') {\n        // Reload all modules with the same preset\n        jQuery('.dslc-module-front:not(#' + module.attr('id') + ')[data-module=\"' + module.data('module') + '\"][data-dslc-preset=\"' + module.data('dslc-preset') + '\"]', LiveComposer.Builder.PreviewAreaDocument).each(function () {\n          dslc_module_output_reload(jQuery(this));\n        });\n      }\n    });\n  }\n};\n/**\n * Module Presets - Document Ready\n */\n\njQuery(document).ready(function ($) {\n  /**\n   * Action - Save preset\n   */\n  jQuery(document).on('keypress', '.dslca-module-edit-field[name=\"css_save_preset\"]', function (e) {\n    // Enter Key Pressed\n    if (e.which == 13) {\n      // Vars\n      var presetName = jQuery(this).val(),\n          presetID = presetName.toLowerCase().replace(/\\s/g, '-'); // Add class to body that a new preset is added\n\n      jQuery('body').addClass('dslca-new-preset-added'); // Append the new preset to the \"Load Preset\" option and trigger change\n\n      jQuery('.dslca-module-edit-field[name=\"css_load_preset\"]').append('<option value=\"' + presetID + '\">' + presetID + '</option>').val(presetID).trigger('change'); // Erase value from the \"Save Preset\" option\n\n      jQuery(this).val('');\n      jQuery('.dslc-delete-preset').removeClass('dslc-delete-preset-hide');\n    }\n  });\n  /**\n   * Action - Preset value changed\n   */\n\n  jQuery(document).on('change', '.dslca-module-edit-field[name=\"css_load_preset\"]', function (e) {\n    jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).addClass('dslca-preload-preset');\n  });\n  /**\n   * Action - Delete Preset\n   */\n\n  jQuery(document).on('click', '.dslc-delete-preset', function (e) {\n    // Vars\n    var module = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument),\n        presetName = module.find('.dslca-module-option-front[data-id=\"css_load_preset\"]').val(),\n        moduleID = module.data('module'); // If preset value not \"none\"\n\n    if ('none' !== presetName && '' !== presetName) {\n      // AJAX Call to Save Preset\n      jQuery.post(DSLCAjax.ajaxurl, {\n        action: 'dslc-ajax-delete-preset',\n        dslc_preset_name: presetName,\n        dslc_module_id: moduleID\n      }, function (response) {\n        dslc_module_options_show(moduleID);\n      });\n    }\n  });\n});\nexport var presetsInit = function presetsInit() {};","/*********************************\n *\n * = UI - SCROLLER =\n *\n ***********************************/\n\n/**\n * SCROLLER - Document Ready\n */\njQuery(document).ready(function ($) {\n  var scrollerPlugin = function scrollerPlugin(container) {\n    /**\n     * Scroll list of modules with a mouse wheel.\n     */\n    var deltaKoef = .75;\n    var increment = 500;\n    var scrollinc = 100;\n    var scroller = jQuery('.dslca-section-scroller', container);\n    var scrollInner = jQuery('.dslca-section-scroller-inner', container)[0];\n    scroller.on('wheel', function (event) {\n      scroll_to(event.originalEvent.deltaY || event.originalEvent.deltaX);\n      return false;\n    });\n    /**\n     * Scroll to delta\n     *\n     * @param  {int} delta\n     */\n\n    function scroll_to(delta) {\n      if (delta < 0) {\n        delta = -scrollinc;\n      } else {\n        delta = scrollinc;\n      }\n\n      delta = delta * deltaKoef;\n      var listWidth = scroller.find('.dslca-section-scroller-content').width();\n      var contentWidth = scroller.width();\n      if (listWidth <= contentWidth) return false;\n      var scrollMax = listWidth - contentWidth + 10;\n      delta = parseInt(scrollInner.style.left || 0) - delta;\n      delta = delta >= 0 ? 0 : delta;\n      delta = delta <= -scrollMax ? -scrollMax : delta;\n      scrollInner.style.left = delta + 'px';\n    }\n    /**\n     * Hook - Scroller Prev\n     */\n\n\n    jQuery('.dslca-section-scroller-prev', container).click(function (e) {\n      e.preventDefault();\n      scroll_to(-increment);\n    });\n    /**\n     * Hook - Scroller Next\n     */\n\n    jQuery('.dslca-section-scroller-next', container).click(function (e) {\n      e.preventDefault();\n      scroll_to(increment);\n    });\n    jQuery(window).load(function () {\n      // Initiate scroller on window resize\n      jQuery(window).resize(function () {\n        scroll_to(0);\n      });\n    });\n  };\n\n  scrollerPlugin(jQuery('.dslca-section.dslca-modules'));\n  scrollerPlugin(jQuery('.dslca-section.dslca-templates-load'));\n});\n/** Scroll preview area when mouse are on some distant of edge */\n\nexport var initPreviewAreaScroller = function initPreviewAreaScroller() {\n  var pxInTik = 5;\n  var timerTik = 6;\n  LiveComposer.Builder.Flags.windowScroller = false;\n  /** Stop scroll if within areas */\n\n  jQuery(LiveComposer.Builder.PreviewAreaDocument).on('dragleave', '.lc-scroll-top-area, .lc-scroll-bottom-area', function (e) {\n    LiveComposer.Builder.UI.stopScroller();\n  });\n  /** Scroll bottom */\n\n  jQuery(LiveComposer.Builder.PreviewAreaDocument).on('dragenter dragover', '.lc-scroll-bottom-area', function (e) {\n    if (LiveComposer.Builder.Flags.windowScroller !== false) return false;\n    LiveComposer.Utils.publish('LC.sortableOff', {});\n    LiveComposer.Builder.Flags.windowScroller = setInterval(function () {\n      LiveComposer.Builder.PreviewAreaWindow.scrollBy(0, pxInTik);\n    }, timerTik);\n  });\n  /** Scroll top */\n\n  jQuery(LiveComposer.Builder.PreviewAreaDocument).on('dragenter', '.lc-scroll-top-area', function (e) {\n    if (LiveComposer.Builder.Flags.windowScroller !== false) return false;\n    LiveComposer.Utils.publish('LC.sortableOff', {});\n    LiveComposer.Builder.Flags.windowScroller = setInterval(function () {\n      LiveComposer.Builder.PreviewAreaWindow.scrollBy(0, -pxInTik);\n    }, timerTik);\n  });\n  /** Stop scroll if click or drag ended */\n\n  jQuery(LiveComposer.Builder.PreviewAreaDocument).on('dragend mouseup', 'body', function (e) {\n    LiveComposer.Builder.Flags.windowScroller && LiveComposer.Builder.UI.stopScroller();\n  });\n};\n/** Window Y-scroller */\n\njQuery(document).ready(function ($) {\n  initPreviewAreaScroller();\n  /**\n   * Stops scroller function\n   */\n\n  LiveComposer.Builder.UI.stopScroller = function () {\n    LiveComposer.Utils.publish('LC.sortableOn', {});\n    clearInterval(LiveComposer.Builder.Flags.windowScroller);\n    LiveComposer.Builder.Flags.windowScroller = false;\n  };\n\n  jQuery(\"#scroller-stopper\").on('dragover', function () {\n    LiveComposer.Builder.UI.stopScroller();\n  });\n});","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Builder section class\n */\nimport { modulesAreaAdd } from \"./modulearea.js\";\nexport var Section =\n/*#__PURE__*/\nfunction () {\n  function Section(elem) {\n    _classCallCheck(this, Section);\n\n    this.sortable;\n    this.sortableContainer = jQuery(elem).find('.dslc-modules-section-wrapper .dslc-modules-section-inner').eq(0)[0];\n    this.initSortable(elem);\n    this.initDropable(elem);\n    this.reactToSortableOnOff(); // Mark section as initialized\n\n    jQuery(elem).attr('data-jsinit', 'initialized');\n  }\n\n  _createClass(Section, [{\n    key: \"initDropable\",\n    value: function initDropable(elem) {\n      jQuery(elem).droppable({\n        drop: function drop(event, ui) {\n          var modulesSection = jQuery(this).find('.dslc-modules-section-inner');\n          var moduleID = ui.draggable.data('id');\n\n          if (moduleID == 'DSLC_M_A') {\n            modulesAreaAdd(modulesSection);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"initSortable\",\n    value: function initSortable(elem) {\n      this.sortable = jQuery(this.sortableContainer).sortable({\n        connectWith: '.dslc-modules-section-inner',\n        items: \".dslc-modules-area-dnd\",\n        handle: '.dslca-move-modules-area-hook:not(\".dslca-action-disabled\")',\n        placeholder: 'dslca-modules-area-placeholder',\n        cursorAt: {\n          top: 0,\n          left: 0\n        },\n        tolerance: 'intersect',\n        scroll: true,\n        scrollSensitivity: 100,\n        scrollSpeed: 15,\n        sort: function sort() {\n          jQuery(this).removeClass(\"ui-state-default\");\n        },\n        over: function over(e, ui) {\n          var dslcSection = ui.placeholder.closest('.dslc-modules-section');\n          jQuery(dslcSection).removeClass('dslc-modules-section-empty').addClass('dslc-modules-section-not-empty');\n          dslcSection.siblings('.dslc-modules-section').each(function () {\n            if (jQuery('.dslc-modules-area:not(.ui-sortable-helper)', jQuery(this)).length) {\n              jQuery(this).removeClass('dslc-modules-section-empty').addClass('dslc-modules-section-not-empty');\n            } else {\n              jQuery(this).removeClass('dslc-modules-section-not-empty').addClass('dslc-modules-section-empty');\n            }\n          });\n        },\n        remove: function remove() {\n          jQuery(self.elem).find('.dslc-modules-area').length == 0 && modulesAreaAdd(jQuery(sortableContainer));\n        },\n        update: function update(e, ui) {\n          window.dslc_generate_code();\n          window.dslc_show_publish_button();\n        },\n        start: function start(e, ui) {\n          // Placeholder\n          ui.placeholder.html('<span class=\"dslca-placeholder-help-text\"><span class=\"dslca-placeholder-help-text-inner\">' + DSLCString.str_area_helper_text + '</span></span>');\n\n          if (!jQuery(ui.item).hasClass('dslc-12-col')) {\n            ui.placeholder.width(ui.item.width() - 10);\n          } else {\n            ui.placeholder.width(ui.item.width()).css({\n              margin: 0\n            });\n          } // Add drag in progress class\n\n\n          jQuery('body').removeClass('dslca-drag-not-in-progress').addClass('dslca-drag-in-progress dslca-modules-area-drag-in-progress'); // Refresh positions\n\n          jQuery('.dslc-modules-section-inner').sortable(\"refreshPositions\");\n        },\n        stop: function stop(e, ui) {\n          LiveComposer.Builder.UI.stopScroller();\n          jQuery('body').removeClass('dslca-drag-in-progress dslca-modules-area-drag-in-progress').addClass('dslca-drag-not-in-progress');\n          jQuery('.dslca-anim-opacity-drop').removeClass('dslca-anim-opacity-drop');\n        },\n        change: function change(e, ui) {}\n      });\n    }\n  }, {\n    key: \"reactToSortableOnOff\",\n    value: function reactToSortableOnOff() {\n      self = this.sortable;\n      /** Sort option setter */\n\n      jQuery(document).on('LC.sortableOff', function () {\n        if (undefined !== self.sortable(\"instance\")) {\n          self.sortable('option', 'disabled', true);\n        }\n      });\n      jQuery(document).on('LC.sortableOn', function () {\n        if (undefined !== self.sortable(\"instance\")) {\n          self.sortable('option', 'disabled', false);\n        }\n      });\n    }\n  }]);\n\n  return Section;\n}();","/*********************************\n *\n * = ROWS =\n *\n * - dslc_row_add ( Add New )\n * - dslc_row_delete ( Delete )\n * - dslc_row_edit ( Edit )\n * - dslc_row_edit_slider_init ( Edit - Initiate Slider )\n * - dslc_row_edit_cancel ( Edit - Cancel Changes )\n * - dslc_row_edit_confirm ( Edit - Confirm Changes )\n * - dslc_row_copy ( Copy )\n * - dslc_row_import ( Import )\n *\n ***********************************/\nimport { Section } from './section.class.js';\nimport { dragAndDropInit } from './dragndrop.js';\nimport { moduleareasInitJS } from './modulearea.js';\nimport { ModuleArea } from './modulearea.class.js';\nimport { CModalWindow } from './modalwindow.class.js';\nimport { hidePublishButton, showSection } from './uigeneral.js';\nimport { getNewModuleId } from \"./module.js\";\nimport { generateSectionCode } from \"./codegeneration.js\";\nimport { confirmClose } from \"./modalwindow.js\";\n\nvar sectionsEventsInit = function sectionsEventsInit() {\n  var $ = jQuery;\n\n  var actionAvail = function actionAvail() {\n    if (LiveComposer.Builder.Flags.panelOpened) {\n      LiveComposer.Builder.UI.shakePanelConfirmButton();\n      return false;\n    }\n\n    return true;\n  };\n\n  jQuery(\".dslc-modules-section\", LiveComposer.Builder.PreviewAreaDocument).each(function () {\n    new Section(this);\n  });\n  /**\n   * Hook - Delete Row\n   */\n\n  LiveComposer.Builder.PreviewAreaDocument.on('click', '.dslca-delete-modules-section-hook', function (e) {\n    // Check if action can be fired\n    if (!actionAvail()) return false;\n    e.preventDefault();\n    var self = this;\n\n    if (!jQuery(this).hasClass('dslca-action-disabled')) {\n      CModalWindow({\n        title: DSLCString.str_del_row_title,\n        content: DSLCString.str_del_row_descr,\n        confirm: function confirm() {\n          dslc_row_delete(jQuery(self).closest('.dslc-modules-section'));\n        }\n      });\n      /*\tdslc_js_confirm( 'delete_modules_section', '<span class=\"dslca-prompt-modal-title\">' + DSLCString.str_del_row_title +\n      \t\t'</span><span class=\"dslca-prompt-modal-descr\">' + DSLCString.str_del_row_descr + '</span>', jQuery(this) );*/\n    }\n  });\n  /**\n   * Hook - Import Row\n   */\n\n  LiveComposer.Builder.PreviewAreaDocument.on('click', '.dslca-import-modules-section-hook', function (e) {\n    e.preventDefault(); // Check if action can be fired\n\n    if (!actionAvail()) return false;\n\n    if (!jQuery(this).hasClass('dslca-action-disabled')) {\n      CModalWindow({\n        title: DSLCString.str_import_row_title,\n        content: DSLCString.str_import_row_descr + '<br><br><textarea></textarea>',\n        confirm: function confirm() {\n          dslc_row_import(jQuery('.dslca-prompt-modal textarea').val());\n          jQuery('.dslca-prompt-modal-confirm-hook span').css({\n            opacity: 0\n          });\n          jQuery('.dslca-prompt-modal-confirm-hook .dslca-loading').show();\n        },\n        confirm_title: DSLCString.str_import\n      });\n      /*jQuery('.dslca-prompt-modal-confirm-hook').html('<span class=\"dslc-icon dslc-icon-ok\"></span><span>' + DSLCString.str_import +\n      \t'</span><div class=\"dslca-loading followingBallsGWrap\"><div class=\"followingBallsG_1 followingBallsG\"></div>'+\n      \t'<div class=\"followingBallsG_2 followingBallsG\"></div><div class=\"followingBallsG_3 followingBallsG\"></div><div class=\"followingBallsG_4 followingBallsG\"></div></div>');\n      \tdslc_js_confirm( 'import_modules_section', '<span class=\"dslca-prompt-modal-title\">' + DSLCString.str_import_row_title +\n      \t'</span><span class=\"dslca-prompt-modal-descr\">' + DSLCString.str_import_row_descr + ' <br><br><textarea></textarea></span>', jQuery(this) );*/\n    }\n  });\n  /**\n   * Hook - Export Row\n   */\n\n  LiveComposer.Builder.PreviewAreaDocument.on('click', '.dslca-export-modules-section-hook', function (e) {\n    e.preventDefault(); // Check if action can be fired\n\n    if (!actionAvail()) return false;\n\n    if (!jQuery(this).hasClass('dslca-action-disabled')) {\n      jQuery('.dslca-prompt-modal-cancel-hook').hide();\n      jQuery('.dslca-prompt-modal-confirm-hook').html('<span class=\"dslc-icon dslc-icon-ok\"></span>' + DSLCString.str_ok);\n      CModalWindow({\n        title: DSLCString.str_export_row_title,\n        content: DSLCString.str_export_row_descr + '<br><br><textarea>' + '[' + generateSectionCode(jQuery(this).closest('.dslc-modules-section')) + ']' + '</textarea></span>'\n      }); // dslc_js_confirm( 'export_modules_section', '<span class=\"dslca-prompt-modal-title\">' + DSLCString.str_export_row_title +\n      // \t'</span><span class=\"dslca-prompt-modal-descr\">' + DSLCString.str_export_row_descr + ' <br><br><textarea></textarea></span>', jQuery(this) );\n      // jQuery('.dslca-prompt-modal textarea').val( dslc_generate_section_code( jQuery(this).closest('.dslc-modules-section') ) );\n    }\n  });\n  /**\n   * Hook - Copy Row\n   */\n\n  LiveComposer.Builder.PreviewAreaDocument.on('click', '.dslca-copy-modules-section-hook', function () {\n    // Check if action can be fired\n    if (!actionAvail()) return false;\n\n    if (!jQuery(this).hasClass('dslca-action-disabled')) {\n      dslc_row_copy(jQuery(this).closest('.dslc-modules-section'));\n    }\n  });\n  /**\n   * Hook - Add Row\n   */\n\n  LiveComposer.Builder.PreviewAreaDocument.on('click', '.dslca-add-modules-section-hook', function (e) {\n    e.preventDefault(); // Check if action can be fired\n\n    if (!actionAvail()) return false;\n    var button = jQuery(this);\n\n    if (!jQuery(this).hasClass('dslca-action-disabled')) {\n      // Add a loading animation\n      button.find('.dslca-icon').removeClass('dslc-icon-align-justify').addClass('dslc-icon-spinner dslc-icon-spin'); // Add a row\n\n      addSection(function () {\n        button.find('.dslca-icon').removeClass('dslc-icon-spinner dslc-icon-spin').addClass('dslc-icon-align-justify');\n      });\n    }\n  });\n  /**\n   * Hook - Edit Row\n   */\n\n  LiveComposer.Builder.PreviewAreaDocument.on('click', '.dslca-edit-modules-section-hook', function () {\n    // Check if action can be fired\n    if (!actionAvail()) return false;\n    var self = this;\n    var module_edited = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).length;\n    var row_edited = jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).length; /// If settings panel opened - finish func\n\n    if (LiveComposer.Builder.Flags.uiHidden || module_edited > 0 || row_edited > 0) return false; // If not disabled ( disabling used for tutorial )\n\n    if (!jQuery(this).hasClass('dslca-action-disabled')) {\n      // Trigger the function to edit\n      dslc_row_edit(jQuery(this).closest('.dslc-modules-section'));\n    }\n\n    jQuery('body', LiveComposer.Builder.PreviewAreaDocument).addClass('section-editing-in-progress');\n  });\n};\n/**\n * Row - Add New\n */\n\n\nexport var addSection = function addSection(callback) {\n  if (window.dslcDebug) console.log('dslc_row_add');\n  callback = typeof callback !== 'undefined' ? callback : false;\n  var defer = jQuery.Deferred();\n  var browserCacheTmp = sessionStorage;\n  var newRow = jQuery();\n  var cachedAjaxRequest = browserCacheTmp.getItem('cache-dslc-ajax-add-modules-section-v2'); // If option 'lc_section_padding_vertical' was update.\n\n  if (null !== cachedAjaxRequest) {\n    var current_value, cache_curent_value;\n    current_value = DSLCMainOptions.section_padding_vertical;\n    cache_curent_value = jQuery(cachedAjaxRequest).find('input[data-id=\"padding\"]').val();\n\n    if (current_value !== cache_curent_value) {\n      browserCacheTmp.removeItem('cache-dslc-ajax-add-modules-section-v2');\n      cachedAjaxRequest = null;\n    }\n  } // If no cache for current Ajax request.\n\n\n  if (null === cachedAjaxRequest) {\n    // AJAX Request\n    jQuery.post(DSLCAjax.ajaxurl, {\n      action: 'dslc-ajax-add-modules-section',\n      dslc: 'active'\n    }, function (response) {\n      // newRow = jQuery(response.output);\n      browserCacheTmp.setItem('cache-dslc-ajax-add-modules-section-v2', response.output);\n      newRow = dslc_row_after_add(response.output);\n\n      if (callback) {\n        callback();\n      }\n\n      return defer;\n    });\n  } else {\n    // There is cached version of AJAX request.\n    // newRow = jQuery(cachedAjaxRequest);\n    newRow = dslc_row_after_add(cachedAjaxRequest);\n\n    if (callback) {\n      callback();\n    }\n\n    return defer;\n  }\n};\n/**\n * Finish new row creation process.\n *\n * @param  {String} newRowHTML HTML code of the new row.\n * @return {jQuery}            New ROW jQuery object.\n */\n\nfunction dslc_row_after_add(newRowHTML) {\n  var newRow = jQuery(newRowHTML); // Append new row\n\n  newRow.appendTo(LiveComposer.Builder.PreviewAreaDocument.find(\"#dslc-main\")); // Call other functions\n\n  dragAndDropInit();\n  window.dslc_generate_code();\n  window.dslc_show_publish_button();\n  new Section(newRow);\n  new ModuleArea(newRow.find('.dslc-modules-area').eq(0)[0]);\n  newRow.find('.dslc-modules-area').addClass('dslc-modules-area-empty dslc-last-col');\n  return newRow;\n}\n/**\n * Row - Delete\n */\n\n\nfunction dslc_row_delete(row) {\n  if (window.dslcDebug) console.log('dslc_row_delete'); // If the row is being edited\n\n  if (row.find('.dslca-module-being-edited')) {\n    // Hide the filter hooks\n    jQuery('.dslca-header .dslca-options-filter-hook').hide(); // Hide the save/cancel actions\n\n    jQuery('.dslca-module-edit-actions').hide(); // Show the section hooks\n\n    jQuery('.dslca-header .dslca-go-to-section-hook').show();\n    showSection('.dslca-modules');\n  } // Remove row\n\n\n  row.trigger('mouseleave').remove(); // Call other functions\n\n  window.dslc_generate_code();\n  window.dslc_show_publish_button();\n}\n/**\n * Row - Edit\n */\n\n\nfunction dslc_row_edit(row) {\n  if (window.dslcDebug) console.log('dslc_row_edit'); // Vars we will use\n\n  var dslcModulesSectionOpts, dslcVal; // Set editing class\n\n  jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited');\n  jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-modules-section-being-edited').removeClass('dslca-modules-section-change-made');\n  row.addClass('dslca-modules-section-being-edited'); // Hide the section hooks\n\n  jQuery('.dslca-header .dslca-go-to-section-hook').hide(); // Show the styling/responsive tabs\n\n  jQuery('.dslca-row-options-filter-hook[data-section=\"styling\"], .dslca-row-options-filter-hook[data-section=\"responsive\"]').show();\n  jQuery('.dslca-row-options-filter-hook[data-section=\"styling\"]').trigger('click'); // Hide the filter hooks\n\n  jQuery('.dslca-header .dslca-options-filter-hook').hide(); // Hide the save/cancel actions\n\n  jQuery('.dslca-module-edit-actions').hide(); // Show the save/cancel actions\n\n  jQuery('.dslca-row-edit-actions').show(); // Set current values\n\n  jQuery('.dslca-modules-section-edit-field').each(function () {\n    /**\n     * Temporary migration from 'wrapped' value to 'wrapper' in ROW type selector\n     * TODO: delete this block in a few versions as problem do not exists on new installs\n     *\n     * @since ver 1.1\n     */\n    if ('type' === jQuery(this).data('id')) {\n      if ('' === jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"type\"]', LiveComposer.Builder.PreviewAreaDocument).val() || 'wrapped' === jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"type\"]', LiveComposer.Builder.PreviewAreaDocument).val()) {\n        jQuery('select[data-id=\"type\"]').val('wrapper').change();\n      }\n    }\n\n    if (jQuery(this).data('id') == 'border-top') {\n      if (jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"border\"]', LiveComposer.Builder.PreviewAreaDocument).val().indexOf('top') >= 0) {\n        jQuery(this).prop('checked', true);\n        jQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\n      } else {\n        jQuery(this).prop('checked', false);\n        jQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\n      }\n    } else if (jQuery(this).data('id') == 'border-right') {\n      if (jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"border\"]', LiveComposer.Builder.PreviewAreaDocument).val().indexOf('right') >= 0) {\n        jQuery(this).prop('checked', true);\n        jQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\n      } else {\n        jQuery(this).prop('checked', false);\n        jQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\n      }\n    } else if (jQuery(this).data('id') == 'border-bottom') {\n      if (jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"border\"]', LiveComposer.Builder.PreviewAreaDocument).val().indexOf('bottom') >= 0) {\n        jQuery(this).prop('checked', true);\n        jQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\n      } else {\n        jQuery(this).prop('checked', false);\n        jQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\n      }\n    } else if (jQuery(this).data('id') == 'border-left') {\n      if (jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"border\"]', LiveComposer.Builder.PreviewAreaDocument).val().indexOf('left') >= 0) {\n        jQuery(this).prop('checked', true);\n        jQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\n      } else {\n        jQuery(this).prop('checked', false);\n        jQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\n      }\n    } else if (jQuery(this).hasClass('dslca-modules-section-edit-field-checkbox')) {\n      if (jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"' + jQuery(this).data('id') + '\"]', LiveComposer.Builder.PreviewAreaDocument).val().indexOf(jQuery(this).data('val')) >= 0) {\n        jQuery(this).prop('checked', true);\n        jQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\n      } else {\n        jQuery(this).prop('checked', false);\n        jQuery(this).siblings('.dslca-modules-section-edit-option-checkbox-hook').find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\n      }\n    } else {\n      jQuery(this).val(jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input[data-id=\"' + jQuery(this).data('id') + '\"]', LiveComposer.Builder.PreviewAreaDocument).val().trim().replace('%(%', '[').replace('%)%', ']'));\n\n      if (jQuery(this).hasClass('dslca-modules-section-edit-field-colorpicker')) {\n        var _this = jQuery(this);\n\n        jQuery(this).closest('.dslca-modules-section-edit-option').find('.sp-preview-inner').removeClass('sp-clear-display').css({\n          'background-color': _this.val()\n        });\n        jQuery(this).css({\n          'background-color': _this.val()\n        });\n      }\n    }\n  });\n  jQuery('.dslca-modules-section-edit-field-upload').each(function () {\n    var dslcParent = jQuery(this).closest('.dslca-modules-section-edit-option');\n\n    if (jQuery(this).val() && jQuery(this).val() !== 'disabled') {\n      jQuery('.dslca-modules-section-edit-field-image-add-hook', dslcParent).hide();\n      jQuery('.dslca-modules-section-edit-field-image-remove-hook', dslcParent).show();\n    } else {\n      jQuery('.dslca-modules-section-edit-field-image-remove-hook', dslcParent).hide();\n      jQuery('.dslca-modules-section-edit-field-image-add-hook', dslcParent).show();\n    }\n  }); // Initiate numeric option sliders\n  // dslc_row_edit_slider_init();\n  // Show options management\n\n  showSection('.dslca-modules-section-edit');\n  LiveComposer.Builder.Flags.panelOpened = true; // Hide the publish button\n\n  hidePublishButton();\n}\n/**\n * Row - Edit - Cancel Changes\n */\n\n\nfunction dslc_row_edit_cancel(callback) {\n  if (window.dslcDebug) console.log('dslc_row_cancel_changes');\n  callback = typeof callback !== 'undefined' ? callback : false; // Time to generate code optimized {HACK}\n\n  LiveComposer.Builder.Flags.generate_code_after_row_changed = false; // Recover original data from data-def attribute for each control\n\n  jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input', LiveComposer.Builder.PreviewAreaDocument).each(function () {\n    jQuery(this).val(jQuery(this).data('def')); // Fire change for every ROW control, so it redraw linked CSS properties\n\n    jQuery('.dslca-modules-section-edit-field[data-id=\"' + jQuery(this).data('id') + '\"]').val(jQuery(this).data('def')).trigger('change');\n  });\n  LiveComposer.Builder.Flags.generate_code_after_row_changed = true;\n  window.dslc_generate_code();\n  window.dslc_show_publish_button();\n  showSection('.dslca-modules'); // Hide the save/cancel actions\n\n  jQuery('.dslca-row-edit-actions').hide(); // Hide the styling/responsive tabs\n\n  jQuery('.dslca-row-options-filter-hook').hide(); // Show the section hooks\n\n  jQuery('.dslca-header .dslca-go-to-section-hook').show(); // Show the publish button\n\n  dslc_show_publish_button; // Remove being edited class\n\n  jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-modules-section-being-edited dslca-modules-section-change-made');\n\n  if (callback) {\n    callback();\n  }\n\n  LiveComposer.Builder.Flags.panelOpened = false;\n  jQuery(\"body\", LiveComposer.Builder.PreviewAreaDocument).removeClass('section-editing-in-progress');\n}\n/**\n * Row - Edit - Confirm Changes\n */\n\n\nfunction dslc_row_edit_confirm(callback) {\n  if (window.dslcDebug) console.log('dslc_confirm_row_changes');\n  callback = typeof callback !== 'undefined' ? callback : false;\n  jQuery('.dslca-modules-section-being-edited .dslca-modules-section-settings input', LiveComposer.Builder.PreviewAreaDocument).each(function () {\n    jQuery(this).data('def', jQuery(this).val());\n  });\n  showSection('.dslca-modules'); // Hide the save/cancel actions\n\n  jQuery('.dslca-row-edit-actions').hide(); // Hide the styling/responsive tabs\n\n  jQuery('.dslca-row-options-filter-hook').hide(); // Show the section hooks\n\n  jQuery('.dslca-header .dslca-go-to-section-hook').show(); // Remove being edited class\n\n  jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-modules-section-being-edited dslca-modules-section-change-made');\n  window.dslc_generate_code(); // Show the publish button\n\n  window.dslc_show_publish_button();\n\n  if (callback) {\n    callback();\n  }\n\n  LiveComposer.Builder.Flags.panelOpened = false;\n  jQuery(\"body\", LiveComposer.Builder.PreviewAreaDocument).removeClass('section-editing-in-progress');\n}\n/**\n * Row - Copy\n */\n\n\nfunction dslc_row_copy(row) {\n  if (window.dslcDebug) console.log('dslc_row_copy'); // Vars that will be used\n\n  var dslc_module_id, dslcModulesSectionCloned, dslcModule; // Clone the row\n\n  dslcModulesSectionCloned = row.clone().appendTo(jQuery('#dslc-main', LiveComposer.Builder.PreviewAreaDocument)); // Mark new ROW as NON initialized\n\n  dslcModulesSectionCloned[0].removeAttribute('data-jsinit'); // Go through each area of the new row and apply correct data-size\n  // Mark each module area inside as NON initialized (2)\n\n  dslcModulesSectionCloned.find('.dslc-modules-area').each(function () {\n    var dslcIndex = jQuery(this).index();\n    jQuery(this).data('size', row.find('.dslc-modules-area:eq( ' + dslcIndex + ' )').data('size'));\n    this.removeAttribute('data-jsinit'); // (2)\n  });\n  new Section(dslcModulesSectionCloned);\n  /**\n   * Re-render modules inside of the new ROW\n   */\n  // Remove animations and temporary hide modules inside\n\n  dslcModulesSectionCloned.find('.dslc-module-front').css({\n    '-webkit-animation-name': 'none',\n    '-moz-animation-name': 'none',\n    'animation-name': 'none',\n    'animation-duration': '0',\n    '-webkit-animation-duration': '0',\n    opacity: 0 // Go through each module inside the new ROW\n\n  }).each(function () {\n    // Current module\n    var dslc_module = jQuery(this); //Generate new ID for the new module and change it in HTML/CSS of the module.\n\n    getNewModuleId(dslc_module[0]); // Check init for rows and module areas\n\n    sectionsInitJS();\n    moduleareasInitJS(); // TODO: the next function contains AJAX call. It needs optimization.\n\n    window.dslc_generate_code();\n    /**\n     * Re-init drag and drop from modules list into modules areas.\n     * Need this function, so we can drop new modules on the cloned areas.\n     */\n\n    dragAndDropInit(); // Remove \"dslca-module-being-edited\" class form any element\n\n    jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited'); // Show back new created module\n\n    dslc_module.animate({\n      opacity: 1\n    }, 300);\n    window.dslc_show_publish_button();\n  }); // Generate new ID for the new section.\n\n  dslc_section_new_id(dslcModulesSectionCloned[0]);\n}\n/**\n * Generate new ID for the section provided\n *\n *\n * @param DOM section that needs ID updated (new ID).\n * @return void\n */\n\n\nfunction dslc_section_new_id(section) {\n  if (window.dslcDebug) console.log('dslc_section_new_id');\n  var dslc_section_id = LiveComposer.Utils.get_unique_id(); // Generate new section ID.\n  // Update section ID in data attribute\n\n  section.setAttribute('data-section-id', dslc_section_id); // Update section ID in raw base64 code (dslc_code) of the section\n\n  LiveComposer.Utils.update_section_property_raw(section, 'section_instance_id', dslc_section_id);\n}\n/**\n * Row - Import\n */\n\n\nfunction dslc_row_import(rowCode) {\n  if (window.dslcDebug) console.log('dslc_row_import'); // AJAX Call\n\n  jQuery.post(DSLCAjax.ajaxurl, {\n    action: 'dslc-ajax-import-modules-section',\n    dslc: 'active',\n    dslc_modules_section_code: rowCode\n  }, function (response) {\n    // Close the import popup/modal\n    confirmClose(); // Add the new section\n\n    jQuery('#dslc-main', LiveComposer.Builder.PreviewAreaDocument).append(response.output); // Call other functions\n\n    LiveComposer.Builder.PreviewAreaWindow.dslc_bg_video();\n    LiveComposer.Builder.PreviewAreaWindow.dslc_carousel();\n    LiveComposer.Builder.PreviewAreaWindow.dslc_masonry(); // Check init for rows and module areas\n\n    sectionsInitJS();\n    moduleareasInitJS();\n    dragAndDropInit();\n    window.dslc_generate_code();\n    window.dslc_show_publish_button();\n  });\n}\n/**\n * Deprecated Functions and Fallbacks\n */\n\n\nfunction dslc_add_modules_section() {\n  addSection();\n}\n\nfunction dslc_delete_modules_section(row) {\n  dslc_row_delete(row);\n}\n\nfunction dslc_edit_modules_section(row) {\n  dslc_row_edit(row);\n}\n\nfunction dslc_copy_modules_section(row) {\n  dslc_row_copy(row);\n}\n\nfunction dslc_import_modules_section(rowCode) {\n  dslc_row_import(rowCode);\n}\n/**\n * Check ROWs initialization\n *\n * @return void\n */\n\n\nexport var sectionsInitJS = function sectionsInitJS() {\n  // Select all the ROWs form the main section of the page\n  jQuery('#dslc-main .dslc-modules-section', LiveComposer.Builder.PreviewAreaDocument).each(function () {\n    // Check if all the rows have data attribute 'jsinit' set to 'initialized'?\n    if (jQuery(this).data('jsinit') !== 'initialized') {\n      // Initialize all the rows without 'jsinit' attribute!\n      new Section(this);\n    }\n  });\n};\nexport var sectionsInit = function sectionsInit() {\n  sectionsInitJS();\n  sectionsEventsInit();\n  /**\n   * Hook - Confirm Row Changes\n   */\n\n  jQuery(document).on('click', '.dslca-row-edit-save', function () {\n    dslc_row_edit_confirm();\n    jQuery(\".dslca-currently-editing\").removeAttr('style');\n    jQuery('.dslca-row-options-filter-hook.dslca-active').removeClass('dslca-active');\n    LiveComposer.Builder.PreviewAreaWindow.dslc_responsive_classes(true);\n  });\n  /**\n   * Hook - Cancel Row Changes\n   */\n\n  jQuery(document).on('click', '.dslca-row-edit-cancel', function () {\n    dslc_row_edit_cancel();\n    jQuery(\".dslca-currently-editing\").removeAttr('style');\n    jQuery('.dslca-row-options-filter-hook.dslca-active').removeClass('dslca-active');\n    LiveComposer.Builder.PreviewAreaWindow.dslc_responsive_classes(true);\n  });\n};","/**\n * Sections container class\n */\n'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nexport var CSectionsContainer =\n/*#__PURE__*/\nfunction () {\n  function CSectionsContainer(elem) {\n    _classCallCheck(this, CSectionsContainer);\n\n    this.sortable;\n    this.initSortable(elem);\n    this.reactToSortableOnOff();\n  }\n\n  _createClass(CSectionsContainer, [{\n    key: \"initSortable\",\n    value: function initSortable(elem) {\n      this.sortable = window.jQuery(elem).sortable({\n        items: \".dslc-modules-section-dnd\",\n        handle: '.dslca-move-modules-section-hook:not(\".dslca-action-disabled\")',\n        placeholder: 'dslca-modules-section-placeholder',\n        tolerance: 'intersect',\n        cursorAt: {\n          bottom: 10\n        },\n        axis: 'y',\n        scroll: true,\n        scrollSensitivity: 140,\n        scrollSpeed: 5,\n        sort: function sort() {\n          jQuery(this).removeClass(\"ui-state-default\");\n        },\n        update: function update(e, ui) {\n          window.dslc_show_publish_button();\n        },\n        start: function start(e, ui) {\n          jQuery('body').removeClass('dslca-drag-not-in-progress').addClass('dslca-drag-in-progress');\n          jQuery('body', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-drag-not-in-progress').addClass('dslca-drag-in-progress');\n          ui.placeholder.html('<span class=\"dslca-placeholder-help-text\"><span class=\"dslca-placeholder-help-text-inner\">' + DSLCString.str_row_helper_text + '</span></span>');\n          jQuery('.dslc-content').sortable(\"refreshPositions\");\n        },\n        stop: function stop(e, ui) {\n          window.dslc_generate_code();\n          LiveComposer.Builder.UI.stopScroller();\n          jQuery('body', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-drag-in-progress').addClass('dslca-drag-not-in-progress');\n          jQuery('body').removeClass('dslca-drag-in-progress').addClass('dslca-drag-not-in-progress');\n          jQuery('.dslca-anim-opacity-drop').removeClass('dslca-anim-opacity-drop');\n        }\n      });\n    }\n  }, {\n    key: \"reactToSortableOnOff\",\n    value: function reactToSortableOnOff() {\n      self = this.sortable;\n      /** Sort option setter */\n\n      jQuery(document).on('LC.sortableOff', function () {\n        if (undefined !== self.sortable(\"instance\")) {\n          self.sortable('option', 'disabled', true);\n        }\n      });\n      jQuery(document).on('LC.sortableOn', function () {\n        if (undefined !== self.sortable(\"instance\")) {\n          self.sortable('option', 'disabled', false);\n        }\n      });\n    }\n  }]);\n\n  return CSectionsContainer;\n}();","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Builder settings panel functions providing work with modules\n */\nimport { showSection } from './uigeneral.js';\nimport { moduleOutputAltered } from './module.js';\nimport { updatePreset } from \"./presets.js\";\nimport { hideModal } from \"./modalwindow.js\";\nvar dslcRegularFontsArray = window.DSLCFonts.regular;\nvar dslcGoogleFontsArray = window.DSLCFonts.google;\nvar dslcAllFontsArray = dslcRegularFontsArray.concat(dslcGoogleFontsArray); // Set current/default icons set\n\nvar dslcIconsCurrentSet = window.DSLCIcons.fontawesome;\n/**\n * Modules - Document Ready\n */\n\njQuery(document).ready(function ($) {\n  dslc_module_options_tooltip();\n  dslc_module_options_font();\n  dslc_module_options_icon();\n  dslc_module_options_icon_returnid();\n  dslc_module_options_text_align();\n  dslc_module_options_checkbox();\n  dslc_module_options_box_shadow();\n  dslc_module_options_text_shadow();\n  /* Initiate all the color picker controls on the module/section options panel. */\n\n  var dslca_options_with_colorpicker = '';\n  dslca_options_with_colorpicker += '.dslca-module-edit-field-colorpicker';\n  dslca_options_with_colorpicker += ', .dslca-modules-section-edit-field-colorpicker';\n  dslca_options_with_colorpicker += ', .dslca-module-edit-option-box-shadow-color';\n  dslca_options_with_colorpicker += ', .dslca-module-edit-option-text-shadow-color'; // Init color picker on click only to not polute DOM with unwanted elements.\n  // It will fire only once (first time) as color picker then put it's own listeners.\n\n  jQuery(document).on('click', dslca_options_with_colorpicker, function () {\n    // Call the color picker init function.\n    dslc_module_options_color(this); // Make sure the color picker popup appears in the right place.\n\n    var wrapper = jQuery(this).closest('.dslca-color-option');\n    var optionsPanel = jQuery('.dslca-module-edit-options-inner');\n    var colorpicker = wrapper.find('.wp-picker-holder');\n    var offset = wrapper.offset();\n    var offsetPopup = offset.left + 15;\n    var windoWidth = window.innerWidth;\n    var popupWidth = 260;\n\n    if (windoWidth < offsetPopup + popupWidth) {\n      offsetPopup = windoWidth - popupWidth;\n    } // Set the right position for the color picker popup on first click.\n\n\n    colorpicker.css('left', offsetPopup + 'px'); // Update position left for the color picker on options scroll.\n\n    jQuery(optionsPanel).on('scroll', function (event) {\n      offset = wrapper.offset();\n      var offsetPopup = offset.left + 15;\n      var windoWidth = window.innerWidth;\n      var popupWidth = 260;\n\n      if (windoWidth < offsetPopup + popupWidth) {\n        offsetPopup = windoWidth - popupWidth;\n      }\n\n      colorpicker.css('left', offsetPopup + 'px');\n    });\n  });\n  /* Initiate all the slider controls on the module options panel. */\n\n  jQuery('.dslca-container').on('mouseenter', '.dslca-module-edit-option-slider', function () {\n    // Fixed: https://github.com/live-composer/live-composer-page-builder/issues/740\n    if (!jQuery(this).hasClass('dslca-module-edit-option-select')) {\n      dslc_module_options_numeric(this);\n    }\n  });\n  /* Initiate all the slider controls on the row options panel. */\n\n  jQuery('.dslca-container').on('mouseenter', '.dslca-modules-section-edit-option-slider', function () {\n    dslc_module_options_numeric(this);\n  });\n  /**\n   * Hook - Submit\n   */\n\n  jQuery('.dslca-module-edit-form').submit(function (e) {\n    e.preventDefault();\n    moduleOutputAltered();\n  });\n  /**\n   * Hook - Tab Switch\n   */\n\n  jQuery(document).on('click', '.dslca-module-edit-options-tab-hook', function (e) {\n    e.preventDefault();\n    elementOptionsTabs(jQuery(this));\n  });\n  /**\n   * Hook - Option Section Switch\n   */\n\n  jQuery(document).on('click', '.dslca-options-filter-hook', function (e) {\n    e.preventDefault();\n    var dslcPrev = jQuery('.dslca-options-filter-hook.dslca-active').data('section');\n    var currentSection = jQuery(this).data('section');\n    jQuery('.dslca-options-filter-hook.dslca-active').removeClass('dslca-active');\n    jQuery(this).addClass('dslca-active');\n    dslc_module_options_section_filter(currentSection); // If previous was responsive reload module\n\n    if (dslcPrev == 'responsive') {\n      // Show the loader\n      jQuery('.dslca-container-loader').show(); // Reset the responsive classes\n\n      window.LiveComposer.Builder.PreviewAreaWindow.dslc_responsive_classes(); // Reload Module\n\n      moduleOutputAltered(function () {\n        // Hide the loader\n        jQuery('.dslca-container-loader').hide();\n      });\n      /**\n       * Destroy resizable preview functionality\n       * when leaving Responsive view.\n       */\n\n      jQuery('#page-builder-preview-area').resizable('destroy').attr('style', '');\n    }\n    /**\n     * Make the preview area resizable\n     * when entering Responsive view.\n     */\n\n\n    if (currentSection == 'responsive') {\n      jQuery('#page-builder-preview-area').resizable();\n    }\n  });\n  /**\n   * Hook - Confirm Changes\n   */\n\n  jQuery(document).on('click', '.dslca-module-edit-save', function (e) {\n    e.preventDefault();\n    dslc_module_options_confirm_changes(function () {\n      // window.LiveComposer.Builder.UI.initInlineEditors({withRemove:true});\n      window.LiveComposer.Builder.UI.unloadOptionsDeps();\n      window.LiveComposer.Builder.Flags.panelOpened = false;\n      jQuery(\"body\", window.LiveComposer.Builder.PreviewAreaDocument).removeClass('module-editing-in-progress');\n    });\n    jQuery('.dslca-options-filter-hook.dslca-active').removeClass('dslca-active');\n    dslc_disable_responsive_view();\n  });\n  /**\n   * Hook - Cancel Changes\n   */\n\n  jQuery(document).on('click', '.dslca-module-edit-cancel', function (e) {\n    e.preventDefault();\n    dslc_module_options_cancel_changes(function () {\n      // window.LiveComposer.Builder.UI.initInlineEditors({withRemove:true});\n      window.LiveComposer.Builder.UI.unloadOptionsDeps();\n      window.LiveComposer.Builder.Flags.panelOpened = false;\n      jQuery(\"body\", window.LiveComposer.Builder.PreviewAreaDocument).removeClass('module-editing-in-progress');\n    });\n    jQuery('.dslca-options-filter-hook.dslca-active').removeClass('dslca-active');\n    dslc_disable_responsive_view();\n  });\n});\n/* Editor scripts */\n\nexport var settingsPanelInit = function settingsPanelInit() {\n  var self = window.LiveComposer.Builder;\n  window.LiveComposer.Builder.Helpers.colorpickers = [];\n  /*\n  \twindow.LiveComposer.Builder.UI.initInlineEditors = function(params){\n  \t\tparams = params || {};\n  \n  \t\tif ( params.withRemove == true ) {\n  \t\t\ttry {\n  \t\t\t\twindow.LiveComposer.Builder.PreviewAreaWindow.tinyMCE.remove();\n  \t\t\t} catch(err) {\n  \t\t\t\tconsole.info( 'No tinyMCE code found. Error code: 10181116.' );\n  \t\t\t}\n  \t\t}\n  \n  \t\twindow.LiveComposer.Builder.PreviewAreaWindow.tinyMCE.init({\n  \t\t\tselector: '.inline-editor.dslca-editable-content',\n  \t\t\teditor_deselector: 'mce-content-body',\n  \t\t\tmenubar: false,\n  \t\t\tinline: true,\n  \t\t\tplugins: 'wordpress wplink lists paste',\n  \t\t\tpaste_as_text: true, // Paste styled text as plain text only. Requires 'paste' in plugins.\n  \t\t\tpaste_block_drop: true, // Disabled drop action for inline editor to prevent js errors in the console. http://archive.tinymce.com/wiki.php/Plugin3x:paste\n  \t\t\tstyle_formats: [\n  \t\t\t\t\t{title: 'Paragraph', format: 'p'},\n  \t\t\t\t\t{title: 'Header 1', format: 'h1'},\n  \t\t\t\t\t{title: 'Header 2', format: 'h2'},\n  \t\t\t\t\t{title: 'Header 3', format: 'h3'},\n  \t\t\t\t\t{title: 'Header 4', format: 'h4'},\n  \t\t\t\t\t{title: 'Header 5', format: 'h5'},\n  \t\t\t\t\t{title: 'Header 6', format: 'h6'},\n  \t\t\t  ],\n  \t\t\ttoolbar: 'styleselect | bold italic blockquote | removeformat | bullist numlist '\n  \t\t});\n  \t}\n  */\n\n  /* Destroy instanced of sliders, color pickers and other temporary elements */\n\n  window.LiveComposer.Builder.UI.clearUtils = function () {\n    if (window.dslcDebug) console.log('window.LiveComposer.Builder.UI.clearUtils'); // Destroy all Color Pickers\n\n    window.LiveComposer.Builder.UI.clearColorPickers(); // Delete module backups form memory.\n\n    if (undefined !== window.LiveComposer.Builder.moduleBackup) {\n      window.LiveComposer.Builder.moduleBackup.remove();\n    }\n\n    jQuery('.temp-styles-for-module', window.LiveComposer.Builder.PreviewAreaDocument).remove(); // Hide inline editor panel if on [Confirm] or [Cancel] button click.\n\n    jQuery('.mce-tinymce', window.LiveComposer.Builder.PreviewAreaDocument).hide();\n  };\n\n  window.LiveComposer.Builder.UI.clearColorPickers = function () {\n    if (Array.isArray(self.Helpers.colorpickers)) {\n      self.Helpers.colorpickers.forEach(function (item) {\n        // Do not delete color picker instance from row settings panel,\n        // as it stays on page and not get loaded via Ajax.\n        if (!jQuery(item).hasClass('dslca-modules-section-edit-field')) {\n          // Destroy color picker instance.\n          jQuery(item).remove();\n        }\n      });\n      self.Helpers.colorpickers = [];\n    } // Delete the color picker events.\n\n\n    jQuery('body').off('click.wpcolorpicker');\n  };\n  /** Options dependencies */\n\n\n  window.LiveComposer.Builder.Helpers.depsHandlers = [];\n\n  window.LiveComposer.Builder.UI.loadOptionsDeps = function () {\n    var self = this;\n    jQuery(\".dslca-module-edit-option\").each(function () {\n      var elem = this;\n      var parsed = true;\n\n      try {\n        var dep = JSON.parse(LiveComposer.Utils.b64_to_utf8(jQuery(this).data('dep')));\n      } catch (e) {\n        parsed = false;\n      }\n\n      if (parsed) {\n        var handler = function handler() {\n          var optElem = this;\n          var localDep = {};\n\n          if ((optElem.type == 'radio' || optElem.type == 'checkbox') && dep[optElem.value] == undefined) {\n            return false;\n          }\n\n          if (optElem.type == 'checkbox' && dep[optElem.value] != undefined) {\n            localDep[optElem.value] = dep[optElem.value];\n          } else {\n            localDep = dep;\n          }\n\n          Object.keys(localDep).forEach(function (opt_val) {\n            localDep[opt_val].split(',').forEach(function (item) {\n              var opt_wrap = jQuery(\".dslca-module-edit-option-\" + item.trim()).closest('.dslca-module-edit-option');\n              var checkedCheckbox = true;\n\n              if (optElem.type == 'radio' || optElem.type == 'checkbox') {\n                checkedCheckbox = jQuery(optElem).is(\":checked\");\n              }\n\n              var section_tab = jQuery('.dslca-module-edit-options-tab-hook.dslca-active').data('id');\n\n              if (optElem.value == opt_val && checkedCheckbox) {\n                if (opt_wrap.not(\".dependent\")) {\n                  opt_wrap.addClass('dependent');\n                }\n\n                if (opt_wrap.hasClass('dep-hide')) {\n                  opt_wrap.removeClass('dep-hide');\n                  opt_wrap.addClass('dep-show');\n                } else {\n                  opt_wrap.addClass('dep-show');\n                }\n\n                if (section_tab == opt_wrap.data('tab')) {\n                  opt_wrap.show();\n                }\n              } else {\n                if (opt_wrap.not(\".dependent\")) {\n                  opt_wrap.addClass('dependent');\n                }\n\n                if (opt_wrap.hasClass('dep-show')) {\n                  opt_wrap.removeClass('dep-show');\n                  opt_wrap.addClass('dep-hide');\n                } else {\n                  opt_wrap.addClass('dep-hide');\n                }\n\n                opt_wrap.hide();\n              }\n            });\n          });\n        };\n\n        jQuery(document).on('change dslc-init-deps', '.dslca-module-edit-option *[data-id=\"' + jQuery(this).data('id') + '\"]', handler);\n        window.LiveComposer.Builder.Helpers.depsHandlers.push(handler);\n      }\n    });\n    jQuery(\".dslca-module-edit-option input, .dslca-module-edit-option select\").trigger('dslc-init-deps');\n  };\n\n  window.LiveComposer.Builder.UI.unloadOptionsDeps = function () {\n    window.LiveComposer.Builder.Helpers.depsHandlers.forEach(function (handler) {\n      jQuery(document).unbind('change', handler);\n      jQuery(document).unbind('dslc-init-deps', handler);\n    });\n    window.LiveComposer.Builder.Helpers.depsHandlers = [];\n  };\n  /**\n   * Creates inline style tag when editing WYSWIG\n   *\n   * @param  {object} params\n   *    params.rule\n   *    params.elems\n   *    params.module_id\n   */\n\n\n  window.LiveComposer.Builder.Helpers.processInlineStyleTag = function (params) {\n    if (_typeof(params) != 'object') return false;\n    var resp_prefix = '',\n        resp_postfix = '';\n\n    if (params.context.closest(\".dslca-module-edit-option\").data('tab') == 'tablet_responsive') {\n      resp_prefix = '@media only screen and (max-width: 1024px) and (min-width: 768px) {';\n      resp_postfix = '}';\n    } else if (params.context.closest(\".dslca-module-edit-option\").data('tab') == 'phone_responsive') {\n      resp_prefix = '@media only screen and (max-width: 767px) {';\n      resp_postfix = '}';\n    }\n\n    params.styleContent = resp_prefix + params.styleContent + resp_postfix;\n    var id = resp_prefix + params.rule + params.elems;\n    id = id.replace(/ /gi, '');\n\n    if (window.LiveComposer.Builder.PreviewAreaDocument[0].getElementById(id) == null) {\n      var styleTag = document.createElement('style');\n      styleTag.innerHTML = params.styleContent;\n      styleTag.id = id;\n      styleTag.className = \"temp-styles-for-module\";\n      window.LiveComposer.Builder.PreviewAreaDocument[0].body.appendChild(styleTag);\n    } else {\n      window.LiveComposer.Builder.PreviewAreaDocument[0].getElementById(id).innerHTML = params.styleContent;\n    }\n  };\n\n  window.LiveComposer.Builder.UI.shakePanelConfirmButton = function () {\n    jQuery('.dslca-module-edit-save').addClass('lc-shake-effect active');\n    setTimeout(function () {\n      jQuery('.dslca-module-edit-save').removeClass('lc-shake-effect active');\n    }, 1000);\n  };\n\n  onModuleOptionsChange();\n  onSectionOptionsChange();\n  onFileUploadOptionsChange();\n};\n\nvar onModuleOptionsChange = function onModuleOptionsChange() {\n  // Live Preview for Module Settings Change\n  jQuery(document).on('change', '.dslca-module-edit-field', function () {\n    if (window.dslcDebug) console.log('on change event for .dslca-module-edit-field');\n    var dslcOptionValue = '',\n        dslcOptionValueOrig = '',\n        dslcOption = jQuery(this),\n        dslcOptionID = dslcOption.data('id'),\n        dslcOptionWrap = dslcOption.closest('.dslca-module-edit-option'),\n        dslcModule = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument),\n        dslcModuleID = dslcModule.data('module'),\n        dslcModuleOptions = jQuery('.dslca-module-options-front textarea', dslcModule); // Add changed class\n\n    dslcModule.addClass('dslca-module-change-made'); // Hide/Show tabs in the module options panel.\n    // Required to show/hide particular options tabs based on the current selection.\n    // Active only for dropdowns and checkboxes.\n\n    if (dslcOptionWrap.hasClass('dslca-module-edit-option-select') || dslcOptionWrap.hasClass('dslca-module-edit-option-checkbox')) {\n      dslc_module_options_hideshow_tabs();\n    }\n    /**\n     * Refresh on change = true\n     *\n     * Refresh module HTML from the server on every field value change\n     */\n\n\n    if (jQuery(this).closest('.dslca-module-edit-option').data('refresh-on-change') == 'active') {\n      /**\n       * Get the new value\n       */\n      if (dslcOptionWrap.find('.dslca-module-edit-option-checkbox-wrapper').length) {\n        var dslcOptionChoices = jQuery('input[type=\"checkbox\"]', dslcOptionWrap);\n        dslcOptionChoices.each(function () {\n          if (jQuery(this).prop('checked')) {\n            dslcOptionValue = dslcOptionValue + jQuery(this).val() + ' ';\n          }\n        });\n      } else if (dslcOption.hasClass('dslca-module-edit-option-radio')) {\n        var dslcOptionValue = jQuery('.dslca-module-edit-field:checked', dslcOption).val();\n      } else {\n        var dslcOptionValue = dslcOption.val(); // Post Grid > Thumbnail: Orientation change.\n        // Need to change thumbnail width to get it work as expected\n\n        if (dslcOptionID == 'orientation' && dslcOptionValue == 'horizontal') {\n          var dslcSliderEl = jQuery('.dslca-module-edit-option-thumb_width .dslca-module-edit-field');\n          dslcSliderEl.val('40').trigger('change');\n        } else if (dslcOptionID == 'orientation' && dslcOptionValue == 'vertical') {\n          var dslcSliderEl = jQuery('.dslca-module-edit-option-thumb_width .dslca-module-edit-field');\n          dslcSliderEl.val('100').trigger('change');\n        }\n      }\n      /**\n       * Change old value with new value\n       */\n\n\n      if (undefined !== dslcOptionValue) {\n        dslcOptionValue = dslcOptionValue.trim().replace(/<textarea/g, '<lctextarea').replace(/<\\/textarea/g, '</lctextarea');\n      }\n\n      jQuery('.dslca-module-options-front textarea[data-id=\"' + dslcOptionID + '\"]', dslcModule).val(dslcOptionValue);\n      jQuery('.dslca-container-loader').show();\n      moduleOutputAltered(function () {\n        jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).addClass('dslca-module-change-made');\n\n        if (dslcOptionID == 'css_load_preset' && !jQuery('body').hasClass('dslca-new-preset-added')) {\n          dslc_module_options_show(dslcModuleID);\n          jQuery('.dslca-container-loader').hide();\n        } else {\n          jQuery('.dslca-container-loader').hide();\n        }\n\n        jQuery('body').removeClass('dslca-new-preset-added'); // Trigger 'LC.moduleChange' event.\n        // This event can be used by 3-rd party developers to re-init\n        // some of the JavaScript code on modure re-rendering.\n\n        LiveComposer.Utils.publish('LC.moduleChange', {\n          moduleId: dslcModuleID,\n          optionID: dslcOptionID,\n          optionVal: dslcOption.val()\n        });\n      });\n      /**\n       * Refresh on change = false\n       *\n       * Do not refresh from the server, but using JS\n       */\n    } else {\n      /**\n       * Live Preview\n       */\n      if (dslcOption.hasClass('dslca-module-edit-field-font')) {\n        var dslcFontsToLoad = dslcOption.val();\n        dslcFontsToLoad = dslcFontsToLoad + ':400,100,200,300,500,600,700,800,900';\n        var dslcAffectOnChangeEl = dslcOption.data('affect-on-change-el');\n        var dslcAffectOnChangeRule = dslcOption.data('affect-on-change-rule');\n        var dslcAffectOnChangeVal = dslcOption.val();\n        var dslcAffectOnChangeValOrig = dslcAffectOnChangeVal;\n        var module = jQuery(\".dslca-module-being-edited\", LiveComposer.Builder.PreviewAreaDocument);\n\n        if (dslcOption.val().length && dslcGoogleFontsArray.indexOf(dslcOption.val()) !== -1) {\n          // Call WebFont function from the iframe\n          document.getElementById('page-builder-frame').contentWindow.WebFont.load({\n            google: {\n              families: [dslcFontsToLoad]\n            },\n            active: function active(familyName, fvd) {\n              if (jQuery('.dslca-font-loading').closest('.dslca-module-edit-field-font-next').length) {\n                jQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-right');\n              } else {\n                jQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-left');\n              }\n\n              var elems = dslcAffectOnChangeEl.split(',');\n              var styleContent = \"#\" + module[0].id + \" \" + elems.join(\", #\" + module[0].id + \" \") + \" {\" + dslcAffectOnChangeRule + \": \" + dslcAffectOnChangeVal + \"}\";\n              LiveComposer.Builder.Helpers.processInlineStyleTag({\n                context: dslcOption,\n                rule: dslcAffectOnChangeRule,\n                elems: dslcAffectOnChangeEl,\n                styleContent: styleContent\n              });\n            },\n            inactive: function inactive(familyName, fvd) {\n              if (jQuery('.dslca-font-loading').closest('.dslca-module-edit-field-font-next').length) {\n                jQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-right');\n              } else {\n                jQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-left');\n              }\n            }\n          });\n        } else {\n          setTimeout(function () {\n            if (jQuery('.dslca-font-loading.dslca-module-edit-field-font-next').length) {\n              jQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-right');\n            } else {\n              jQuery('.dslca-font-loading').removeClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-spin').addClass('dslc-icon-chevron-left');\n            }\n\n            var elems = dslcAffectOnChangeEl.split(',');\n            var styleContent = \"#\" + module[0].id + \" \" + elems.join(\", #\" + module[0].id + \" \") + \" {\" + dslcAffectOnChangeRule + \": \" + dslcAffectOnChangeVal + \"}\";\n            LiveComposer.Builder.Helpers.processInlineStyleTag({\n              context: dslcOption,\n              rule: dslcAffectOnChangeRule,\n              elems: dslcAffectOnChangeEl,\n              styleContent: styleContent\n            });\n          }, 100);\n        }\n        /**\n         * Checkbox\n         */\n\n      } else if (dslcOption.hasClass('dslca-module-edit-field-checkbox')) {\n        var dslcOptionChoices = jQuery('input[type=\"checkbox\"]', dslcOptionWrap);\n        dslcOptionChoices.each(function () {\n          /*\n          @todo This function is specific to borders. Needs review.\n           */\n          if (jQuery(this).prop('checked')) {\n            dslcOptionValue = dslcOptionValue + 'solid ';\n            dslcOptionValueOrig = dslcOptionValueOrig + jQuery(this).val() + ' ';\n          } else {\n            dslcOptionValue = dslcOptionValue + 'none ';\n          }\n        }); // Here dslcOptionValue will look like: none none none solid.\n      }\n      /**\n       * All other option types\n       */\n\n\n      if (!dslcOption.hasClass('dslca-module-edit-field-font') && dslcOption.data('affect-on-change-el') != null && dslcOption.data('affect-on-change-rule') != null) {\n        var dslcExt = dslcOption.data('ext') || '';\n        var dslcAffectOnChangeEl = dslcOption.data('affect-on-change-el');\n        var dslcAffectOnChangeRule = dslcOption.data('affect-on-change-rule');\n        var dslcAffectOnChangeVal = dslcOption.val();\n        var dslcAffectOnChangeValOrig = dslcAffectOnChangeVal;\n\n        if (dslcOption.hasClass('dslca-module-edit-field-checkbox')) {\n          dslcAffectOnChangeVal = dslcOptionValue;\n          dslcAffectOnChangeValOrig = dslcOptionValueOrig;\n        }\n\n        if (dslcOption.hasClass('dslca-module-edit-field-image')) {\n          dslcAffectOnChangeVal = 'url(\"' + dslcAffectOnChangeVal + '\")';\n        }\n\n        if (null !== dslcAffectOnChangeVal && dslcAffectOnChangeVal.length < 1 && (dslcAffectOnChangeRule == 'background-color' || dslcAffectOnChangeRule == 'background')) {\n          dslcAffectOnChangeVal = 'transparent';\n        }\n\n        dslcAffectOnChangeRule.split(',').forEach(function (rule) {\n          rule = rule.replace(/\\s+/g, '');\n          var module = jQuery(\".dslca-module-being-edited\", LiveComposer.Builder.PreviewAreaDocument);\n          var elems = dslcAffectOnChangeEl.split(',');\n          var styleContent = \"#\" + module[0].id + \" \" + elems.join(\", #\" + module[0].id + \" \") + \" {\" + rule + \": \" + dslcAffectOnChangeVal + dslcExt + \"}\";\n          LiveComposer.Builder.Helpers.processInlineStyleTag({\n            context: dslcOption,\n            rule: rule,\n            elems: dslcAffectOnChangeEl,\n            styleContent: styleContent\n          });\n        });\n      }\n      /**\n       * Update option\n       */\n\n\n      var dslcOptionToApply = ''; // Do we work with CSS control or module property?\n\n      if (dslcOptionID.indexOf('css_') !== -1) {\n        // Apply CSS property.\n        dslcOptionToApply = dslcAffectOnChangeValOrig;\n      } else {\n        // Apply module property.\n        dslcOptionToApply = dslcOption.val();\n      }\n\n      jQuery('.dslca-module-option-front[data-id=\"' + dslcOptionID + '\"]', dslcModule).val(dslcOptionToApply); // Trigger 'LC.moduleChange' event.\n      // This event can be used by 3-rd party developers to re-init\n      // some of the JavaScript code on modure re-rendering.\n\n      LiveComposer.Utils.publish('LC.moduleChange', {\n        moduleId: dslcModule[0].id,\n        optionID: dslcOptionID,\n        optionVal: dslcAffectOnChangeValOrig || dslcOption.val()\n      });\n    }\n  });\n};\n\nvar onSectionOptionsChange = function onSectionOptionsChange() {\n  // ROW styling option changes\n  jQuery(document).on('change', '.dslca-modules-section-edit-field', function () {\n    var dslcField, dslcFieldID, dslcEl, dslcModulesSection, dslcVal, dslcValReal, dslcValExt, dslcRule, dslcSetting, dslcTargetEl, dslcImgURL;\n    dslcField = jQuery(this);\n    dslcFieldID = dslcField.data('id');\n    dslcVal = dslcField.val();\n    dslcValReal = dslcVal;\n    dslcValExt = dslcVal + dslcField.data('ext');\n    dslcRule = dslcField.data('css-rule');\n    dslcEl = jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument); // Currently editing element\n\n    dslcTargetEl = dslcEl;\n    dslcSetting = jQuery('.dslca-modules-section-settings input[data-id=\"' + dslcFieldID + '\"]', dslcEl);\n    dslcEl.addClass('dslca-modules-section-change-made'); // If image/upload field alter the value ( use from data )\n\n    if (dslcField.hasClass('dslca-modules-section-edit-field-upload')) {\n      if (dslcVal && dslcVal.length) {\n        // dslcVal = dslcField.data('dslca-img-url');\n        dslcVal = jQuery('.dslca-modules-section-settings input[data-id=\"dslca-img-url\"]', dslcEl).val();\n      }\n    }\n\n    if (dslcRule == 'background-image') {\n      dslcVal = 'url(\"' + dslcVal + '\")';\n      LiveComposer.Builder.PreviewAreaWindow.dslc_bg_video();\n    }\n\n    if (dslcFieldID == 'bg_image_attachment') {\n      dslcEl.removeClass('dslc-init-parallax');\n    }\n\n    if (dslcFieldID == 'border-top' || dslcFieldID == 'border-right' || dslcFieldID == 'border-bottom' || dslcFieldID == 'border-left') {\n      var dslcBorderStyle = jQuery('.dslca-modules-section-settings input[data-id=\"border_style\"]').val();\n      dslcSetting = jQuery('.dslca-modules-section-settings input[data-id=\"border\"]', dslcEl);\n      dslcValReal = '';\n      var dslcChecboxesWrap = dslcField.closest('.dslca-modules-section-edit-option-checkbox-wrapper');\n      dslcChecboxesWrap.find('.dslca-modules-section-edit-field-checkbox').each(function () {\n        if (jQuery(this).is(':checked')) {\n          if (jQuery(this).data('id') == 'border-top') {\n            dslcValReal += 'top ';\n          } else if (jQuery(this).data('id') == 'border-right') {\n            dslcValReal += 'right ';\n          } else if (jQuery(this).data('id') == 'border-bottom') {\n            dslcValReal += 'bottom ';\n          } else if (jQuery(this).data('id') == 'border-left') {\n            dslcValReal += 'left ';\n          }\n        }\n      });\n\n      if (dslcField.is(':checked')) {\n        if (dslcField.data('id') == 'border-top') {\n          dslcEl.css({\n            'border-top-style': dslcBorderStyle\n          });\n        } else if (dslcField.data('id') == 'border-right') {\n          dslcEl.css({\n            'border-right-style': dslcBorderStyle\n          });\n        } else if (dslcField.data('id') == 'border-bottom') {\n          dslcEl.css({\n            'border-bottom-style': dslcBorderStyle\n          });\n        } else if (dslcField.data('id') == 'border-left') {\n          dslcEl.css({\n            'border-left-style': dslcBorderStyle\n          });\n        }\n      } else {\n        if (dslcField.data('id') == 'border-top') {\n          dslcEl.css({\n            'border-top-style': 'hidden'\n          });\n        } else if (dslcField.data('id') == 'border-right') {\n          dslcEl.css({\n            'border-right-style': 'hidden'\n          });\n        } else if (dslcField.data('id') == 'border-bottom') {\n          dslcEl.css({\n            'border-bottom-style': 'hidden'\n          });\n        } else if (dslcField.data('id') == 'border-left') {\n          dslcEl.css({\n            'border-left-style': 'hidden'\n          });\n        }\n      }\n    } else if (dslcField.hasClass('dslca-modules-section-edit-field-checkbox')) {\n      var checkboxes = jQuery(this).closest('.dslca-modules-section-edit-option-checkbox-wrapper').find('.dslca-modules-section-edit-field-checkbox');\n      var checkboxesVal = '';\n      checkboxes.each(function () {\n        if (jQuery(this).prop('checked')) {\n          checkboxesVal += jQuery(this).data('val') + ' ';\n        }\n      });\n      var dslcValReal = checkboxesVal;\n      /* Show On */\n\n      if (dslcField.data('id') == 'show_on') {\n        if (checkboxesVal.indexOf('desktop') !== -1) {\n          jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslc-hide-on-desktop');\n        } else {\n          jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).addClass('dslc-hide-on-desktop');\n        }\n\n        if (checkboxesVal.indexOf('tablet') !== -1) {\n          jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslc-hide-on-tablet');\n        } else {\n          jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).addClass('dslc-hide-on-tablet');\n        }\n\n        if (checkboxesVal.indexOf('phone') !== -1) {\n          jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslc-hide-on-phone');\n        } else {\n          jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).addClass('dslc-hide-on-phone');\n        }\n      }\n    } else if (dslcFieldID == 'bg_image_attachment' && dslcVal == 'parallax') {\n      dslcEl.addClass('dslc-init-parallax');\n      LiveComposer.Builder.PreviewAreaWindow.dslc_parallax();\n    } else if (dslcFieldID == 'type') {\n      if (dslcVal == 'full') {\n        dslcEl.addClass('dslc-full');\n      } else {\n        dslcEl.removeClass('dslc-full');\n      }\n\n      LiveComposer.Builder.PreviewAreaWindow.dslc_masonry();\n    } else if (dslcFieldID == 'columns_spacing') {\n      if (dslcVal == 'nospacing') {\n        dslcEl.addClass('dslc-no-columns-spacing');\n      } else {\n        dslcEl.removeClass('dslc-no-columns-spacing');\n      }\n    } else if (dslcFieldID == 'custom_class') {} else if (dslcFieldID == 'custom_id') {} else if (dslcFieldID == 'bg_video') {\n      jQuery('.dslc-bg-video video', dslcEl).remove();\n\n      if (dslcVal && dslcVal.length) {\n        var dslcVideoVal = dslcVal;\n        dslcVideoVal = dslcVideoVal.replace('.webm', '');\n        dslcVideoVal = dslcVideoVal.replace('.mp4', '');\n        jQuery('.dslc-bg-video-inner', dslcEl).html('<video><source type=\"video/mp4\" src=\"' + dslcVideoVal + '.mp4\" /><source type=\"video/webm\" src=\"' + dslcVideoVal + '.webm\" /></video>');\n        LiveComposer.Builder.PreviewAreaWindow.dslc_bg_video();\n      }\n    } else if (dslcFieldID == 'bg_image_thumb') {\n      if (dslcValReal == 'enabled') {\n        if (jQuery('#dslca-post-data-thumb').length) {\n          var dslcThumbURL = \"url('\" + jQuery('#dslca-post-data-thumb').val() + \"')\";\n          dslcTargetEl.css(dslcRule, dslcThumbURL);\n        }\n      } else if (dslcValReal == 'disabled') {\n        dslcTargetEl.css(dslcRule, 'none');\n      }\n    } else {\n      if (dslcField.data('css-element')) {\n        dslcTargetEl = jQuery(dslcField.data('css-element'), dslcEl);\n      }\n\n      dslcRule = dslcRule.replace(/ /g, '').split(',');\n      var dslcValToApply;\n\n      if (null != dslcField.data('ext')) {\n        dslcValToApply = dslcValExt;\n      } else {\n        dslcValToApply = dslcVal;\n      } // Loop through rules (useful when there are multiple rules)\n\n\n      for (var i = 0; i < dslcRule.length; i++) {\n        dslcTargetEl.css(dslcRule[i], dslcValToApply);\n      }\n    } // Update hidden input with new value\n\n\n    dslcSetting.val(dslcValReal);\n    if (!LiveComposer.Builder.Flags.generate_code_after_row_changed) return false; // window.dslc_generate_code();\n    // window.dslc_show_publish_button();\n  });\n};\n\nvar onFileUploadOptionsChange = function onFileUploadOptionsChange() {\n  // Uploading files\n  var file_frame;\n  jQuery(document).on('click', '.dslca-module-edit-field-image-add-hook, .dslca-modules-section-edit-field-image-add-hook', function () {\n    var hook = jQuery(this);\n\n    if (hook.hasClass('dslca-module-edit-field-image-add-hook')) {\n      var field = hook.siblings('.dslca-module-edit-field-image');\n      var removeHook = hook.siblings('.dslca-module-edit-field-image-remove-hook');\n    } else {\n      var field = hook.siblings('.dslca-modules-section-edit-field-upload');\n      var removeHook = hook.siblings('.dslca-modules-section-edit-field-image-remove-hook');\n    } // Whether or not multiple files are allowed\n\n\n    var multiple = false; // Create the media frame.\n\n    file_frame = wp.media.frames.file_frame = wp.media({\n      title: 'Choose Image',\n      button: {\n        text: 'Confirm'\n      },\n      multiple: multiple\n    }); // When an image is selected, run a callback.\n\n    file_frame.on('select', function () {\n      var attachment = file_frame.state().get('selection').first().toJSON();\n      /*\n      Save image ID as value of the image input.\n       */\n      // field.val( attachment.id ).data( 'dslca-img-url', attachment.url ).trigger('change'); - previous version\n\n      field.val(attachment.id);\n      var dataId = hook.parent().attr(\"data-id\");\n      /*\n      Save alt as value of the image input.\n       */\n\n      if (attachment.alt != '' && dataId == 'image') {\n        jQuery('.dslca-module-edit-option-image_alt input[data-id=\"image_alt\"]').val(attachment.alt);\n      }\n      /*\n      Save alt as value of the image input.\n       */\n\n\n      if (attachment.title != '' && dataId == 'image') {\n        jQuery('.dslca-module-edit-option-image_title input[data-id=\"image_title\"]').val(attachment.title);\n      }\n      /*\n      Save image URL as data attribute of input in dslca-modules-section-settings set\n      We need URL in 'dslca-img-url' for live preview\n       */\n\n\n      jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).find('.dslca-modules-section-settings input[data-id=\"dslca-img-url\"]').val(attachment.url);\n      field.trigger('change'); // trigger change only after 'dslca-img-url' is set\n\n      hook.hide();\n      removeHook.show();\n    }); // Finally, open the modal\n\n    file_frame.open();\n  });\n  jQuery(document).on('click', '.dslca-module-edit-field-image-remove-hook, .dslca-modules-section-edit-field-image-remove-hook', function () {\n    var hook = jQuery(this);\n\n    if (hook.hasClass('dslca-module-edit-field-image-remove-hook')) {\n      var field = hook.siblings('.dslca-module-edit-field-image');\n      var addHook = hook.siblings('.dslca-module-edit-field-image-add-hook');\n    } else {\n      var field = hook.siblings('.dslca-modules-section-edit-field-upload');\n      var addHook = hook.siblings('.dslca-modules-section-edit-field-image-add-hook');\n    }\n\n    field.val('').trigger('change'); // .dslca-modules-section-edit-field\n\n    /*\n    Delete alt and title value.\n     */\n\n    var dataId = hook.parent().attr(\"data-id\");\n\n    if (dataId == 'image') {\n      jQuery('.dslca-module-edit-option-image_alt input').attr('value', '').trigger('change');\n      jQuery('.dslca-module-edit-option-image_alt input').attr('data-val-bckp', '').trigger('change');\n      jQuery('.dslca-module-edit-option-image_title input').attr('value', '').trigger('change');\n      jQuery('.dslca-module-edit-option-image_title input').attr('data-val-bckp', '').trigger('change');\n    }\n\n    hook.hide();\n    addHook.show();\n  });\n};\n/**\n * MODULES SETTINGS PANEL - Filter Module Options\n */\n\n\nfunction dslc_module_options_section_filter(sectionID) {\n  if (window.dslcDebug) console.log('dslc_module_options_section_filter'); // Hide all options\n\n  jQuery('.dslca-module-edit-option').hide(); // Show options for current section\n\n  jQuery('.dslca-module-edit-option[data-section=\"' + sectionID + '\"]').show(); // Recall module options tab\n\n  elementOptionsTabs();\n}\n/**\n * MODULES SETTINGS PANEL - Show module options tab\n */\n\n\nexport var elementOptionsTabs = function elementOptionsTabs(dslcTab) {\n  if (window.dslcDebug) console.log('elementOptionsTabs'); // Get currently active section\n\n  var dslcSectionID = jQuery('.dslca-options-filter-hook.dslca-active').data('section'); // If tab not supplied set to first\n\n  dslcTab = typeof dslcTab !== 'undefined' ? dslcTab : jQuery('.dslca-module-edit-options-tab-hook[data-section=\"' + dslcSectionID + '\"]:first'); // Get the tab ID\n\n  var dslcTabID = dslcTab.data('id'); // Set active class on tab\n\n  jQuery('.dslca-module-edit-options-tab-hook').removeClass('dslca-active');\n  dslcTab.addClass('dslca-active'); // Show tabs container\n\n  jQuery('.dslca-module-edit-options-tabs').show(); // Hide/Show tabs hooks\n\n  jQuery('.dslca-module-edit-options-tab-hook').hide();\n  jQuery('.dslca-module-edit-options-tab-hook[data-section=\"' + dslcSectionID + '\"]').show();\n\n  if (dslcTabID) {\n    // Hide/Show options\n    jQuery('.dslca-module-edit-option').hide();\n    jQuery('.dslca-module-edit-option[data-tab=\"' + dslcTabID + '\"]').show(); // Hide/Show Tabs\n\n    dslc_module_options_hideshow_tabs(); // If only one tab hide the tabs container\n\n    if (jQuery('.dslca-module-edit-options-tab-hook:visible').length < 2) {\n      jQuery('.dslca-module-edit-options-tabs').hide();\n    } else {\n      jQuery('.dslca-module-edit-options-tabs').show();\n    }\n    /**\n     * If responsive tab, change the width of the dslc-content div\n     */\n\n\n    dslc_disable_responsive_view(); // Tablet\n\n    if (dslcTabID == DSLCString.str_res_tablet.toLowerCase() + '_responsive') {\n      jQuery('body').removeClass('dslc-res-big dslc-res-smaller-monitor dslc-res-phone dslc-res-tablet');\n      jQuery('body').addClass('dslc-res-tablet');\n      jQuery('html').addClass('dslc-responsive-preview');\n    } // Phone\n\n\n    if (dslcTabID == DSLCString.str_res_phone.toLowerCase() + '_responsive') {\n      jQuery('body').removeClass('dslc-res-big dslc-res-smaller-monitor dslc-res-phone dslc-res-tablet');\n      jQuery('body').addClass('dslc-res-phone');\n      jQuery('html').addClass('dslc-responsive-preview');\n    } // If responsive reload module\n\n\n    if (dslcTabID == DSLCString.str_res_tablet.toLowerCase() + '_responsive' || dslcTabID == DSLCString.str_res_phone.toLowerCase() + '_responsive') {\n      // Show the loader\n      jQuery('.dslca-container-loader').show(); // Reload Module\n\n      moduleOutputAltered(function () {\n        // Hide the loader\n        jQuery('.dslca-container-loader').hide();\n      });\n    }\n  } // Scroll horizontally options panel to the left (not ready)\n\n\n  if (jQuery('body').hasClass('rtl')) {\n    var totalWidthOption = 0;\n    var totalWidthGroup = 0;\n    var totalWidth = 0;\n    jQuery('.dslca-module-edit-options-wrapper > .dslca-module-edit-option:visible').each(function (index) {\n      if (!jQuery(this).hasClass('dslca-module-edit-option-hidden') && !jQuery(this).hasClass('dslca-module-control-group')) {\n        totalWidthOption += parseInt(jQuery(this).outerWidth(), 10);\n      }\n    });\n    jQuery('.dslca-module-edit-options-wrapper > .dslca-module-control-group:visible').each(function (index) {\n      totalWidthGroup += parseInt(jQuery(this).outerWidth(), 10);\n    });\n    totalWidth = parseInt(totalWidthOption) + parseInt(totalWidthGroup) + 10;\n    jQuery('.dslca-module-edit-options-wrapper').css({\n      'width': totalWidth + 'px'\n    });\n  }\n};\n/**\n * MODULES SETTINGS PANEL - Hide show tabs based on option choices\n */\n\nfunction dslc_module_options_hideshow_tabs() {\n  if (window.dslcDebug) console.log('dslc_module_options_hideshow_tabs');\n  var dslcSectionID = jQuery('.dslca-options-filter-hook.dslca-active').data('section');\n\n  if (dslcSectionID == 'styling') {\n    // Vars\n    var dslcContainer = jQuery('.dslca-module-edit'),\n        dslcHeading = true,\n        dslcFilters = true,\n        dslcCarArrows = true,\n        dslcCarCircles = true,\n        dslcPagination = true,\n        dslcElThumb = true,\n        dslcElTitle = true,\n        dslcElExcerpt = true,\n        dslcElMeta = true,\n        dslcElButton = true,\n        dslcElCats = true,\n        dslcElCount = true,\n        dslcElSeparator = true,\n        dslcElTags = true,\n        dslcElSocial = true,\n        dslcElPosition = true,\n        dslcElIcon = true,\n        dslcElContent = true,\n        dslcElPrice = true,\n        dslcElPriceSec = true,\n        dslcElAddCart = true,\n        dslcElDetails = true,\n        dslcElQuote = true,\n        dslcElAuthorName = true,\n        dslcElAuthorPos = true,\n        dslcElImage = true,\n        dslcElLogo = true; // Is heading selected?\n\n    if (!jQuery('.dslca-module-edit-field[value=\"main_heading\"]').is(':checked')) dslcHeading = false; // Are filters selected?\n\n    if (!jQuery('.dslca-module-edit-field[value=\"filters\"]').is(':checked')) dslcFilters = false; // Are arrows selected?\n\n    if (!jQuery('.dslca-module-edit-field[value=\"arrows\"]').is(':checked')) dslcCarArrows = false; // Are circles selected?\n\n    if (!jQuery('.dslca-module-edit-field[value=\"circles\"]').is(':checked')) dslcCarCircles = false; // Is it a carousel?\n\n    if (jQuery('.dslca-module-edit-field[data-id=\"type\"]').val() != 'carousel') {\n      dslcCarArrows = false;\n      dslcCarCircles = false;\n    } // Is pagination enabled?\n\n\n    if (jQuery('.dslca-module-edit-field[data-id=\"pagination_type\"]').val() == 'disabled') {\n      dslcPagination = false;\n    } // Is thumb enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"thumbnail\"]').is(':checked')) {\n      dslcElThumb = false;\n    } // Is title enabled?\n\n\n    if (jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"content\"]').length && !jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"title\"]').is(':checked')) {\n      dslcElTitle = false;\n    } // Is excerpt enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"excerpt\"]').is(':checked')) {\n      dslcElExcerpt = false;\n    } // Is meta enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"meta\"]').is(':checked')) {\n      dslcElMeta = false;\n    } // Is button enabled?\n\n\n    if (jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"button\"]').length && !jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"button\"]').is(':checked')) {\n      dslcElButton = false;\n    } // Are cats enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"categories\"]').is(':checked')) {\n      dslcElCats = false;\n    } // Is separator enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"separator\"]').is(':checked')) {\n      dslcElSeparator = false;\n    } // Is count enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"count\"]').is(':checked')) {\n      dslcElCount = false;\n    } // Are tags enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"tags\"]').is(':checked')) {\n      dslcElTags = false;\n    } // Are social link enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"social\"]').is(':checked')) {\n      dslcElSocial = false;\n    } // Is position enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"position\"]').is(':checked')) {\n      dslcElPosition = false;\n    } // Is icon enabled?\n\n\n    if (jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"icon\"]').length && !jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"icon\"]').is(':checked')) {\n      dslcElIcon = false;\n    } // Is content enabled?\n\n\n    if (jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"content\"]').length && !jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"content\"]').is(':checked')) {\n      dslcElContent = false;\n    } // Is price enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"price\"]').is(':checked')) {\n      dslcElPrice = false;\n    } // Is price secondary enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"price_2\"]').is(':checked')) {\n      dslcElPriceSec = false;\n    } // Is add to cart enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"addtocart\"]').is(':checked')) {\n      dslcElAddCart = false;\n    } // Is add to cart enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"details\"]').is(':checked')) {\n      dslcElDetails = false;\n    } // Is quote enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"quote\"]').is(':checked')) {\n      dslcElQuote = false;\n    } // Is author name enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"author_name\"]').is(':checked')) {\n      dslcElAuthorName = false;\n    } // Is author position enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"author_position\"]').is(':checked')) {\n      dslcElAuthorPos = false;\n    } // Is image enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"image\"]').is(':checked')) {\n      dslcElImage = false;\n    } // Is logo enabled?\n\n\n    if (!jQuery('.dslca-module-edit-field[data-id*=\"elements\"][value=\"logo\"]').is(':checked')) {\n      dslcElLogo = false;\n    } // Show/Hide Heading\n\n\n    if (dslcHeading) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"heading_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"heading_styling\"]').hide(); // Show/Hide Filters\n\n    if (dslcFilters) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"filters_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"filters_styling\"]').hide(); // Show/Hide Carousel Arrows\n\n    if (dslcCarArrows) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"carousel_arrows_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"carousel_arrows_styling\"]').hide(); // Show/Hide Carousel Circles\n\n    if (dslcCarCircles) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"carousel_circles_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"carousel_circles_styling\"]').hide(); // Show/Hide Pagination\n\n    if (dslcPagination) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"pagination_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"pagination_styling\"]').hide(); // Show/Hide Thumb\n\n    if (dslcElThumb) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"thumbnail_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"thumbnail_styling\"]').hide(); // Show/Hide Title\n\n    if (dslcElTitle) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"title_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"title_styling\"]').hide(); // Show/Hide Excerpt\n\n    if (dslcElExcerpt) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"excerpt_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"excerpt_styling\"]').hide(); // Show/Hide Meta\n\n    if (dslcElMeta) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"meta_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"meta_styling\"]').hide(); // Show/Hide Button\n\n    if (dslcElButton) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"button_styling\"], .dslca-module-edit-options-tab-hook[data-id=\"primary_button_styling\"],' + ' .dslca-module-edit-options-tab-hook[data-id=\"secondary_button_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"button_styling\"], .dslca-module-edit-options-tab-hook[data-id=\"primary_button_styling\"],' + ' .dslca-module-edit-options-tab-hook[data-id=\"secondary_button_styling\"]').hide(); // Show/Hide Cats\n\n    if (dslcElCats) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"categories_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"categories_styling\"]').hide(); // Show/Hide Separator\n\n    if (dslcElSeparator) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"separator_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"separator_styling\"]').hide(); // Show/Hide Count\n\n    if (dslcElCount) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"count_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"count_styling\"]').hide(); // Show/Hide Tags\n\n    if (dslcElTags) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"tags_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"tags_styling\"]').hide(); // Show/Hide Tags\n\n    if (dslcElPosition) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"position_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"position_styling\"]').hide(); // Show/Hide Tags\n\n    if (dslcElSocial) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"social_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"social_styling\"]').hide(); // Show/Hide Icon\n\n    if (dslcElIcon) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"icon_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"icon_styling\"]').hide(); // Show/Hide Content\n\n    if (dslcElContent) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"content_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"content_styling\"]').hide(); // Show/Hide Price\n\n    if (dslcElPrice) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"price_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"price_styling\"]').hide(); // Show/Hide Price Sec\n\n    if (dslcElPriceSec) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"price_secondary_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"price_secondary_styling\"]').hide(); // Show/Hide Add to Cart\n\n    if (dslcElAddCart || dslcElDetails) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"other_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"other_styling\"]').hide(); // Show/Hide Quote\n\n    if (dslcElQuote) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"quote_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"quote_styling\"]').hide(); // Show/Hide Author Name\n\n    if (dslcElAuthorName) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"author_name_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"author_name_styling\"]').hide(); // Show/Hide Author Position\n\n    if (dslcElAuthorPos) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"author_position_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"author_position_styling\"]').hide(); // Show/Hide Image\n\n    if (dslcElImage) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"image_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"image_styling\"]').hide(); // Show/Hide Quote\n\n    if (dslcElLogo) jQuery('.dslca-module-edit-options-tab-hook[data-id=\"logo_styling\"]').show();else jQuery('.dslca-module-edit-options-tab-hook[data-id=\"logo_styling\"]').hide();\n  }\n  /**\n   * Check 'Enable/Disable Custom CSS' control\n   */\n\n\n  if (jQuery('.dslca-options-filter-hook[data-section=\"styling\"]').hasClass('dslca-active')) {\n    var dslcCustomCSS = jQuery('.dslca-module-edit-option[data-id=\"css_custom\"]'),\n        dslcCustomCSSVal = dslcCustomCSS.find('select').val();\n\n    if (dslcCustomCSSVal == 'enabled') {\n      jQuery('.dslca-module-edit-option[data-section=\"styling\"]').css({\n        visibility: 'visible'\n      });\n      jQuery('.dslca-module-edit-option[data-tab]').css('visibility', 'visible');\n      jQuery('.dslca-module-edit-options-tabs').show();\n    } else {\n      jQuery('.dslca-module-edit-option[data-section=\"styling\"]').css({\n        visibility: 'hidden'\n      });\n      jQuery('.dslca-module-control-group.dslca-module-edit-option').css('visibility', 'hidden');\n      jQuery('.dslca-module-edit-options-tabs').hide();\n      dslcCustomCSS.css({\n        visibility: 'visible'\n      });\n    }\n  } else {\n    jQuery('.dslca-module-edit-options-tabs').show();\n  }\n\n  if (jQuery('select.dslca-module-edit-field[data-id=\"css_res_t\"]').val() == 'disabled') {\n    jQuery('.dslca-module-edit-option[data-id*=\"css_res_t\"]').css('visibility', 'hidden');\n    jQuery('.dslca-module-edit-option[data-tab=\"tablet_responsive\"]').css('visibility', 'hidden');\n  } else {\n    jQuery('.dslca-module-edit-option[data-id*=\"css_res_t\"]').css('visibility', 'visible');\n    jQuery('.dslca-module-edit-option[data-tab=\"tablet_responsive\"]').css('visibility', 'visible');\n  }\n\n  if (jQuery('select.dslca-module-edit-field[data-id=\"css_res_p\"]').val() == 'disabled') {\n    jQuery('.dslca-module-edit-option[data-id*=\"css_res_p\"]').css('visibility', 'hidden');\n    jQuery('.dslca-module-edit-option[data-tab=\"phone_responsive\"]').css('visibility', 'hidden');\n  } else {\n    jQuery('.dslca-module-edit-option[data-id*=\"css_res_p\"]').css('visibility', 'visible');\n    jQuery('.dslca-module-edit-option[data-tab=\"phone_responsive\"]').css('visibility', 'visible');\n  }\n\n  jQuery('.dslca-module-edit-option[data-id=\"css_res_p\"], .dslca-module-edit-option[data-id=\"css_res_t\"]').css('visibility', 'visible');\n\n  if (jQuery('.dslca-options-filter-hook').hasClass('dslca-active')) {\n    var section_tab = jQuery('.dslca-options-filter-hook.dslca-active').data('section');\n\n    if (jQuery('.dslca-module-edit-option[data-section=\"' + section_tab + '\"]').hasClass('dep-show')) {\n      jQuery('.dslca-module-edit-option.dep-show').show();\n    }\n\n    if (jQuery('.dslca-module-edit-option[data-section=\"' + section_tab + '\"]').hasClass('dep-hide')) {\n      jQuery('.dslca-module-edit-option.dep-hide').hide();\n    }\n  }\n\n  if (jQuery('.dslca-module-edit-options-tab-hook').hasClass('dslca-active')) {\n    var data_tab = jQuery('.dslca-module-edit-options-tab-hook.dslca-active').data('id');\n\n    if (jQuery('.dslca-module-edit-option[data-tab=\"' + data_tab + '\"]').hasClass('dependent')) {\n      jQuery('.dslca-module-edit-option.dependent').hide();\n      jQuery('.dslca-module-edit-option[data-tab=\"' + data_tab + '\"].dep-show').show();\n      jQuery('.dslca-module-edit-option[data-tab=\"' + data_tab + '\"].dep-hide').hide();\n    } else {\n      jQuery('.dslca-module-edit-option.dependent').hide();\n    }\n  }\n}\n/**\n * MODULES SETTINGS PANEL - Confirm module options changes\n */\n\n\nfunction dslc_module_options_confirm_changes(callback) {\n  if (window.dslcDebug) console.log('dslc_module_options_confirm_changes'); // Callback\n\n  callback = typeof callback !== 'undefined' ? callback : false; // If slider module\n\n  if (jQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument).hasClass('dslc-module-DSLC_Sliders')) {\n    jQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited'); // If not slider module\n  } else {\n    // Add class so we know saving is in progress\n    jQuery('body').addClass('dslca-module-saving-in-progress'); // Reload module with new settings\n\n    moduleOutputAltered(function () {\n      // Update preset\n      updatePreset();\n      window.dslc_generate_code();\n      jQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited'); // Remove classes so we know saving finished\n\n      jQuery('body').removeClass('dslca-module-saving-in-progress'); // Clean up options container\n\n      jQuery('.dslca-module-edit-options-inner').html('');\n      jQuery('.dslca-module-edit-options-tabs').html('');\n      window.LiveComposer.Builder.UI.clearUtils(); // Callback if there's one\n\n      if (callback) {\n        callback();\n      }\n    });\n  } // Show modules listing\n\n\n  showSection('.dslca-modules'); // Hide the filter hooks\n\n  jQuery('.dslca-header .dslca-options-filter-hook').hide(); // Hide the save/cancel actions\n\n  jQuery('.dslca-module-edit-actions').hide(); // Show the section hooks\n\n  jQuery('.dslca-header .dslca-go-to-section-hook').show(); // window.dslc_generate_code();\n  // Show the publish button\n\n  window.dslc_show_publish_button();\n}\n/**\n * MODULES SETTINGS PANEL - Cancel module options changes\n */\n\n\nfunction dslc_module_options_cancel_changes(callback) {\n  if (window.dslcDebug) console.log('dslc_module_options_cancel_changes'); // Callback\n\n  callback = typeof callback !== 'undefined' ? callback : false; // Vars\n\n  var editedModule = jQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument); // Add backup option values\n\n  jQuery('.dslca-module-options-front', editedModule).html('').append(window.LiveComposer.Builder.moduleBackup); // window.LiveComposer.Builder.moduleBackup = false;\n  // Reload module\n\n  moduleOutputAltered(function () {\n    window.dslc_generate_code();\n    jQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-module-being-edited'); // Clean up options container\n\n    jQuery('.dslca-module-edit-options-inner').html('');\n    jQuery('.dslca-module-edit-options-tabs').html('');\n    window.LiveComposer.Builder.UI.clearUtils();\n\n    if (callback) {\n      callback();\n    }\n  }); // Show modules listing\n\n  showSection('.dslca-modules'); // Hide the filter hooks\n\n  jQuery('.dslca-header .dslca-options-filter-hook').hide(); // Hide the save/cancel actions\n\n  jQuery('.dslca-module-edit-actions').hide(); // Show the section hooks\n\n  jQuery('.dslca-header .dslca-go-to-section-hook').show(); // Show the publish button\n\n  window.dslc_show_publish_button();\n  window.LiveComposer.Builder.UI.clearUtils();\n}\n/**\n * MODULES SETTINGS PANEL - Option Tooltips\n */\n\n\nfunction dslc_module_options_tooltip() {\n  // Close Tooltip\n  jQuery(document).on('click', '.dslca-module-edit-field-ttip-close', function () {\n    jQuery('.dslca-module-edit-field-ttip, .dslca-module-edit-field-icon-ttip').hide();\n  }); // Show Tooltip\n\n  jQuery(document).on('click', '.dslca-module-edit-field-ttip-hook', function () {\n    var dslcTtip = jQuery('.dslca-module-edit-field-ttip'),\n        dslcTtipInner = dslcTtip.find('.dslca-module-edit-field-ttip-inner'),\n        dslcHook = jQuery(this),\n        dslcTtipContent,\n        dslcLabel;\n    dslcLabel = dslcHook.parent();\n\n    if (dslcLabel.parent().hasClass('dslca-modules-section-edit-option')) {\n      dslcTtipContent = dslcHook.closest('.dslca-modules-section-edit-option').find('.dslca-module-edit-field-ttip-content').html();\n    } else {\n      dslcTtipContent = dslcHook.closest('.dslca-module-edit-option').find('.dslca-module-edit-field-ttip-content').html();\n    }\n\n    if (dslcTtip.is(':visible')) {\n      jQuery('.dslca-module-edit-field-ttip').hide();\n    } else {\n      dslcTtipInner.html(dslcTtipContent);\n      var dslcOffset = dslcHook.offset();\n      var dslcTtipHeight = dslcTtip.outerHeight();\n      var dslcTtipWidth = dslcTtip.outerWidth();\n      var dslcTtipLeft = dslcOffset.left - dslcTtipWidth / 2 + 6;\n      var dslcTtipArrLeft = '50%';\n\n      if (dslcTtipLeft < 0) {\n        dslcTtipArrLeft = dslcTtipWidth / 2 + dslcTtipLeft + 'px';\n        dslcTtipLeft = 0;\n      }\n\n      jQuery('.dslca-module-edit-field-ttip').show().css({\n        top: dslcOffset.top - dslcTtipHeight - 20,\n        left: dslcTtipLeft\n      });\n      jQuery(\"head\").append(jQuery('<style>.dslca-module-edit-field-ttip:after, .dslca-module-edit-field-ttip:before { left: ' + dslcTtipArrLeft + ' }</style>'));\n    }\n  }); // Show Tooltip ( Icon Options )\n\n  jQuery(document).on('click', '.dslca-module-edit-field-icon-ttip-hook', function () {\n    var dslcTtip = jQuery('.dslca-module-edit-field-icon-ttip');\n    var dslcHook = jQuery(this);\n\n    if (dslcTtip.is(':visible')) {\n      jQuery('.dslca-module-edit-field-icon-ttip').hide();\n    } else {\n      var dslcOffset = dslcHook.offset();\n      var dslcTtipHeight = dslcTtip.outerHeight();\n      var dslcTtipWidth = dslcTtip.outerWidth();\n      var dslcTtipLeft = dslcOffset.left - dslcTtipWidth / 2 + 6;\n      var dslcTtipArrLeft = '50%';\n\n      if (dslcTtipLeft < 0) {\n        dslcTtipArrLeft = dslcTtipWidth / 2 + dslcTtipLeft + 'px';\n        dslcTtipLeft = 0;\n      }\n\n      jQuery('.dslca-module-edit-field-icon-ttip').show().css({\n        top: dslcOffset.top - dslcTtipHeight - 20,\n        left: dslcTtipLeft\n      });\n      jQuery(\"head\").append(jQuery('<style>.dslca-module-edit-field-icon-ttip:after, .dslca-module-edit-field-icon-ttip:before { left: ' + dslcTtipArrLeft + ' }</style>'));\n    }\n  });\n}\n/**\n * MODULES SETTINGS PANEL - Font option type\n */\n\n\nfunction dslc_module_options_font() {\n  // Next Font\n  jQuery(document).on('click', '.dslca-module-edit-field-font-next', function (e) {\n    e.preventDefault();\n\n    if (!jQuery(this).hasClass('dslca-font-loading') && !jQuery(this).siblings('.dslca-font-loading').length) {\n      var dslcOption = jQuery(this).closest('.dslca-module-edit-option-font');\n      var dslcField = jQuery('.dslca-module-edit-field-font', dslcOption);\n      var dslcCurrIndex = dslcAllFontsArray.indexOf(dslcField.val());\n      var dslcNewIndex = dslcCurrIndex + 1;\n      jQuery('.dslca-module-edit-field-font-suggest', dslcOption).text('');\n      dslcField.val(dslcAllFontsArray[dslcNewIndex]).trigger('change');\n      jQuery(this).addClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-chevron-right').addClass('dslc-icon-refresh dslc-icon-spin');\n    }\n  }); // Previous Font\n\n  jQuery(document).on('click', '.dslca-module-edit-field-font-prev', function (e) {\n    e.preventDefault();\n\n    if (!jQuery(this).hasClass('dslca-font-loading') && !jQuery(this).siblings('.dslca-font-loading').length) {\n      var dslcOption = jQuery(this).closest('.dslca-module-edit-option-font');\n      var dslcField = jQuery('.dslca-module-edit-field-font', dslcOption);\n      var dslcCurrIndex = dslcAllFontsArray.indexOf(dslcField.val());\n      var dslcNewIndex = dslcCurrIndex - 1;\n      jQuery('.dslca-module-edit-field-font-suggest', dslcOption).text('');\n\n      if (dslcNewIndex < 0) {\n        dslcNewIndex = dslcAllFontsArray.length - 1;\n      }\n\n      dslcField.val(dslcAllFontsArray[dslcNewIndex]).trigger('change');\n      jQuery(this).addClass('dslca-font-loading').find('.dslca-icon').removeClass('dslc-icon-chevron-left').addClass('dslc-icon-refresh dslc-icon-spin');\n    }\n  }); // Keyup ( left arrow, right arrow, else )\n\n  jQuery(document).on('keyup', '.dslca-module-edit-field-font', function (e) {\n    var dslcField,\n        dslcOption,\n        dslcVal,\n        dslcMatchingFont = false,\n        dslcFont;\n    dslcField = jQuery(this);\n    dslcOption = dslcField.closest('.dslca-module-edit-option');\n\n    if (e.which == 38) {\n      jQuery('.dslca-module-edit-field-font-prev', dslcOption).click();\n    }\n\n    if (e.which == 40) {\n      jQuery('.dslca-module-edit-field-font-next', dslcOption).click();\n    }\n\n    if (e.which != 13 && e.which != 38 && e.which != 40) {\n      dslcVal = dslcField.val();\n      var search = [];\n      var re = new RegExp('^' + dslcVal, 'i');\n      var dslcFontsAmount = dslcAllFontsArray.length;\n      var i = 0;\n\n      do {\n        if (re.test(dslcAllFontsArray[i])) {\n          if (!dslcMatchingFont) {\n            var dslcMatchingFont = dslcAllFontsArray[i];\n          }\n        }\n\n        i++;\n      } while (i < dslcFontsAmount);\n\n      if (!dslcMatchingFont) {\n        dslcFont = dslcVal;\n        jQuery('.dslca-module-edit-field-font-suggest', dslcOption).hide();\n      } else {\n        dslcFont = dslcMatchingFont;\n        jQuery('.dslca-module-edit-field-font-suggest', dslcOption).show();\n      }\n\n      jQuery('.dslca-module-edit-field-font-suggest', dslcOption).text(dslcFont);\n\n      if (dslcFont.length) {\n        dslcField.val(dslcFont.substring(0, dslcField.val().length));\n      }\n    }\n  }); // Key press ( enter )\n\n  jQuery(document).on('keypress', '.dslca-module-edit-field-font', function (e) {\n    if (e.which == 13) {\n      e.preventDefault();\n      var dslcField, dslcOption, dslcVal, dslcMatchingFont, dslcFont;\n      dslcField = jQuery(this);\n      dslcOption = dslcField.closest('.dslca-module-edit-option');\n      jQuery(this).val(jQuery('.dslca-module-edit-field-font-suggest', dslcOption).text()).trigger('change');\n      jQuery('.dslca-module-edit-field-font-suggest', dslcOption).text('');\n    }\n  });\n}\n/*\n * MODULES SETTINGS PANEL - Change icon code based on direction (next/previous)\n */\n\n\nfunction dslc_list_icon(object, direction) {\n  var dslcOption = jQuery(object).closest('.dslca-module-edit-option-icon');\n  var dslcField = jQuery('.dslca-module-edit-field-icon', dslcOption);\n  var dslcCurrIndex = dslcIconsCurrentSet.indexOf(dslcField.val());\n\n  if (direction == 'previous') {\n    var dslcNewIndex = dslcCurrIndex - 1;\n  } else {\n    var dslcNewIndex = dslcCurrIndex + 1;\n  }\n\n  jQuery('.dslca-module-edit-field-icon-suggest', dslcOption).text('');\n\n  if (dslcNewIndex < 0) {\n    dslcNewIndex = dslcIconsCurrentSet.length - 1;\n  }\n\n  dslcField.val(dslcIconsCurrentSet[dslcNewIndex]).trigger('change');\n}\n/**\n * MODULES SETTINGS PANEL - Icon option type\n */\n\n\nfunction dslc_module_options_icon() {\n  // Key Up ( arrow up, arrow down, else )\n  jQuery(document).on('keyup', '.dslca-module-edit-field-icon', function (e) {\n    var dslcField, dslcOption, dslcVal, dslcIconsArrayGrep, dslcIcon;\n    dslcField = jQuery(this);\n    dslcOption = dslcField.closest('.dslca-module-edit-option'); // Key pressed: arrow up\n\n    if (e.which == 38) {\n      dslc_list_icon(dslcField, 'previous');\n    } // Key pressed: arrow down\n\n\n    if (e.which == 40) {\n      dslc_list_icon(dslcField, 'next');\n    }\n\n    if (e.which != 13 && e.which != 38 && e.which != 40) {\n      dslcVal = dslcField.val().toLowerCase();\n      dslcField.val(dslcVal);\n      dslcIconsArrayGrep = jQuery.grep(dslcIconsCurrentSet, function (value, i) {\n        return value.indexOf(dslcVal) == 0;\n      });\n      dslcIcon = dslcIconsArrayGrep[0];\n      jQuery('.dslca-module-edit-field-icon-suggest', dslcOption).text(dslcIcon);\n    }\n  }); // Key Press ( Enter )\n\n  jQuery(document).on('keypress', '.dslca-module-edit-field-icon', function (e) {\n    if (e.which == 13) {\n      e.preventDefault();\n      var dslcField, dslcOption, dslcVal, dslcIconsArrayGrep, dslcIcon;\n      dslcField = jQuery(this);\n      dslcOption = dslcField.closest('.dslca-module-edit-option');\n      jQuery(this).val(jQuery('.dslca-module-edit-field-icon-suggest', dslcOption).text()).trigger('change');\n      jQuery('.dslca-module-edit-field-icon-suggest', dslcOption).text('');\n    }\n  });\n}\n/**\n * MODULES SETTINGS PANEL - return options id\n */\n\n\nfunction dslc_module_options_icon_returnid() {\n  jQuery(document).on('click', '.dslca-open-modal-hook[data-modal^=\".dslc-list-icons\"]', function (el) {\n    jQuery(this).closest('.dslca-module-edit-option-icon').find('input').addClass('icon-modal-active');\n  });\n  jQuery(document).on('click', '.dslca-modal-icons .icon-item', function (el) {\n    // Get selected item code\n    var selectedIconCode = jQuery(this).find('.icon-item_name').text();\n    jQuery('input.icon-modal-active').val(selectedIconCode).change(); // Close modal window\n\n    hideModal('', jQuery('.dslca-modal:visible'));\n    jQuery('input.icon-modal-active').removeClass('icon-modal-active');\n  });\n}\n/**\n * MODULES SETTINGS PANEL - Text align option type\n */\n\n\nfunction dslc_module_options_text_align() {\n  jQuery(document).on('click', '.dslca-module-edit-option-text-align-hook', function () {\n    var newOpt = jQuery(this),\n        otherOpt = jQuery(this).closest('.dslca-module-edit-option-text-align-wrapper').find('.dslca-module-edit-option-text-align-hook'),\n        newVal = newOpt.data('val'),\n        realOpt = jQuery(this).closest('.dslca-module-edit-option-text-align-wrapper').siblings('input.dslca-module-edit-field');\n    otherOpt.removeClass('dslca-active');\n    newOpt.addClass('dslca-active');\n    realOpt.val(newVal).trigger('change');\n  });\n}\n/**\n * MODULES SETTINGS PANEL - Checkbox Option Type\n */\n\n\nfunction dslc_module_options_checkbox() {\n  jQuery(document).on('click', '.dslca-module-edit-option-checkbox-hook, .dslca-modules-section-edit-option-checkbox-hook', function () {\n    var checkFake = jQuery(this);\n    var checkReal = checkFake.siblings('input[type=\"checkbox\"]');\n\n    if (checkReal.prop('checked')) {\n      checkReal.prop('checked', false);\n      checkFake.find('.dslca-icon').removeClass('dslc-icon-check').addClass('dslc-icon-check-empty');\n    } else {\n      checkReal.prop('checked', true);\n      checkFake.find('.dslca-icon').removeClass('dslc-icon-check-empty').addClass('dslc-icon-check');\n    }\n\n    checkReal.change();\n  });\n}\n/**\n * MODULES SETTINGS PANEL - Box Shadow Option Type\n */\n\n\nfunction dslc_module_options_box_shadow() {\n  if (window.dslcDebug) console.log('dslc_module_options_box_shadow');\n  /**\n   * Value Change\n   */\n\n  jQuery(document).on('change', '.dslca-module-edit-option-box-shadow-hor, ' + '.dslca-module-edit-option-box-shadow-ver, .dslca-module-edit-option-box-shadow-blur, .dslca-module-edit-option-box-shadow-spread,' + ' .dslca-module-edit-option-box-shadow-color, .dslca-module-edit-option-box-shadow-inset', function () {\n    var boxShadowWrapper = jQuery(this).closest('.dslca-module-edit-option'),\n        boxShadowInput = boxShadowWrapper.find('.dslca-module-edit-field'),\n        boxShadowHor = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-hor').val(),\n        boxShadowVer = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-ver').val(),\n        boxShadowBlur = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-blur').val(),\n        boxShadowSpread = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-spread').val(),\n        boxShadowColor = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-color').val(),\n        boxShadowInset = boxShadowWrapper.find('.dslca-module-edit-option-box-shadow-inset').is(':checked');\n\n    if (boxShadowInset) {\n      boxShadowInset = ' inset';\n    } else {\n      boxShadowInset = '';\n    }\n\n    var boxShadowVal = boxShadowHor + 'px ' + boxShadowVer + 'px ' + boxShadowBlur + 'px ' + boxShadowSpread + 'px ' + boxShadowColor + boxShadowInset;\n    boxShadowInput.val(boxShadowVal).trigger('change');\n  });\n}\n/**\n * MODULES SETTINGS PANEL - Text Shadow Option Type\n */\n\n\nfunction dslc_module_options_text_shadow() {\n  if (window.dslcDebug) console.log('dslc_module_options_text_shadow');\n  /**\n   * Value Change\n   */\n\n  jQuery(document).on('change', '.dslca-module-edit-option-text-shadow-hor, .dslca-module-edit-option-text-shadow-ver,' + '.dslca-module-edit-option-text-shadow-blur, .dslca-module-edit-option-text-shadow-color', function () {\n    var textShadowWrapper = jQuery(this).closest('.dslca-module-edit-option'),\n        textShadowInput = textShadowWrapper.find('.dslca-module-edit-field'),\n        textShadowHor = textShadowWrapper.find('.dslca-module-edit-option-text-shadow-hor').val(),\n        textShadowVer = textShadowWrapper.find('.dslca-module-edit-option-text-shadow-ver').val(),\n        textShadowBlur = textShadowWrapper.find('.dslca-module-edit-option-text-shadow-blur').val(),\n        textShadowColor = textShadowWrapper.find('.dslca-module-edit-option-text-shadow-color').val();\n    var textShadowVal = textShadowHor + 'px ' + textShadowVer + 'px ' + textShadowBlur + 'px ' + textShadowColor;\n    textShadowInput.val(textShadowVal).trigger('change');\n  });\n}\n/**\n * MODULES SETTINGS PANEL - Color Option Type\n */\n\n\nfunction dslc_module_options_color(field) {\n  if (window.dslcDebug) console.log('dslc_module_options_color');\n  var dslcColorField, dslcAffectOnChangeEl, dslcAffectOnChangeRule, dslcColorFieldVal, dslcModule, dslcOptionID, dslcCurrColor;\n  /**\n   * Color Pallete.\n   *\n   * Last three selected colors get stored in the local storage\n   * of the browser under the key 'dslcColors-example.com'.\n   *\n   * Beside latest three custom colors, color palette includes\n   * three predefined/fixed colors: white, black and transparent.\n   */\n\n  var dslcColorPallete = [],\n      currStorage,\n      index;\n  var palleteCurrentDommain = 'dslcColors-' + document.domain; // Get three recent colors from the local storage.\n\n  if (undefined !== localStorage[palleteCurrentDommain]) {\n    currStorage = JSON.parse(localStorage[palleteCurrentDommain]);\n    dslcColorPallete = currStorage;\n  } // Set default colors if not enough custom colors. Should be six.\n\n\n  if (1 > dslcColorPallete.length) {\n    dslcColorPallete.push('#78b');\n  }\n\n  if (2 > dslcColorPallete.length) {\n    dslcColorPallete.push('#ab0');\n  }\n\n  if (3 > dslcColorPallete.length) {\n    dslcColorPallete.push('#de3');\n  } // Add the next \"fixed\" colors to the end of the pallete.\n\n\n  dslcColorPallete.push('#fff');\n  dslcColorPallete.push('#000');\n  dslcColorPallete.push('rgba(0,0,0,0)');\n  var query = field; // For each color picker input field.\n\n  jQuery(query).each(function () {\n    // Set setting the conotrol wrapper.\n    var wrapper = jQuery(this).closest('.dslca-color-option');\n    var input = jQuery(this);\n    dslcCurrColor = jQuery(this).val();\n    /**\n     * Init standard WP color pickers (Iris).\n     *\n     * See: http://automattic.github.io/Iris/\n     * See: https://github.com/23r9i0/wp-color-picker-alpha\n     */\n\n    input.wpColorPicker({\n      mode: 'hsl',\n      palettes: dslcColorPallete,\n      change: function change(event, ui) {\n        // @todo: get the code below into a separate function!\n        // The option field\n        dslcColorField = input;\n        var color = input.wpColorPicker('color'); // The new color\n\n        if (color == null) {\n          dslcColorFieldVal = '';\n        } else {\n          dslcColorFieldVal = color;\n        } // Change current value of option\n\n\n        dslcColorField.val(dslcColorFieldVal).trigger('change'); // Change input field background.\n\n        dslcColorField.css('background', dslcColorFieldVal); // Live change\n\n        dslcAffectOnChangeEl = dslcColorField.data('affect-on-change-el');\n        dslcAffectOnChangeRule = dslcColorField.data('affect-on-change-rule'); // ROWs doesn't have 'dslcAffectOnChangeEl' defined\n\n        if (null != dslcAffectOnChangeEl && '.dslca-modules-section-being-edited' !== dslcAffectOnChangeEl) {\n          jQuery(dslcAffectOnChangeEl, window.LiveComposer.Builder.PreviewAreaDocument.find('.dslca-module-being-edited')).css(dslcAffectOnChangeRule, dslcColorFieldVal);\n        } // Update option\n\n\n        dslcModule = jQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument);\n        dslcOptionID = dslcColorField.data('id');\n        jQuery('.dslca-module-option-front[data-id=\"' + dslcOptionID + '\"]', dslcModule).val(dslcColorFieldVal); // Add changed class\n\n        dslcModule.addClass('dslca-module-change-made');\n      }\n    });\n    var colorPickerPopup = wrapper.find('.wp-picker-holder .iris-picker');\n    colorPickerPopup.append('<button type=\"button\" class=\"dslca-colorpicker-apply\">Apply</button>');\n    var apply = wrapper.find('.dslca-colorpicker-apply');\n    input.wpColorPicker('open'); // If [APPLY] button clicked...\n\n    jQuery(apply).on('click', function () {\n      // If new color is not one of the \"fixed\" colors...\n      if ('#fff' !== dslcColorFieldVal && '#ffffff' !== dslcColorFieldVal && '#000' !== dslcColorFieldVal && '#000000' !== dslcColorFieldVal && 'rgba(0,0,0,0)' !== dslcColorFieldVal) {\n        // Update pallete colors in the local storage.\n        if (undefined === localStorage[palleteCurrentDommain]) {\n          // Create new record if no local storage found.\n          var newStorage = [dslcColorFieldVal];\n          localStorage[palleteCurrentDommain] = JSON.stringify(newStorage);\n        } else {\n          // Update existing record in the local storage.\n          var newStorage = JSON.parse(localStorage[palleteCurrentDommain]);\n\n          if (newStorage.indexOf(dslcColorFieldVal) == -1) {\n            // Add new color to the head of the pallete array.\n            newStorage.unshift(dslcColorFieldVal);\n\n            if (3 < newStorage.length) {\n              // Remove the last color from the pallete.\n              newStorage.pop();\n            }\n          }\n\n          localStorage[palleteCurrentDommain] = JSON.stringify(newStorage);\n        }\n      }\n\n      input.wpColorPicker('close');\n    }); // Save this element to destroy on panel closed.\n\n    window.LiveComposer.Builder.Helpers.colorpickers.push(jQuery(this));\n  });\n}\n/**\n * MODULES SETTINGS PANEL - Numeric Option Type\n */\n\n\nfunction dslc_module_options_numeric(fieldWrapper) {\n  if (window.dslcDebug) console.log('dslc_module_options_numeric');\n  var query = fieldWrapper; // || '.dslca-module-edit-option-slider';\n\n  jQuery(query).each(function () {\n    var controlWrapper = jQuery(this);\n    /* Create an empty div to be uses by jQuery as the slider container. */\n\n    if (0 === jQuery('.dslca-module-edit-field-slider', controlWrapper).length) {\n      controlWrapper.append('<div class=\"dslca-module-edit-field-slider\"></div>');\n    }\n\n    var workingWithModule = true;\n    /* Is the control part of the module setting panel or section settings? */\n\n    if (controlWrapper.hasClass('dslca-modules-section-edit-option')) {\n      // We are working with seciton.\n      workingWithModule = false;\n    } else {\n      // We are working with module.\n      workingWithModule = true;\n    }\n\n    if (workingWithModule) {\n      var sliderInput = controlWrapper.find('.dslca-module-edit-field');\n    } else {\n      var sliderInput = controlWrapper.find('.dslca-modules-section-edit-field');\n    }\n    /* Is the control part of the module setting panel or section settings? */\n\n\n    if (controlWrapper.hasClass('dslca-modules-section-edit-option')) {\n      // We are working with seciton.\n      var sliderInput = controlWrapper.find('.dslca-modules-section-edit-field');\n    } else {\n      // We are working with module.\n      var sliderInput = controlWrapper.find('.dslca-module-edit-field');\n    }\n\n    var sliderExt = '',\n        sliderControl = controlWrapper.find('.dslca-module-edit-field-slider'),\n        currentVal = parseFloat(sliderInput.val()),\n        // Max value. By default max is 100.\n    max = parseFloat(sliderInput.data('max')),\n        // Min value. By default min is 0.\n    min = parseFloat(sliderInput.data('min')),\n        // Increment value. By default increment is 1.\n    inc = parseFloat(sliderInput.data('increment')),\n        // Backup values.\n    max_orig = max,\n        min_orig = min;\n    /**\n     * Check if value can't be negative according to module settings.\n     */\n\n    var onlypositive = false;\n\n    if (undefined !== sliderInput.data('onlypositive') && 1 === sliderInput.data('onlypositive')) {\n      onlypositive = true;\n    }\n    /**\n     * If the current slider value gets to the max or min,\n     * we set new 'wider' max/min values.\n     *\n     * This way slider has no fixed top or bottom limit one one hand\n     * and works precise enough for both small and big values.\n     */\n\n\n    if (currentVal >= max) {\n      max = currentVal * 2;\n    }\n\n    if (!onlypositive && currentVal <= min) {\n      min = currentVal * 2;\n    }\n\n    sliderControl.slider({\n      min: min,\n      max: max,\n      step: inc,\n      value: sliderInput.val(),\n      slide: function slide(event, ui) {\n        sliderInput.val(ui.value + sliderExt);\n        sliderInput.trigger('change');\n      },\n      change: function change(event, ui) {\n        /**\n         * If the current slider value gets to the max or min,\n         * we reset the slider (destroy/call again) so script above\n         * set new bigger max/min values.\n         *\n         * This way slider has no top or bottom limit one one hand\n         * and precise enough for both small and big values.\n         */\n        if (ui.value >= max || ui.value <= min) {\n          sliderControl.slider(\"destroy\");\n          dslc_module_options_numeric(controlWrapper);\n        }\n      }\n      /*\n      stop: function( event, ui ) {\n      },\n      start: function( event, ui ) {\n      }\n      */\n\n    });\n    /**\n     * Once the slider initiated, show it in HTML.\n     * Slider control is hidden by default. We show it on hover only.\n     */\n\n    sliderControl.show();\n    /* On mouse leave: Remove empty DIV and destroy the slider. */\n\n    jQuery(controlWrapper).on('mouseleave', function () {\n      if (undefined !== sliderControl.slider('instance')) {\n        jQuery(sliderControl).slider('destroy');\n      }\n\n      sliderControl.remove();\n    });\n    if (sliderInput[0].classList.contains('slider-initiated')) return;\n    sliderInput[0].classList.add(\"slider-initiated\");\n    sliderInput.on('keyup', function (e) {\n      // In some rare cases we have the next error:\n      // TypeError: undefined is not an object (evaluating 'a.key.match')\n      if (undefined === e) {\n        return false;\n      } // Shift + Up/Down\n\n\n      if (e.shiftKey) {\n        if (e.keyCode == 38) {\n          this.value = (parseInt(this.value) || 0) + 9;\n          sliderInput.trigger('change');\n        }\n\n        if (e.keyCode == 40) {\n          this.value = parseInt(this.value) + 0 - 9;\n          sliderInput.trigger('change');\n        }\n      } // Backspace, \"-\"\n\n\n      if (e.keyCode == 8 || e.keyCode == 45) {\n        sliderInput.trigger('change');\n      } // If number key pressed\n\n\n      if (e.keyCode >= 48 && e.keyCode <= 57 || e.keyCode >= 96 && e.keyCode <= 105) {\n        sliderInput.trigger('change');\n      }\n\n      var charCode = e.which ? e.which : e.keyCode; //@todo more work here\n\n      if ((charCode >= 48 && charCode <= 57 || charCode >= 96 && charCode <= 105) && e.keyCode != 8 && e.keyCode != 39 && e.keyCode != 37 && e.keyCode != 46) {\n        return false;\n      }\n    }); // sliderInput.unbind('change');\n\n    sliderInput.on('change', function (e) {\n      if (onlypositive && this.value < 0) {\n        this.value = 0;\n      }\n\n      var containerWrapper;\n\n      if (workingWithModule) {\n        containerWrapper = jQuery(e.target.closest('.dslca-module-edit-option-slider'));\n      } else {\n        containerWrapper = jQuery(e.target.closest('.dslca-modules-section-edit-option-slider'));\n      }\n      /**\n       * Move the slider needle to reflect the value changes\n       * made via direct input of via keyboard arrow keys.\n       */\n\n\n      var currentSliderInstance = containerWrapper.find('.dslca-module-edit-field-slider');\n\n      if (undefined !== currentSliderInstance.slider('instance')) {\n        currentSliderInstance.slider('value', this.value);\n      }\n\n      if (workingWithModule) {\n        // Add changed class to the module.\n        var module = jQuery('.dslca-module-being-edited', window.LiveComposer.Builder.PreviewAreaDocument);\n        module.addClass('dslca-module-change-made');\n      }\n    });\n    return false;\n  }); // .each\n}\n\nfunction dslc_disable_responsive_view() {\n  jQuery('html').removeClass('dslc-responsive-preview');\n  jQuery('body').removeClass('dslc-res-big dslc-res-smaller-monitor dslc-res-phone dslc-res-tablet');\n}\n\nfunction dslc_filter_module_options(sectionID) {\n  dslc_module_options_section_filter(sectionID);\n}\n\nfunction dslc_confirm_changes(callback) {\n  dslc_module_options_confirm_changes(callback);\n}\n\nfunction dslc_cancel_changes(callback) {\n  dslc_module_options_cancel_changes(callback);\n}\n\nfunction dslc_init_colorpicker() {\n  dslc_module_options_color();\n}\n\nfunction dslc_init_options_slider() {\n  dslc_module_options_numeric();\n}\n\nfunction dslc_module_edit_options_hideshow_tabs() {\n  dslc_module_options_hideshow_tabs();\n}","/*********************************\n *\n * = TEMPLATES =\n *\n * - dslc_load_template ( Load Template )\n * - dslc_import_template ( Import Template )\n * - dslc_save_template ( Save TEmplate )\n * - dslc_delete_template ( Delete Template )\n *\n ***********************************/\nimport { sectionsInitJS } from './sections.js';\nimport { dragAndDropInit } from './dragndrop.js';\nimport { moduleareasInitJS } from './modulearea.js';\nimport { hideModal } from \"./modalwindow.js\";\n/**\n * TEMPLATES - Load\n */\n\nvar loadTemplateById = function loadTemplateById(template) {\n  if (window.dslcDebug) console.log('dslc_load_template'); // Vars\n\n  var dslcModule, dslcModuleID; // Template preloader\n\n  jQuery('#wpcontent').prepend('<div class=\"lc-template-loader\"></div>');\n  var block = '<div class=\"lc-loader lds-css\"><div class=\"lds-spinner\"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>';\n  jQuery('.lc-template-loader').prepend(block); // Ajax call to get template's HTML\n\n  jQuery.post(DSLCAjax.ajaxurl, {\n    action: 'dslc-ajax-load-template',\n    dslc: 'active',\n    dslc_template_id: template\n  }, function (response) {\n    // Apply the template's HTML\n    jQuery('#dslc-main', LiveComposer.Builder.PreviewAreaDocument).html(response.output);\n    jQuery('.lc-template-loader').remove(); // Call other functions\n\n    LiveComposer.Builder.PreviewAreaWindow.dslc_carousel(); // Check init for rows and module areas\n\n    sectionsInitJS();\n    moduleareasInitJS();\n    dragAndDropInit();\n    window.dslc_show_publish_button();\n    window.dslc_generate_code();\n  });\n};\n/**\n * TEMPLATES - Import\n */\n\n\nfunction dslc_template_import() {\n  if (window.dslcDebug) console.log('dslc_import_template'); // Vars\n\n  var dslcModule, dslcModuleID; // Hide the title on the button and show loading animation\n\n  jQuery('.dslca-modal-templates-import .dslca-modal-title').css({\n    opacity: 0\n  });\n  jQuery('.dslca-modal-templates-import .dslca-loading').show(); // Ajax call to load template's HTML\n\n  jQuery.post(DSLCAjax.ajaxurl, {\n    action: 'dslc-ajax-import-template',\n    dslc: 'active',\n    dslc_template_code: jQuery('#dslca-import-code').val()\n  }, function (response) {\n    // Apply the template's HTML\n    jQuery('#dslc-main', LiveComposer.Builder.PreviewAreaDocument).html(response.output); // Hide the loading on the button and show the title\n\n    jQuery('.dslca-modal-templates-import .dslca-loading').hide();\n    jQuery('.dslca-modal-templates-import .dslca-modal-title').css({\n      opacity: 1\n    }); // Hide the modal\n\n    hideModal('', '.dslca-modal-templates-import'); // Call other functions\n\n    LiveComposer.Builder.PreviewAreaWindow.dslc_bg_video();\n    dragAndDropInit();\n    window.dslc_show_publish_button();\n    window.dslc_generate_code();\n  });\n}\n/**\n * TEMPLATES - SAVE\n */\n\n\nfunction dslc_template_save() {\n  if (window.dslcDebug) console.log('dslc_save_template'); // AJAX call to save the template\n\n  jQuery.post(DSLCAjax.ajaxurl, {\n    action: 'dslc-ajax-save-template',\n    dslc: 'active',\n    dslc_template_code: jQuery('#dslca-code').val(),\n    dslc_template_title: jQuery('#dslca-save-template-title').val()\n  }, function (response) {\n    // Hide the modal\n    hideModal('', '.dslca-modal-templates-save');\n  });\n}\n/**\n * TEMPLATES - DELETE\n */\n\n\nfunction dslc_template_delete(template) {\n  if (window.dslcDebug) console.log('dslc_delete_template'); // AJAX call to delete template\n\n  jQuery.post(DSLCAjax.ajaxurl, {\n    action: 'dslc-ajax-delete-template',\n    dslc: 'active',\n    dslc_template_id: template\n  }, function (response) {\n    // Remove template from the template listing\n    jQuery('.dslca-template[data-id=\"' + template + '\"]').fadeOut(200, function () {\n      jQuery(this).remove();\n    });\n  });\n}\n/**\n * Deprecated Functions and Fallbacks\n */\n\n\nfunction dslc_import_template() {\n  dslc_template_import();\n}\n\nfunction dslc_save_template() {\n  dslc_template_save();\n}\n\nfunction dslc_delete_template(template) {\n  dslc_template_delete(template);\n}\n/**\n * TEMPLATES - Document Ready\n */\n\n\nexport var templatesPanelInit = function templatesPanelInit() {\n  /**\n   * Hook - Load Template\n   */\n  var templateItem = document.querySelectorAll('.dslca-template'); // Attach import function to each template item.\n\n  templateItem.forEach(function (element) {\n    element.addEventListener('click', function (event) {\n      event.preventDefault();\n      var importButton = event.target.closest(\"[data-id]\");\n      loadTemplateById(importButton.dataset.id);\n    });\n  });\n  /**\n   * Hook - Import Template\n   */\n\n  jQuery('.dslca-template-import-form').submit(function (e) {\n    e.preventDefault();\n    dslc_template_import();\n  });\n  /**\n   * Hook - Save Template\n   */\n\n  jQuery('.dslca-template-save-form').submit(function (e) {\n    e.preventDefault();\n    dslc_template_save();\n  });\n  /**\n   * Hook - Delete Template\n   */\n\n  jQuery(document).on('click', '.dslca-delete-template-hook', function (e) {\n    e.stopPropagation();\n    dslc_template_delete(jQuery(this).data('id'));\n  });\n};","/*********************************\n *\n * = UI - GENERAL =\n *\n * - dslc_hide_composer ( Hides the composer elements )\n * - dslc_show_composer ( Shows the composer elements )\n * - dslc_show_publish_button ( Shows the publish button )\n * - dslc_show_section now showSection ( Show a specific section )\n * - dslc_generate_filters ( Generate origin filters )\n * - dslc_filter_origin ( Origin filtering for templates/modules listing )\n * - dragAndDropInit ( Initiate drag and drop functionality )\n ***********************************/\nimport { elementOptionsTabs } from './settings.panel.js';\nimport { CModalWindow } from './modalwindow.class.js';\nimport Sortable from 'sortablejs';\n/**\n * Try to detect JS errors in WP Admin part.\n */\n\nwindow.onerror = function (error, file, line, char) {\n  dslca_generate_error_report(error, file, line, char);\n};\n/**\n * Hook - Open Error Log button\n */\n\n\njQuery(document).on('click', '.dslca-show-js-error-hook', function (e) {\n  e.preventDefault();\n  var errors_container = document.getElementById('dslca-js-errors-report');\n\n  if (!jQuery('body').hasClass('dslca-saving-in-progress')) {\n    CModalWindow({\n      title: '<a href=\"https://livecomposerplugin.com/support/\" target=\"_blank\"><span class=\"dslca-icon dslc-icon-comment\"></span> &nbsp; Get Support Info</a>',\n      content: '<span class=\"dslca-error-report\">' + errors_container.value + '</span>'\n    });\n  }\n});\n/**\n * UI - GENERAL - Document Ready\n */\n\njQuery(document).ready(function ($) {\n  /**\n   * Try to detect JS errors in preview area.\n   */\n  jQuery(\"#page-builder-frame\")[0].contentWindow.onerror = function (error, file, line, char) {\n    dslca_generate_error_report(error, file, line, char);\n  }; // Put JS error log data in a hidden textarea.\n\n\n  dslca_update_report_log();\n  jQuery('body').addClass('dslca-enabled dslca-drag-not-in-progress');\n  jQuery('.dslca-invisible-overlay').hide();\n  jQuery('.dslca-section').eq(0).show();\n});\n/**\n * Action - \"Currently Editing\" scroll on click\n */\n\njQuery(document).on('click', '.dslca-currently-editing', function () {\n  var activeElement = false,\n      newOffset = false,\n      outlineColor;\n\n  if (jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).length) {\n    activeElement = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument);\n    outlineColor = '#5890e5';\n  } else if (jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument).length) {\n    activeElement = jQuery('.dslca-modules-section-being-edited', LiveComposer.Builder.PreviewAreaDocument);\n    outlineColor = '#eabba9';\n  }\n\n  if (activeElement) {\n    newOffset = activeElement.offset().top - 100;\n\n    if (newOffset < 0) {\n      newOffset = 0;\n    }\n\n    var callbacks = [];\n    jQuery('html, body', LiveComposer.Builder.PreviewAreaDocument).animate({\n      scrollTop: newOffset\n    }, 300, function () {\n      activeElement.removeAttr('style');\n    });\n  }\n});\n/**\n * Save composer code with CMD+S or Ctrl+S\n */\n\njQuery(window).keypress(function (e) {\n  if ((e.metaKey || e.ctrlKey) && e.keyCode == 83) {\n    dslc_ajax_save_composer();\n    e.preventDefault();\n    return false;\n  }\n});\n/**\n * Hook - Hide Composer\n */\n\njQuery(document).on('click', '.dslca-hide-composer-hook', function (e) {\n  e.preventDefault();\n  dslc_hide_composer();\n});\n/**\n * Hook - Show Composer\n */\n\njQuery(document).on('click', '.dslca-show-composer-hook', function (e) {\n  e.preventDefault();\n  dslc_show_composer();\n});\n/**\n * Hook - Section Show - Modules Listing\n */\n\njQuery(document).on('click', '.dslca-go-to-modules-hook', function (e) {\n  e.preventDefault();\n  showSection('.dslca-modules');\n});\n/**\n * Hook - Section Show - Dynamic\n */\n\njQuery(document).on('click', '.dslca-go-to-section-hook', function (e) {\n  e.preventDefault(); // Do nothing if clicked on active tab\n\n  if (jQuery(this).hasClass('dslca-active')) {\n    return;\n  }\n\n  var sectionTitle = jQuery(this).data('section');\n  showSection(sectionTitle);\n\n  if (jQuery(this).hasClass('dslca-go-to-section-modules') || jQuery(this).hasClass('dslca-go-to-section-templates')) {\n    jQuery(this).addClass('dslca-active').siblings('.dslca-go-to-section-hook').removeClass('dslca-active');\n  }\n});\n/**\n * Hook - Close Composer\n */\n\njQuery(document).on('click', '.dslca-close-composer-hook', function (e) {\n  e.preventDefault();\n  var redirect_url = jQuery(this).attr('href');\n\n  if (!jQuery('body').hasClass('dslca-saving-in-progress') && jQuery('.dslca-save-composer').is(':visible')) {\n    // Show warning if changes weren't saved.\n    CModalWindow({\n      title: DSLCString.str_exit_title,\n      content: DSLCString.str_exit_descr,\n      confirm: function confirm() {\n        window.location = redirect_url;\n      }\n    });\n  } else {\n    window.location = redirect_url;\n  }\n});\n/**\n * Submit Form\n */\n\njQuery(document).on('click', '.dslca-submit', function () {\n  jQuery(this).closest('form').submit();\n});\n/**\n * Hook - Show Origin Filters\n */\n\njQuery(document).on('click', '.dslca-section-title', function (e) {\n  e.stopPropagation();\n\n  if (jQuery('.dslca-section-title-filter', this).length) {\n    dslc_generate_filters(); // Open filter panel\n\n    jQuery('.dslca-section-title-filter-options').slideToggle(300);\n  }\n});\n/**\n * Hook - Apply Filter Origin\n */\n\njQuery(document).on('click', '.dslca-section-title-filter-options a', function (e) {\n  e.preventDefault();\n  e.stopPropagation();\n  var origin = jQuery(this).data('origin');\n  var section = jQuery(this).closest('.dslca-section');\n\n  if (section.hasClass('dslca-templates-load')) {\n    jQuery('.dslca-section-title-filter-curr', section).text(jQuery(this).text());\n  } else {\n    jQuery('.dslca-section-title-filter-curr', section).text(jQuery(this).text());\n  }\n\n  jQuery('.dslca-section-scroller-inner').css({\n    left: 0\n  });\n  dslc_filter_origin(origin, section); // Close filter panel\n\n  jQuery('.dslca-section-title-filter-options').slideToggle(300);\n});\n/**\n * UI - GENERAL - Hide Composer\n */\n\nfunction dslc_hide_composer() {\n  if (window.dslcDebug) console.log('dslc_hide_composer'); // Hide \"hide\" button and show \"show\" button\n\n  jQuery('.dslca-hide-composer-hook').hide();\n  jQuery('.dslca-show-composer-hook').show(); // Add class to know it's hidden\n\n  jQuery('body').addClass('dslca-composer-hidden');\n  jQuery('body', LiveComposer.Builder.PreviewAreaDocument).addClass('dslca-composer-hidden');\n  LiveComposer.Builder.Flags.uiHidden = true; // Hide ( animation ) the main composer area ( at the bottom )\n\n  jQuery('.dslca-container').css({\n    bottom: jQuery('.dslca-container').outerHeight() * -1\n  }); // Hide the header  part of the main composer area ( at the bottom )\n\n  jQuery('.dslca-header').hide();\n}\n/**\n * UI - GENERAL - Show Composer\n */\n\n\nfunction dslc_show_composer() {\n  if (window.dslcDebug) console.log('dslc_show_composer'); // Hide the \"show\" button and show the \"hide\" button\n\n  jQuery('.dslca-show-composer-hook').hide();\n  jQuery('.dslca-hide-composer-hook').show(); // Remove the class from the body so we know it's not hidden\n\n  jQuery('body').removeClass('dslca-composer-hidden');\n  jQuery('body', LiveComposer.Builder.PreviewAreaDocument).removeClass('dslca-composer-hidden');\n  LiveComposer.Builder.Flags.uiHidden = false; // Show ( animate ) the main composer area ( at the bottom )\n\n  jQuery('.dslca-container').css({\n    bottom: 0\n  }); // Show the header of the main composer area ( at the bottom )\n\n  jQuery('.dslca-header').show();\n}\n/**\n * UI - GENERAL - Show Publish Button\n */\n\n\nwindow.dslc_show_publish_button = function () {\n  if (window.dslcDebug) console.log('dslc_show_publish_button');\n  jQuery('.dslca-save-composer').show().addClass('dslca-init-animation');\n  jQuery('.dslca-save-draft-composer').show().addClass('dslca-init-animation');\n};\n\nexport var hidePublishButton = function hidePublishButton() {\n  if (window.dslcDebug) console.log('hidePublishButton');\n  jQuery('.dslca-save-composer').hide();\n  jQuery('.dslca-save-draft-composer').hide();\n};\n/**\n * UI - GENERAL - Show Section\n */\n\nexport var showSection = function showSection(section) {\n  if (window.dslcDebug) console.log('showSection'); // Add class to body so we know it's in progress\n  // jQuery('body').addClass('dslca-anim-in-progress');\n  // Get vars\n\n  var sectionTitle = jQuery(section).data('title'),\n      newColor = jQuery(section).data('bg'); // Hide ( animate ) the container\n\n  jQuery('.dslca-container').css({\n    bottom: -500\n  }); // Hide all sections and show specific section\n\n  jQuery('.dslca-section').hide();\n  jQuery(section).show(); // Change \"currently editing\"\n\n  if (section == '.dslca-module-edit') {\n    jQuery('.dslca-currently-editing').show().find('strong').text(jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument).attr('title') + ' element');\n  } else if (section == '.dslca-modules-section-edit') {\n    jQuery('.dslca-currently-editing').show().css('background-color', '#e5855f').find('strong').text('Row');\n  } else {\n    jQuery('.dslca-currently-editing').hide().find('strong').text('');\n  } // Filter module option tabs\n\n\n  elementOptionsTabs(); // Show ( animate ) the container\n  // setTimeout( function() {\n\n  jQuery('.dslca-container').css({\n    bottom: 0\n  }); // }, 300 );\n  // Remove class from body so we know it's finished\n  // jQuery('body').removeClass('dslca-anim-in-progress');\n  // Set initial background color for the color picker fields\n  // Fixes the bug with section color pickers to keep values from the previously\n  // edited section.\n\n  jQuery(section).find('input.dslca-module-edit-field-colorpicker').each(function (item) {\n    jQuery(this).css('background', jQuery(this).val());\n  });\n};\n/**\n * UI - GENERAL - Generate Origin Filters\n */\n\nfunction dslc_generate_filters() {\n  if (window.dslcDebug) console.log('dslc_generate_filters'); // Vars\n\n  var el,\n      filters = [],\n      filtersHTML = '<a html=\"#\" data-origin=\"\">Show All</a>',\n      els = jQuery('.dslca-section:visible .dslca-origin'); // Go through each and generate the filters\n\n  els.each(function () {\n    el = jQuery(this);\n\n    if (jQuery.inArray(el.data('origin'), filters) == -1) {\n      filters.push(el.data('origin'));\n      filtersHTML += '<a href=\"#\" data-origin=\"' + el.data('origin') + '\">' + el.data('origin') + '</a>';\n    }\n  });\n  jQuery('.dslca-section:visible .dslca-section-title-filter-options').html(filtersHTML).css('background', jQuery('.dslca-section:visible').data('bg'));\n}\n/**\n * UI - GENERAL - Origin Filter\n */\n\n\nfunction dslc_filter_origin(origin, section) {\n  if (window.dslcDebug) console.log('dslc_filter_origin');\n  jQuery('.dslca-origin', section).attr('data-display-module', 'false');\n  jQuery('.dslca-origin[data-origin=\"' + origin + '\"]', section).attr('data-display-module', 'true');\n\n  if (origin == '') {\n    jQuery('.dslca-origin', section).attr('data-display-module', 'true');\n    jQuery('.dslca-origin.dslca-exclude', section).attr('data-display-module', 'false');\n  }\n}\n/**\n * Prevent drag and drop of the modules\n * into the inner content areas of the other modules\n */\n\n\nexport var fixContenteditable = function fixContenteditable() {\n  window.LiveComposer.Builder.PreviewAreaDocument.on('dragstart', '.dslca-module, .dslc-module-front, .dslc-modules-area, .dslc-modules-section', function (e) {\n    jQuery('[contenteditable]', window.LiveComposer.Builder.PreviewAreaDocument).attr('contenteditable', false);\n  });\n  window.LiveComposer.Builder.PreviewAreaDocument.on('dragend mousedown', '.dslca-module, .dslc-module-front, .dslc-modules-area, .dslc-modules-section', function (e) {\n    jQuery('[contenteditable]', window.LiveComposer.Builder.PreviewAreaDocument).attr('contenteditable', true);\n  });\n};\n/**\n * Disable/Enable module control.\n *\n * @param  {string} control_id CSS ID of the control we are toggling\n * @return {void}\n */\n\nfunction dslc_toogle_control(control_id) {\n  if (control_id === undefined) control_id = false;\n  if (!control_id) return;\n  var control = jQuery('.dslca-module-edit-option-' + control_id);\n  var control_storage = control.find('.dslca-module-edit-field'); // Get the element we are editing\n\n  var module = jQuery('.dslca-module-being-edited', LiveComposer.Builder.PreviewAreaDocument); // Get the element id\n\n  var module_id = module[0].id;\n  var responsive_prefix = '';\n\n  if ('tablet_responsive' === control.data('tab')) {\n    responsive_prefix = 'body.dslc-res-tablet ';\n  } else if ('phone_responsive' === control.data('tab')) {\n    responsive_prefix = 'body.dslc-res-phone ';\n  }\n\n  var affect_on_change_el = control_storage.data('affect-on-change-el');\n  if (affect_on_change_el === undefined) return;\n  var affect_on_change_elmts = affect_on_change_el.split(',');\n  affect_on_change_el = ''; // Loop through elements (useful when there are multiple elements)\n\n  for (var i = 0; i < affect_on_change_elmts.length; i++) {\n    if (i > 0) {\n      affect_on_change_el += ', ';\n    }\n\n    affect_on_change_el += responsive_prefix + '#' + module_id + ' ' + affect_on_change_elmts[i];\n  }\n\n  var affect_on_change_rule = control_storage.data('affect-on-change-rule').replace(/ /g, '');\n  var affect_on_change_rules = affect_on_change_rule.split(',');\n  var control_value;\n  var control_data_ext = control_storage.data('ext');\n  control.toggleClass('dslca-option-off');\n\n  if (control.hasClass('dslca-option-off')) {\n    // Disable\n    control_value = dslc_get_control_value(control_id); // Temporary backup the current value as data attribute\n\n    control_storage.data('val-bckp', control_value); // control_value = dslc_combine_value_and_extension( control_value, control_data_ext);\n    // Loop through rules (useful when there are multiple rules)\n\n    for (var i = 0; i < affect_on_change_rules.length; i++) {\n      // remove css rule in element inline style\n      jQuery(affect_on_change_el, LiveComposer.Builder.PreviewAreaDocument).css(affect_on_change_rules[i], ''); // remove css rule in css block\n\n      disable_css_rule(affect_on_change_el, affect_on_change_rules[i], module_id); // PROBLEM do not work with multiply rules ex.: .dslc-text-module-content,.dslc-text-module-content p\n    }\n\n    control_storage.val('').trigger('change');\n  } else {\n    // Enable\n    // Restore value of the data backup attribute\n    control_storage.val(control_storage.data('val-bckp')).trigger('change');\n    control_value = dslc_get_control_value(control_id);\n    control_value = dslc_combine_value_and_extension(control_value, control_data_ext || ''); // Loop through rules (useful when there are multiple rules)\n\n    for (var i = 0; i < affect_on_change_rules.length; i++) {\n      var styleContent = affect_on_change_el + \"{\" + affect_on_change_rules[i] + \": \" + control_value + \"}\";\n      LiveComposer.Builder.Helpers.processInlineStyleTag({\n        context: control,\n        rule: affect_on_change_rules[i],\n        elems: affect_on_change_el.replace(new RegExp('#' + module_id, 'gi'), '').trim(),\n        styleContent: styleContent\n      });\n    }\n  }\n}\n\njQuery(document).ready(function ($) {\n  // Option Control Toggle\n  jQuery(document).on('click', '.dslca-module-edit-option .dslc-control-toggle', function (e) {\n    e.preventDefault();\n    var control_id = jQuery(e.target).closest('.dslca-module-edit-option').find('.dslca-module-edit-field').data('id');\n    dslc_toogle_control(control_id);\n  }); // Disable Toggle If the Control Focused\n\n  jQuery(document).on('mousedown', '.dslca-module-edit-option', function (e) {\n    var toggle = jQuery('.dslc-control-toggle');\n\n    if (!toggle.is(e.target) // if the target of the click isn't the container...\n    && toggle.has(e.target).length === 0) // ... nor a descendant of the container\n      {\n        if (jQuery(e.target).closest('.dslca-module-edit-option').hasClass('dslca-option-off')) {\n          var control_id = jQuery(e.target).closest('.dslca-module-edit-option').find('.dslca-module-edit-field').data('id');\n          dslc_toogle_control(control_id);\n        }\n      }\n  });\n});\n\nfunction disable_css_rule(selectorCSS, ruleCSS, moduleID) {\n  var cssRules;\n  var target_stylsheet_ID = 'css-for-' + moduleID;\n  var stylesheet = document.getElementById('page-builder-frame').contentWindow.document.getElementById(target_stylsheet_ID);\n  selectorCSS = selectorCSS.replace(/\\s\\s+/g, ' ');\n\n  if (stylesheet) {\n    stylesheet = stylesheet.sheet;\n\n    if (stylesheet['rules']) {\n      cssRules = 'rules';\n    } else if (stylesheet['cssRules']) {\n      cssRules = 'cssRules';\n    } else {} //no rules found... browser unknown\n    // Go through each CSS rule (ex.: .content h1 {...})\n\n\n    for (var R = 0; R < stylesheet[cssRules].length; R++) {\n      // Is current CSS rule equal to the selectorCSS we are looking for?\n      // (ex.: '.content h1' == '.content h1' )\n      if (stylesheet[cssRules][R].selectorText == selectorCSS) {\n        // Get CSS property we are looking for... (ex.: font-size : ...; )\n        if (stylesheet[cssRules][R].style[ruleCSS]) {\n          stylesheet[cssRules][R].style[ruleCSS] = '';\n          break;\n        }\n      }\n    }\n  }\n}\n\nfunction dslc_combine_value_and_extension(value, extension) {\n  if ('' === value || null === value) {\n    return value;\n  } // Check if value do not already include extension\n\n\n  if (value.indexOf(extension) == -1) {\n    value = value + extension;\n  }\n\n  return value;\n}\n\nfunction dslc_get_control_value(control_id) {\n  var control = jQuery('.dslca-module-edit-option-' + control_id);\n  var control_type = 'text';\n  var control_storage = control.find('.dslca-module-edit-field');\n  var value;\n  /*\n  \tif ( control.hasClass('dslca-module-edit-option-select') ) {\n  \n  \t} else {\n  \t\t// text based controls\n  \t\tvalue = control_storage.val();\n  \t}\n  */\n\n  value = control_storage.val();\n  return value;\n}\n/**\n * Bind keypress events with both parent and iframe pages.\n * Function called when content inside iframe is loaded.\n *\n * @return {void}\n */\n\n\nexport var keypressEvents = function keypressEvents() {\n  jQuery([document, LiveComposer.Builder.PreviewAreaWindow.document]).unbind('keydown').bind('keydown', function (keydown_event) {\n    // Modal window [ESC]/[Enter]\n    window.dslc_modal_keypress_events(keydown_event); // Prevent backspace from navigating back\n\n    dslc_disable_backspace_navigation(keydown_event); // Prompt Modal on F5\n\n    dslc_notice_on_refresh(keydown_event); // Save Page\n\n    dslc_save_page(keydown_event);\n  });\n};\n/**\n * Action - Prevent backspace from navigating back\n */\n\nfunction dslc_disable_backspace_navigation(event) {\n  var doPrevent = false;\n\n  if (event.keyCode === 8) {\n    var d = event.srcElement || event.target;\n\n    if (d.tagName.toUpperCase() === 'INPUT' && (d.type.toUpperCase() === 'TEXT' || d.type.toUpperCase() === 'PASSWORD' || d.type.toUpperCase() === 'NUMBER' || d.type.toUpperCase() === 'FILE') || d.tagName.toUpperCase() === 'TEXTAREA' || jQuery(d).hasClass('dslca-editable-content') || jQuery(d).hasClass('dslc-tabs-nav-hook-title') || jQuery(d).hasClass('dslc-accordion-title')) {\n      doPrevent = d.readOnly || d.disabled;\n    } else {\n      doPrevent = true;\n    }\n  }\n\n  if (doPrevent) {\n    event.preventDefault();\n  }\n}\n/**\n * Actions - Prompt Modal on F5\n *\n * 116 – F5\n * 81 + event.metaKey = CMD + R\n */\n\n\nfunction dslc_notice_on_refresh(e) {\n  if (e.which == 116 || e.which === 82 && e.metaKey) {\n    if (jQuery('.dslca-save-composer-hook').offsetParent !== null || jQuery('.dslca-module-edit-save').offsetParent !== null) {\n      e.preventDefault();\n      CModalWindow({\n        title: DSLCString.str_refresh_title,\n        content: DSLCString.str_refresh_descr,\n        confirm: function confirm() {\n          window.location.reload();\n        }\n      });\n      /*dslc_js_confirm( 'disable_lc', '<span class=\"dslca-prompt-modal-title\">' + DSLCString.str_refresh_title +\n       '</span><span class=\"dslca-prompt-modal-descr\">' + DSLCString.str_refresh_descr + '</span>', document.URL );*/\n    }\n  }\n}\n/**\n * If Control or Command key is pressed and the S key is pressed run dslc_save_composer.\n * 83 is the key code for S.\n */\n\n\nfunction dslc_save_page(e) {\n  if (e.which == 83 && (e.metaKey || e.ctrlKey)) {\n    if (jQuery('.dslca-save-composer-hook').css('display') == 'block') {\n      dslc_save_composer();\n      e.preventDefault();\n      return false;\n    }\n  }\n}\n/**\n * Generate report about JS error and save it in a local storage.\n * @param  String error Error text\n * @param  String file  File with error\n * @param  String line  Line with error\n * @param  String char  Column with error\n * @return void\n */\n\n\nfunction dslca_generate_error_report(error, file, line, char) {\n  var title = 'JavaScript error detected in a third-party plugin';\n\n  if (file.match(\"wp-content\\/plugins\\/live-composer-page-builder\\/js\") != null) {\n    title = 'Live Composer returned JS error';\n  }\n\n  var error_report = '';\n  error_report += '<br /><strong style=\"color:#E55F5F;\">' + title + '</strong><br />';\n  error_report += error + '<br /> File \"' + file + '\", line ' + line + ', char ' + char + '<br />';\n\n  if ('undefined' !== typeof Storage) {\n    localStorage.setItem('js_errors_report', error_report);\n  }\n}\n/**\n * Put in a hidden div#dslca-js-errors-report information from local storage\n * @return void\n */\n\n\nfunction dslca_update_report_log() {\n  var errors_container = document.getElementById('dslca-js-errors-report');\n  var error_report = localStorage.getItem('js_errors_report');\n\n  if (null !== error_report) {\n    errors_container.value = error_report;\n    localStorage.removeItem('js_errors_report');\n    document.querySelector('.dslca-show-js-error-hook').setAttribute('style', 'visibility:visible');\n  }\n} // ============================================================\n\n\njQuery(document).on('editorFrameLoaded', function () {\n  var $ = jQuery;\n  var headerFooter = jQuery('div[data-hf]', LiveComposer.Builder.PreviewAreaDocument);\n  var overlay = '';\n  headerFooter.each(function (index, el) {\n    var linkToEdit = jQuery(el).data('editing-link');\n    var hfType = jQuery(el).data('editing-type');\n    var editingLabel = jQuery(el).data('editing-label');\n    var editingSubLabel = jQuery(el).data('editing-sublabel');\n    overlay += '<div class=\"dslc-hf-block-overlay\"><a target=\"_blank\" href=\"' + linkToEdit + '\" class=\"dslc-hf-block-overlay-button dslca-link\">' + editingLabel + '</a>';\n\n    if (editingSubLabel !== undefined) {\n      overlay += ' <span class=\"dslc-hf-block-overlay-text\">' + editingSubLabel + '</span>';\n    }\n\n    overlay += '</div>';\n    var htmlObject = document.createElement('div');\n    htmlObject.innerHTML = overlay;\n    el.append(htmlObject);\n  });\n});","/**\n * Custom utils\n */\n'use strict';\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar Utils = {\n  addslashes: function addslashes(str) {\n    str = str.replace(/\\\\/g, '\\\\\\\\');\n    str = str.replace(/\\'/g, '\\\\\\'');\n    str = str.replace(/\\\"/g, '\\\\\"');\n    str = str.replace(/\\0/g, '\\\\0');\n    return str;\n  },\n  basename: function basename(path) {\n    return path.split(/[\\\\/]/).pop();\n  },\n\n  /**\n   * Check if browser is IE\n   */\n  msieversion: function msieversion() {\n    var ua = window.navigator.userAgent;\n    var msie = ua.indexOf(\"MSIE \");\n\n    if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\\:11\\./)) // If Internet Explorer, return version number\n      {\n        return parseInt(ua.substring(msie + 5, ua.indexOf(\".\", msie)));\n      } else // If another browser, return 0\n      {\n        return false;\n      }\n  },\n\n  /**\n   * Check if variables in array is desired types\n   * @param  {array} array\n   * @return {boolean}\n   */\n  checkParams: function checkParams(array) {\n    if (!Array.isArray(array)) {\n      throw 'Param is not array';\n    } /// Instead of switch construction\n\n\n    var types = {\n      integer: function integer(param) {\n        return isNaN(parseInt(param));\n      },\n      float: function float(param) {\n        return isNaN(parseFloat(param));\n      },\n      string: function string(param) {\n        return param != null && param != undefined && typeof param == 'string';\n      },\n      array: function array(param) {\n        return Array.isArray(param);\n      },\n      object: function object(param) {\n        return _typeof(param) == 'object';\n      } /// Check it!\n\n    };\n    array.map(function (item) {\n      if (!types[item[1]](item[0])) {\n        throw 'Param ' + item[0] + ' is not ' + item[1];\n      }\n    });\n  },\n\n  /**\n   * Converts UTF-8 to base64\n   *\n   * @param  {string} t utf-8\n   * @return {string}   b64\n   */\n  utf8_to_b64: function utf8_to_b64(t) {\n    return window.btoa(unescape(encodeURIComponent(t)));\n  },\n\n  /**\n   * Converts base64 to UTF-8\n   *\n   * @param  {string} str in b64\n   * @return {string}   in utf-8\n   */\n  b64_to_utf8: function b64_to_utf8(str) {\n    return decodeURIComponent(escape(window.atob(str)));\n  },\n\n  /**\n   * Get Page Params\n   *\n   * @return {array}\n   */\n  get_page_params: function get_page_params() {\n    return decodeURIComponent(window.location.search.slice(1)).split('&').reduce(function _reduce(a, b) {\n      b = b.split('=');\n      a[b[0]] = b[1];\n      return a;\n    }, {});\n  },\n  get_unique_id: function get_unique_id() {\n    return Math.random().toString(32).slice(2);\n  },\n\n  /**\n   * Update module option in raw JSON code (dslc_code) of the module\n   *\n   * @param  {DOM element} module    Module Element\n   * @param  {string} property_name  Name of the option we change\n   * @param  {string} property_value Value of the option we change\n   * @return {void}\n   */\n  update_module_property_raw: function update_module_property_raw(module, property_name, property_value) {\n    // Hidden textarea element with raw base64 code of the module\n    // <textarea class=\"dslca-module-code\">YTo2On....iOjE7fQ==</textarea>\n    var module_code_container = module.getElementsByClassName('dslca-module-code')[0]; // Hidden textarea element with value of this particular setting\n    // <textarea data-id=\"property_name\">property_value</textarea>\n\n    var property_container = module.querySelector('.dslca-module-option-front[data-id=\"' + property_name + '\"]'); // Get module raw code\n\n    var module_code = module_code_container.value;\n    module_code = JSON.parse(module_code);\n    module_code[property_name] = property_value;\n    module_code = JSON.stringify(module_code); // Update raw code\n\n    module_code_container.value = module_code;\n    module_code_container.innerHTML = module_code; // See comment block below\n    // Change the property in hidden textarea as well\n\n    property_container.value = property_value;\n    property_container.innerHTML = property_value; // See comment block below\n\n    /**\n     * FireFox will not duplicate textarea value properly using .cloneNode(true)\n     * if we don't use .innerHTML statement (Chrome works fine with .value only).\n     *\n     * See bug report: https://bugzilla.mozilla.org/show_bug.cgi?id=237783\n     */\n  },\n\n  /**\n   * Update section option in raw JSON code (dslc_code) of the section\n   *\n   * @param  {DOM element} section    `section Element\n   * @param  {string} property_name  Name of the option we change\n   * @param  {string} property_value Value of the option we change\n   * @return {void}\n   */\n  update_section_property_raw: function update_section_property_raw(section, property_name, property_value) {\n    // Hidden textarea element with raw base64 code of the roq\n    // <textarea class=\"dslca-section-code\"></textarea>\n    var section_code_container = section.getElementsByClassName('dslca-section-code')[0]; // Hidden input element with value of this particular setting\n    // <input data-id=\"property_name\">property_value</textarea>\n\n    var property_container = section.querySelector('.dslca-modules-section-settings input[data-id=\"' + property_name + '\"]'); // Get module raw code\n\n    var section_code = section_code_container.value;\n    section_code = JSON.parse(section_code);\n    section_code[property_name] = property_value;\n    section_code = JSON.stringify(section_code); // Update raw code\n\n    section_code_container.value = section_code;\n    section_code_container.innerHTML = section_code; // See comment block below\n    // Change the property in hidden textarea as well\n\n    property_container.setAttribute('value', property_value);\n    property_container.setAttribute('data-def', property_value);\n  },\n\n  /**\n   * Provide custom events publish.\n   * Also echoes all the custom events in the preview iframe as well.\n   *\n   * @param  {string} eventName\n   * @param  {object||string||null||numeric} eventData [description]\n   */\n  publish: function publish(eventName, eventData) {\n    eventData = eventData ? eventData : {};\n    this.checkParams([[eventName, 'string'], [eventData, 'object']]);\n    jQuery(document).trigger({\n      type: eventName,\n      message: {\n        details: eventData\n      }\n    });\n    LiveComposer.Builder.PreviewAreaWindow.dslca_publish_event(eventName, eventData);\n  }\n};\nexport var untilsInitJs = function untilsInitJs() {\n  window.LiveComposer.Utils = Utils;\n};","/*\n * anime.js v3.0.1\n * (c) 2019 Julian Garnier\n * Released under the MIT license\n * animejs.com\n */\n\n// Defaults\n\nvar defaultInstanceSettings = {\n  update: null,\n  begin: null,\n  loopBegin: null,\n  changeBegin: null,\n  change: null,\n  changeComplete: null,\n  loopComplete: null,\n  complete: null,\n  loop: 1,\n  direction: 'normal',\n  autoplay: true,\n  timelineOffset: 0\n};\n\nvar defaultTweenSettings = {\n  duration: 1000,\n  delay: 0,\n  endDelay: 0,\n  easing: 'easeOutElastic(1, .5)',\n  round: 0\n};\n\nvar validTransforms = ['translateX', 'translateY', 'translateZ', 'rotate', 'rotateX', 'rotateY', 'rotateZ', 'scale', 'scaleX', 'scaleY', 'scaleZ', 'skew', 'skewX', 'skewY', 'perspective'];\n\n// Caching\n\nvar cache = {\n  CSS: {},\n  springs: {}\n};\n\n// Utils\n\nfunction minMax(val, min, max) {\n  return Math.min(Math.max(val, min), max);\n}\n\nfunction stringContains(str, text) {\n  return str.indexOf(text) > -1;\n}\n\nfunction applyArguments(func, args) {\n  return func.apply(null, args);\n}\n\nvar is = {\n  arr: function (a) { return Array.isArray(a); },\n  obj: function (a) { return stringContains(Object.prototype.toString.call(a), 'Object'); },\n  pth: function (a) { return is.obj(a) && a.hasOwnProperty('totalLength'); },\n  svg: function (a) { return a instanceof SVGElement; },\n  inp: function (a) { return a instanceof HTMLInputElement; },\n  dom: function (a) { return a.nodeType || is.svg(a); },\n  str: function (a) { return typeof a === 'string'; },\n  fnc: function (a) { return typeof a === 'function'; },\n  und: function (a) { return typeof a === 'undefined'; },\n  hex: function (a) { return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a); },\n  rgb: function (a) { return /^rgb/.test(a); },\n  hsl: function (a) { return /^hsl/.test(a); },\n  col: function (a) { return (is.hex(a) || is.rgb(a) || is.hsl(a)); },\n  key: function (a) { return !defaultInstanceSettings.hasOwnProperty(a) && !defaultTweenSettings.hasOwnProperty(a) && a !== 'targets' && a !== 'keyframes'; }\n};\n\n// Easings\n\nfunction parseEasingParameters(string) {\n  var match = /\\(([^)]+)\\)/.exec(string);\n  return match ? match[1].split(',').map(function (p) { return parseFloat(p); }) : [];\n}\n\n// Spring solver inspired by Webkit Copyright © 2016 Apple Inc. All rights reserved. https://webkit.org/demos/spring/spring.js\n\nfunction spring(string, duration) {\n\n  var params = parseEasingParameters(string);\n  var mass = minMax(is.und(params[0]) ? 1 : params[0], .1, 100);\n  var stiffness = minMax(is.und(params[1]) ? 100 : params[1], .1, 100);\n  var damping = minMax(is.und(params[2]) ? 10 : params[2], .1, 100);\n  var velocity =  minMax(is.und(params[3]) ? 0 : params[3], .1, 100);\n  var w0 = Math.sqrt(stiffness / mass);\n  var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  var a = 1;\n  var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  function solver(t) {\n    var progress = duration ? (duration * t) / 1000 : t;\n    if (zeta < 1) {\n      progress = Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n    } else {\n      progress = (a + b * progress) * Math.exp(-progress * w0);\n    }\n    if (t === 0 || t === 1) { return t; }\n    return 1 - progress;\n  }\n\n  function getDuration() {\n    var cached = cache.springs[string];\n    if (cached) { return cached; }\n    var frame = 1/6;\n    var elapsed = 0;\n    var rest = 0;\n    while(true) {\n      elapsed += frame;\n      if (solver(elapsed) === 1) {\n        rest++;\n        if (rest >= 16) { break; }\n      } else {\n        rest = 0;\n      }\n    }\n    var duration = elapsed * frame * 1000;\n    cache.springs[string] = duration;\n    return duration;\n  }\n\n  return duration ? solver : getDuration;\n\n}\n\n// Elastic easing adapted from jQueryUI http://api.jqueryui.com/easings/\n\nfunction elastic(amplitude, period) {\n  if ( amplitude === void 0 ) amplitude = 1;\n  if ( period === void 0 ) period = .5;\n\n  var a = minMax(amplitude, 1, 10);\n  var p = minMax(period, .1, 2);\n  return function (t) {\n    return (t === 0 || t === 1) ? t : \n      -a * Math.pow(2, 10 * (t - 1)) * Math.sin((((t - 1) - (p / (Math.PI * 2) * Math.asin(1 / a))) * (Math.PI * 2)) / p);\n  }\n}\n\n// Basic steps easing implementation https://developer.mozilla.org/fr/docs/Web/CSS/transition-timing-function\n\nfunction steps(steps) {\n  if ( steps === void 0 ) steps = 10;\n\n  return function (t) { return Math.round(t * steps) * (1 / steps); };\n}\n\n// BezierEasing https://github.com/gre/bezier-easing\n\nvar bezier = (function () {\n\n  var kSplineTableSize = 11;\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n  function A(aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1 }\n  function B(aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1 }\n  function C(aA1)      { return 3.0 * aA1 }\n\n  function calcBezier(aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT }\n  function getSlope(aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1) }\n\n  function binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX, currentT, i = 0;\n    do {\n      currentT = aA + (aB - aA) / 2.0;\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\n      if (currentX > 0.0) { aB = currentT; } else { aA = currentT; }\n    } while (Math.abs(currentX) > 0.0000001 && ++i < 10);\n    return currentT;\n  }\n\n  function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < 4; ++i) {\n      var currentSlope = getSlope(aGuessT, mX1, mX2);\n      if (currentSlope === 0.0) { return aGuessT; }\n      var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  }\n\n  function bezier(mX1, mY1, mX2, mY2) {\n\n    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) { return; }\n    var sampleValues = new Float32Array(kSplineTableSize);\n\n    if (mX1 !== mY1 || mX2 !== mY2) {\n      for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n      }\n    }\n\n    function getTForX(aX) {\n\n      var intervalStart = 0;\n      var currentSample = 1;\n      var lastSample = kSplineTableSize - 1;\n\n      for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n        intervalStart += kSampleStepSize;\n      }\n\n      --currentSample;\n\n      var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n      var guessForT = intervalStart + dist * kSampleStepSize;\n      var initialSlope = getSlope(guessForT, mX1, mX2);\n\n      if (initialSlope >= 0.001) {\n        return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n      } else if (initialSlope === 0.0) {\n        return guessForT;\n      } else {\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n\n    }\n\n    return function (x) {\n      if (mX1 === mY1 && mX2 === mY2) { return x; }\n      if (x === 0 || x === 1) { return x; }\n      return calcBezier(getTForX(x), mY1, mY2);\n    }\n\n  }\n\n  return bezier;\n\n})();\n\nvar penner = (function () {\n\n  var names = ['Quad', 'Cubic', 'Quart', 'Quint', 'Sine', 'Expo', 'Circ', 'Back', 'Elastic'];\n\n  // Approximated Penner equations http://matthewlein.com/ceaser/\n\n  var curves = {\n    In: [\n      [0.550, 0.085, 0.680, 0.530], /* inQuad */\n      [0.550, 0.055, 0.675, 0.190], /* inCubic */\n      [0.895, 0.030, 0.685, 0.220], /* inQuart */\n      [0.755, 0.050, 0.855, 0.060], /* inQuint */\n      [0.470, 0.000, 0.745, 0.715], /* inSine */\n      [0.950, 0.050, 0.795, 0.035], /* inExpo */\n      [0.600, 0.040, 0.980, 0.335], /* inCirc */\n      [0.600,-0.280, 0.735, 0.045], /* inBack */\n      elastic /* inElastic */\n    ],\n    Out: [\n      [0.250, 0.460, 0.450, 0.940], /* outQuad */\n      [0.215, 0.610, 0.355, 1.000], /* outCubic */\n      [0.165, 0.840, 0.440, 1.000], /* outQuart */\n      [0.230, 1.000, 0.320, 1.000], /* outQuint */\n      [0.390, 0.575, 0.565, 1.000], /* outSine */\n      [0.190, 1.000, 0.220, 1.000], /* outExpo */\n      [0.075, 0.820, 0.165, 1.000], /* outCirc */\n      [0.175, 0.885, 0.320, 1.275], /* outBack */\n      function (a, p) { return function (t) { return 1 - elastic(a, p)(1 - t); }; } /* outElastic */\n    ],\n    InOut: [\n      [0.455, 0.030, 0.515, 0.955], /* inOutQuad */\n      [0.645, 0.045, 0.355, 1.000], /* inOutCubic */\n      [0.770, 0.000, 0.175, 1.000], /* inOutQuart */\n      [0.860, 0.000, 0.070, 1.000], /* inOutQuint */\n      [0.445, 0.050, 0.550, 0.950], /* inOutSine */\n      [1.000, 0.000, 0.000, 1.000], /* inOutExpo */\n      [0.785, 0.135, 0.150, 0.860], /* inOutCirc */\n      [0.680,-0.550, 0.265, 1.550], /* inOutBack */\n      function (a, p) { return function (t) { return t < .5 ? elastic(a, p)(t * 2) / 2 : 1 - elastic(a, p)(t * -2 + 2) / 2; }; } /* inOutElastic */\n    ]\n  };\n\n  var eases = { \n    linear: [0.250, 0.250, 0.750, 0.750]\n  };\n\n  var loop = function ( coords ) {\n    curves[coords].forEach(function (ease, i) {\n      eases['ease'+coords+names[i]] = ease;\n    });\n  };\n\n  for (var coords in curves) loop( coords );\n\n  return eases;\n\n})();\n\nfunction parseEasings(easing, duration) {\n  if (is.fnc(easing)) { return easing; }\n  var name = easing.split('(')[0];\n  var ease = penner[name];\n  var args = parseEasingParameters(easing);\n  switch (name) {\n    case 'spring' : return spring(easing, duration);\n    case 'cubicBezier' : return applyArguments(bezier, args);\n    case 'steps' : return applyArguments(steps, args);\n    default : return is.fnc(ease) ? applyArguments(ease, args) : applyArguments(bezier, ease);\n  }\n}\n\n// Strings\n\nfunction selectString(str) {\n  try {\n    var nodes = document.querySelectorAll(str);\n    return nodes;\n  } catch(e) {\n    return;\n  }\n}\n\n// Arrays\n\nfunction filterArray(arr, callback) {\n  var len = arr.length;\n  var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\n  var result = [];\n  for (var i = 0; i < len; i++) {\n    if (i in arr) {\n      var val = arr[i];\n      if (callback.call(thisArg, val, i, arr)) {\n        result.push(val);\n      }\n    }\n  }\n  return result;\n}\n\nfunction flattenArray(arr) {\n  return arr.reduce(function (a, b) { return a.concat(is.arr(b) ? flattenArray(b) : b); }, []);\n}\n\nfunction toArray(o) {\n  if (is.arr(o)) { return o; }\n  if (is.str(o)) { o = selectString(o) || o; }\n  if (o instanceof NodeList || o instanceof HTMLCollection) { return [].slice.call(o); }\n  return [o];\n}\n\nfunction arrayContains(arr, val) {\n  return arr.some(function (a) { return a === val; });\n}\n\n// Objects\n\nfunction cloneObject(o) {\n  var clone = {};\n  for (var p in o) { clone[p] = o[p]; }\n  return clone;\n}\n\nfunction replaceObjectProps(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o1) { o[p] = o2.hasOwnProperty(p) ? o2[p] : o1[p]; }\n  return o;\n}\n\nfunction mergeObjects(o1, o2) {\n  var o = cloneObject(o1);\n  for (var p in o2) { o[p] = is.und(o1[p]) ? o2[p] : o1[p]; }\n  return o;\n}\n\n// Colors\n\nfunction rgbToRgba(rgbValue) {\n  var rgb = /rgb\\((\\d+,\\s*[\\d]+,\\s*[\\d]+)\\)/g.exec(rgbValue);\n  return rgb ? (\"rgba(\" + (rgb[1]) + \",1)\") : rgbValue;\n}\n\nfunction hexToRgba(hexValue) {\n  var rgx = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  var hex = hexValue.replace(rgx, function (m, r, g, b) { return r + r + g + g + b + b; } );\n  var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  var r = parseInt(rgb[1], 16);\n  var g = parseInt(rgb[2], 16);\n  var b = parseInt(rgb[3], 16);\n  return (\"rgba(\" + r + \",\" + g + \",\" + b + \",1)\");\n}\n\nfunction hslToRgba(hslValue) {\n  var hsl = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(hslValue) || /hsla\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%,\\s*([\\d.]+)\\)/g.exec(hslValue);\n  var h = parseInt(hsl[1], 10) / 360;\n  var s = parseInt(hsl[2], 10) / 100;\n  var l = parseInt(hsl[3], 10) / 100;\n  var a = hsl[4] || 1;\n  function hue2rgb(p, q, t) {\n    if (t < 0) { t += 1; }\n    if (t > 1) { t -= 1; }\n    if (t < 1/6) { return p + (q - p) * 6 * t; }\n    if (t < 1/2) { return q; }\n    if (t < 2/3) { return p + (q - p) * (2/3 - t) * 6; }\n    return p;\n  }\n  var r, g, b;\n  if (s == 0) {\n    r = g = b = l;\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n  return (\"rgba(\" + (r * 255) + \",\" + (g * 255) + \",\" + (b * 255) + \",\" + a + \")\");\n}\n\nfunction colorToRgb(val) {\n  if (is.rgb(val)) { return rgbToRgba(val); }\n  if (is.hex(val)) { return hexToRgba(val); }\n  if (is.hsl(val)) { return hslToRgba(val); }\n}\n\n// Units\n\nfunction getUnit(val) {\n  var split = /([\\+\\-]?[0-9#\\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(val);\n  if (split) { return split[2]; }\n}\n\nfunction getTransformUnit(propName) {\n  if (stringContains(propName, 'translate') || propName === 'perspective') { return 'px'; }\n  if (stringContains(propName, 'rotate') || stringContains(propName, 'skew')) { return 'deg'; }\n}\n\n// Values\n\nfunction getFunctionValue(val, animatable) {\n  if (!is.fnc(val)) { return val; }\n  return val(animatable.target, animatable.id, animatable.total);\n}\n\nfunction getAttribute(el, prop) {\n  return el.getAttribute(prop);\n}\n\nfunction convertPxToUnit(el, value, unit) {\n  var valueUnit = getUnit(value);\n  if (arrayContains([unit, 'deg', 'rad', 'turn'], valueUnit)) { return value; }\n  var cached = cache.CSS[value + unit];\n  if (!is.und(cached)) { return cached; }\n  var baseline = 100;\n  var tempEl = document.createElement(el.tagName);\n  var parentEl = (el.parentNode && (el.parentNode !== document)) ? el.parentNode : document.body;\n  parentEl.appendChild(tempEl);\n  tempEl.style.position = 'absolute';\n  tempEl.style.width = baseline + unit;\n  var factor = baseline / tempEl.offsetWidth;\n  parentEl.removeChild(tempEl);\n  var convertedUnit = factor * parseFloat(value);\n  cache.CSS[value + unit] = convertedUnit;\n  return convertedUnit;\n}\n\nfunction getCSSValue(el, prop, unit) {\n  if (prop in el.style) {\n    var uppercasePropName = prop.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    var value = el.style[prop] || getComputedStyle(el).getPropertyValue(uppercasePropName) || '0';\n    return unit ? convertPxToUnit(el, value, unit) : value;\n  }\n}\n\nfunction getAnimationType(el, prop) {\n  if (is.dom(el) && !is.inp(el) && (getAttribute(el, prop) || (is.svg(el) && el[prop]))) { return 'attribute'; }\n  if (is.dom(el) && arrayContains(validTransforms, prop)) { return 'transform'; }\n  if (is.dom(el) && (prop !== 'transform' && getCSSValue(el, prop))) { return 'css'; }\n  if (el[prop] != null) { return 'object'; }\n}\n\nfunction getElementTransforms(el) {\n  if (!is.dom(el)) { return; }\n  var str = el.style.transform || '';\n  var reg  = /(\\w+)\\(([^)]*)\\)/g;\n  var transforms = new Map();\n  var m; while (m = reg.exec(str)) { transforms.set(m[1], m[2]); }\n  return transforms;\n}\n\nfunction getTransformValue(el, propName, animatable, unit) {\n  var defaultVal = stringContains(propName, 'scale') ? 1 : 0 + getTransformUnit(propName);\n  var value = getElementTransforms(el).get(propName) || defaultVal;\n  if (animatable) {\n    animatable.transforms.list.set(propName, value);\n    animatable.transforms['last'] = propName;\n  }\n  return unit ? convertPxToUnit(el, value, unit) : value;\n}\n\nfunction getOriginalTargetValue(target, propName, unit, animatable) {\n  switch (getAnimationType(target, propName)) {\n    case 'transform': return getTransformValue(target, propName, animatable, unit);\n    case 'css': return getCSSValue(target, propName, unit);\n    case 'attribute': return getAttribute(target, propName);\n    default: return target[propName] || 0;\n  }\n}\n\nfunction getRelativeValue(to, from) {\n  var operator = /^(\\*=|\\+=|-=)/.exec(to);\n  if (!operator) { return to; }\n  var u = getUnit(to) || 0;\n  var x = parseFloat(from);\n  var y = parseFloat(to.replace(operator[0], ''));\n  switch (operator[0][0]) {\n    case '+': return x + y + u;\n    case '-': return x - y + u;\n    case '*': return x * y + u;\n  }\n}\n\nfunction validateValue(val, unit) {\n  if (is.col(val)) { return colorToRgb(val); }\n  var originalUnit = getUnit(val);\n  var unitLess = originalUnit ? val.substr(0, val.length - originalUnit.length) : val;\n  return unit && !/\\s/g.test(val) ? unitLess + unit : unitLess;\n}\n\n// getTotalLength() equivalent for circle, rect, polyline, polygon and line shapes\n// adapted from https://gist.github.com/SebLambla/3e0550c496c236709744\n\nfunction getDistance(p1, p2) {\n  return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));\n}\n\nfunction getCircleLength(el) {\n  return Math.PI * 2 * getAttribute(el, 'r');\n}\n\nfunction getRectLength(el) {\n  return (getAttribute(el, 'width') * 2) + (getAttribute(el, 'height') * 2);\n}\n\nfunction getLineLength(el) {\n  return getDistance(\n    {x: getAttribute(el, 'x1'), y: getAttribute(el, 'y1')}, \n    {x: getAttribute(el, 'x2'), y: getAttribute(el, 'y2')}\n  );\n}\n\nfunction getPolylineLength(el) {\n  var points = el.points;\n  var totalLength = 0;\n  var previousPos;\n  for (var i = 0 ; i < points.numberOfItems; i++) {\n    var currentPos = points.getItem(i);\n    if (i > 0) { totalLength += getDistance(previousPos, currentPos); }\n    previousPos = currentPos;\n  }\n  return totalLength;\n}\n\nfunction getPolygonLength(el) {\n  var points = el.points;\n  return getPolylineLength(el) + getDistance(points.getItem(points.numberOfItems - 1), points.getItem(0));\n}\n\n// Path animation\n\nfunction getTotalLength(el) {\n  if (el.getTotalLength) { return el.getTotalLength(); }\n  switch(el.tagName.toLowerCase()) {\n    case 'circle': return getCircleLength(el);\n    case 'rect': return getRectLength(el);\n    case 'line': return getLineLength(el);\n    case 'polyline': return getPolylineLength(el);\n    case 'polygon': return getPolygonLength(el);\n  }\n}\n\nfunction setDashoffset(el) {\n  var pathLength = getTotalLength(el);\n  el.setAttribute('stroke-dasharray', pathLength);\n  return pathLength;\n}\n\n// Motion path\n\nfunction getParentSvgEl(el) {\n  var parentEl = el.parentNode;\n  while (is.svg(parentEl)) {\n    parentEl = parentEl.parentNode;\n    if (!is.svg(parentEl.parentNode)) { break; }\n  }\n  return parentEl;\n}\n\nfunction getParentSvg(pathEl, svgData) {\n  var svg = svgData || {};\n  var parentSvgEl = svg.el || getParentSvgEl(pathEl);\n  var rect = parentSvgEl.getBoundingClientRect();\n  var viewBoxAttr = getAttribute(parentSvgEl, 'viewBox');\n  var width = rect.width;\n  var height = rect.height;\n  var viewBox = svg.viewBox || (viewBoxAttr ? viewBoxAttr.split(' ') : [0, 0, width, height]);\n  return {\n    el: parentSvgEl,\n    viewBox: viewBox,\n    x: viewBox[0] / 1,\n    y: viewBox[1] / 1,\n    w: width / viewBox[2],\n    h: height / viewBox[3]\n  }\n}\n\nfunction getPath(path, percent) {\n  var pathEl = is.str(path) ? selectString(path)[0] : path;\n  var p = percent || 100;\n  return function(property) {\n    return {\n      property: property,\n      el: pathEl,\n      svg: getParentSvg(pathEl),\n      totalLength: getTotalLength(pathEl) * (p / 100)\n    }\n  }\n}\n\nfunction getPathProgress(path, progress) {\n  function point(offset) {\n    if ( offset === void 0 ) offset = 0;\n\n    var l = progress + offset >= 1 ? progress + offset : 0;\n    return path.el.getPointAtLength(l);\n  }\n  var svg = getParentSvg(path.el, path.svg);\n  var p = point();\n  var p0 = point(-1);\n  var p1 = point(+1);\n  switch (path.property) {\n    case 'x': return (p.x - svg.x) * svg.w;\n    case 'y': return (p.y - svg.y) * svg.h;\n    case 'angle': return Math.atan2(p1.y - p0.y, p1.x - p0.x) * 180 / Math.PI;\n  }\n}\n\n// Decompose value\n\nfunction decomposeValue(val, unit) {\n  var rgx = /-?\\d*\\.?\\d+/g;\n  var value = validateValue((is.pth(val) ? val.totalLength : val), unit) + '';\n  return {\n    original: value,\n    numbers: value.match(rgx) ? value.match(rgx).map(Number) : [0],\n    strings: (is.str(val) || unit) ? value.split(rgx) : []\n  }\n}\n\n// Animatables\n\nfunction parseTargets(targets) {\n  var targetsArray = targets ? (flattenArray(is.arr(targets) ? targets.map(toArray) : toArray(targets))) : [];\n  return filterArray(targetsArray, function (item, pos, self) { return self.indexOf(item) === pos; });\n}\n\nfunction getAnimatables(targets) {\n  var parsed = parseTargets(targets);\n  return parsed.map(function (t, i) {\n    return {target: t, id: i, total: parsed.length, transforms: { list: getElementTransforms(t) } };\n  });\n}\n\n// Properties\n\nfunction normalizePropertyTweens(prop, tweenSettings) {\n  var settings = cloneObject(tweenSettings);\n  // Override duration if easing is a spring\n  if (/^spring/.test(settings.easing)) { settings.duration = spring(settings.easing); }\n  if (is.arr(prop)) {\n    var l = prop.length;\n    var isFromTo = (l === 2 && !is.obj(prop[0]));\n    if (!isFromTo) {\n      // Duration divided by the number of tweens\n      if (!is.fnc(tweenSettings.duration)) { settings.duration = tweenSettings.duration / l; }\n    } else {\n      // Transform [from, to] values shorthand to a valid tween value\n      prop = {value: prop};\n    }\n  }\n  var propArray = is.arr(prop) ? prop : [prop];\n  return propArray.map(function (v, i) {\n    var obj = (is.obj(v) && !is.pth(v)) ? v : {value: v};\n    // Default delay value should only be applied to the first tween\n    if (is.und(obj.delay)) { obj.delay = !i ? tweenSettings.delay : 0; }\n    // Default endDelay value should only be applied to the last tween\n    if (is.und(obj.endDelay)) { obj.endDelay = i === propArray.length - 1 ? tweenSettings.endDelay : 0; }\n    return obj;\n  }).map(function (k) { return mergeObjects(k, settings); });\n}\n\n\nfunction flattenKeyframes(keyframes) {\n  var propertyNames = filterArray(flattenArray(keyframes.map(function (key) { return Object.keys(key); })), function (p) { return is.key(p); })\n  .reduce(function (a,b) { if (a.indexOf(b) < 0) { a.push(b); } return a; }, []);\n  var properties = {};\n  var loop = function ( i ) {\n    var propName = propertyNames[i];\n    properties[propName] = keyframes.map(function (key) {\n      var newKey = {};\n      for (var p in key) {\n        if (is.key(p)) {\n          if (p == propName) { newKey.value = key[p]; }\n        } else {\n          newKey[p] = key[p];\n        }\n      }\n      return newKey;\n    });\n  };\n\n  for (var i = 0; i < propertyNames.length; i++) loop( i );\n  return properties;\n}\n\nfunction getProperties(tweenSettings, params) {\n  var properties = [];\n  var keyframes = params.keyframes;\n  if (keyframes) { params = mergeObjects(flattenKeyframes(keyframes), params); }\n  for (var p in params) {\n    if (is.key(p)) {\n      properties.push({\n        name: p,\n        tweens: normalizePropertyTweens(params[p], tweenSettings)\n      });\n    }\n  }\n  return properties;\n}\n\n// Tweens\n\nfunction normalizeTweenValues(tween, animatable) {\n  var t = {};\n  for (var p in tween) {\n    var value = getFunctionValue(tween[p], animatable);\n    if (is.arr(value)) {\n      value = value.map(function (v) { return getFunctionValue(v, animatable); });\n      if (value.length === 1) { value = value[0]; }\n    }\n    t[p] = value;\n  }\n  t.duration = parseFloat(t.duration);\n  t.delay = parseFloat(t.delay);\n  return t;\n}\n\nfunction normalizeTweens(prop, animatable) {\n  var previousTween;\n  return prop.tweens.map(function (t) {\n    var tween = normalizeTweenValues(t, animatable);\n    var tweenValue = tween.value;\n    var to = is.arr(tweenValue) ? tweenValue[1] : tweenValue;\n    var toUnit = getUnit(to);\n    var originalValue = getOriginalTargetValue(animatable.target, prop.name, toUnit, animatable);\n    var previousValue = previousTween ? previousTween.to.original : originalValue;\n    var from = is.arr(tweenValue) ? tweenValue[0] : previousValue;\n    var fromUnit = getUnit(from) || getUnit(originalValue);\n    var unit = toUnit || fromUnit;\n    if (is.und(to)) { to = previousValue; }\n    tween.from = decomposeValue(from, unit);\n    tween.to = decomposeValue(getRelativeValue(to, from), unit);\n    tween.start = previousTween ? previousTween.end : 0;\n    tween.end = tween.start + tween.delay + tween.duration + tween.endDelay;\n    tween.easing = parseEasings(tween.easing, tween.duration);\n    tween.isPath = is.pth(tweenValue);\n    tween.isColor = is.col(tween.from.original);\n    if (tween.isColor) { tween.round = 1; }\n    previousTween = tween;\n    return tween;\n  });\n}\n\n// Tween progress\n\nvar setProgressValue = {\n  css: function (t, p, v) { return t.style[p] = v; },\n  attribute: function (t, p, v) { return t.setAttribute(p, v); },\n  object: function (t, p, v) { return t[p] = v; },\n  transform: function (t, p, v, transforms, manual) {\n    transforms.list.set(p, v);\n    if (p === transforms.last || manual) {\n      var str = '';\n      transforms.list.forEach(function (value, prop) { str += prop + \"(\" + value + \") \"; });\n      t.style.transform = str;\n    }\n  }\n};\n\n// Set Value helper\n\nfunction setTargetsValue(targets, properties) {\n  var animatables = getAnimatables(targets);\n  animatables.forEach(function (animatable) {\n    for (var property in properties) {\n      var value = getFunctionValue(properties[property], animatable);\n      var target = animatable.target;\n      var valueUnit = getUnit(value);\n      var originalValue = getOriginalTargetValue(target, property, valueUnit, animatable);\n      var unit = valueUnit || getUnit(originalValue);\n      var to = getRelativeValue(validateValue(value, unit), originalValue);\n      var animType = getAnimationType(target, property);\n      setProgressValue[animType](target, property, to, animatable.transforms, true);\n    }\n  });\n}\n\n// Animations\n\nfunction createAnimation(animatable, prop) {\n  var animType = getAnimationType(animatable.target, prop.name);\n  if (animType) {\n    var tweens = normalizeTweens(prop, animatable);\n    var lastTween = tweens[tweens.length - 1];\n    return {\n      type: animType,\n      property: prop.name,\n      animatable: animatable,\n      tweens: tweens,\n      duration: lastTween.end,\n      delay: tweens[0].delay,\n      endDelay: lastTween.endDelay\n    }\n  }\n}\n\nfunction getAnimations(animatables, properties) {\n  return filterArray(flattenArray(animatables.map(function (animatable) {\n    return properties.map(function (prop) {\n      return createAnimation(animatable, prop);\n    });\n  })), function (a) { return !is.und(a); });\n}\n\n// Create Instance\n\nfunction getInstanceTimings(animations, tweenSettings) {\n  var animLength = animations.length;\n  var getTlOffset = function (anim) { return anim.timelineOffset ? anim.timelineOffset : 0; };\n  var timings = {};\n  timings.duration = animLength ? Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration; })) : tweenSettings.duration;\n  timings.delay = animLength ? Math.min.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.delay; })) : tweenSettings.delay;\n  timings.endDelay = animLength ? timings.duration - Math.max.apply(Math, animations.map(function (anim) { return getTlOffset(anim) + anim.duration - anim.endDelay; })) : tweenSettings.endDelay;\n  return timings;\n}\n\nvar instanceID = 0;\n\nfunction createNewInstance(params) {\n  var instanceSettings = replaceObjectProps(defaultInstanceSettings, params);\n  var tweenSettings = replaceObjectProps(defaultTweenSettings, params);\n  var properties = getProperties(tweenSettings, params);\n  var animatables = getAnimatables(params.targets);\n  var animations = getAnimations(animatables, properties);\n  var timings = getInstanceTimings(animations, tweenSettings);\n  var id = instanceID;\n  instanceID++;\n  return mergeObjects(instanceSettings, {\n    id: id,\n    children: [],\n    animatables: animatables,\n    animations: animations,\n    duration: timings.duration,\n    delay: timings.delay,\n    endDelay: timings.endDelay\n  });\n}\n\n// Core\n\nvar activeInstances = [];\nvar pausedInstances = [];\nvar raf;\n\nvar engine = (function () {\n  function play() { \n    raf = requestAnimationFrame(step);\n  }\n  function step(t) {\n    var activeInstancesLength = activeInstances.length;\n    if (activeInstancesLength) {\n      var i = 0;\n      while (i < activeInstancesLength) {\n        var activeInstance = activeInstances[i];\n        if (!activeInstance.paused) {\n          activeInstance.tick(t);\n        } else {\n          var instanceIndex = activeInstances.indexOf(activeInstance);\n          if (instanceIndex > -1) {\n            activeInstances.splice(instanceIndex, 1);\n            activeInstancesLength = activeInstances.length;\n          }\n        }\n        i++;\n      }\n      play();\n    } else {\n      raf = cancelAnimationFrame(raf);\n    }\n  }\n  return play;\n})();\n\nfunction handleVisibilityChange() {\n  if (document.hidden) {\n    activeInstances.forEach(function (ins) { return ins.pause(); });\n    pausedInstances = activeInstances.slice(0);\n    activeInstances = [];\n  } else {\n    pausedInstances.forEach(function (ins) { return ins.play(); });\n  }\n}\n\nif (typeof document !== 'undefined') {\n  document.addEventListener('visibilitychange', handleVisibilityChange);\n}\n\n// Public Instance\n\nfunction anime(params) {\n  if ( params === void 0 ) params = {};\n\n\n  var startTime = 0, lastTime = 0, now = 0;\n  var children, childrenLength = 0;\n  var resolve = null;\n\n  function makePromise(instance) {\n    var promise = window.Promise && new Promise(function (_resolve) { return resolve = _resolve; });\n    instance.finished = promise;\n    return promise;\n  }\n\n  var instance = createNewInstance(params);\n  var promise = makePromise(instance);\n\n  function toggleInstanceDirection() {\n    var direction = instance.direction;\n    if (direction !== 'alternate') {\n      instance.direction = direction !== 'normal' ? 'normal' : 'reverse';\n    }\n    instance.reversed = !instance.reversed;\n    children.forEach(function (child) { return child.reversed = instance.reversed; });\n  }\n\n  function adjustTime(time) {\n    return instance.reversed ? instance.duration - time : time;\n  }\n\n  function resetTime() {\n    startTime = 0;\n    lastTime = adjustTime(instance.currentTime) * (1 / anime.speed);\n  }\n\n  function seekCild(time, child) {\n    if (child) { child.seek(time - child.timelineOffset); }\n  }\n\n  function syncInstanceChildren(time) {\n    if (!instance.reversePlayback) {\n      for (var i = 0; i < childrenLength; i++) { seekCild(time, children[i]); }\n    } else {\n      for (var i$1 = childrenLength; i$1--;) { seekCild(time, children[i$1]); }\n    }\n  }\n\n  function setAnimationsProgress(insTime) {\n    var i = 0;\n    var animations = instance.animations;\n    var animationsLength = animations.length;\n    while (i < animationsLength) {\n      var anim = animations[i];\n      var animatable = anim.animatable;\n      var tweens = anim.tweens;\n      var tweenLength = tweens.length - 1;\n      var tween = tweens[tweenLength];\n      // Only check for keyframes if there is more than one tween\n      if (tweenLength) { tween = filterArray(tweens, function (t) { return (insTime < t.end); })[0] || tween; }\n      var elapsed = minMax(insTime - tween.start - tween.delay, 0, tween.duration) / tween.duration;\n      var eased = isNaN(elapsed) ? 1 : tween.easing(elapsed);\n      var strings = tween.to.strings;\n      var round = tween.round;\n      var numbers = [];\n      var toNumbersLength = tween.to.numbers.length;\n      var progress = (void 0);\n      for (var n = 0; n < toNumbersLength; n++) {\n        var value = (void 0);\n        var toNumber = tween.to.numbers[n];\n        var fromNumber = tween.from.numbers[n] || 0;\n        if (!tween.isPath) {\n          value = fromNumber + (eased * (toNumber - fromNumber));\n        } else {\n          value = getPathProgress(tween.value, eased * toNumber);\n        }\n        if (round) {\n          if (!(tween.isColor && n > 2)) {\n            value = Math.round(value * round) / round;\n          }\n        }\n        numbers.push(value);\n      }\n      // Manual Array.reduce for better performances\n      var stringsLength = strings.length;\n      if (!stringsLength) {\n        progress = numbers[0];\n      } else {\n        progress = strings[0];\n        for (var s = 0; s < stringsLength; s++) {\n          var a = strings[s];\n          var b = strings[s + 1];\n          var n$1 = numbers[s];\n          if (!isNaN(n$1)) {\n            if (!b) {\n              progress += n$1 + ' ';\n            } else {\n              progress += n$1 + b;\n            }\n          }\n        }\n      }\n      setProgressValue[anim.type](animatable.target, anim.property, progress, animatable.transforms);\n      anim.currentValue = progress;\n      i++;\n    }\n  }\n\n  function setCallback(cb) {\n    if (instance[cb] && !instance.passThrough) { instance[cb](instance); }\n  }\n\n  function countIteration() {\n    if (instance.remaining && instance.remaining !== true) {\n      instance.remaining--;\n    }\n  }\n\n  function setInstanceProgress(engineTime) {\n    var insDuration = instance.duration;\n    var insDelay = instance.delay;\n    var insEndDelay = insDuration - instance.endDelay;\n    var insTime = adjustTime(engineTime);\n    instance.progress = minMax((insTime / insDuration) * 100, 0, 100);\n    instance.reversePlayback = insTime < instance.currentTime;\n    if (children) { syncInstanceChildren(insTime); }\n    if (!instance.began && instance.currentTime > 0) {\n      instance.began = true;\n      setCallback('begin');\n      setCallback('loopBegin');\n    }\n    if (insTime <= insDelay && instance.currentTime !== 0) {\n      setAnimationsProgress(0);\n    }\n    if ((insTime >= insEndDelay && instance.currentTime !== insDuration) || !insDuration) {\n      setAnimationsProgress(insDuration);\n    }\n    if (insTime > insDelay && insTime < insEndDelay) {\n      if (!instance.changeBegan) {\n        instance.changeBegan = true;\n        instance.changeCompleted = false;\n        setCallback('changeBegin');\n      }\n      setCallback('change');\n      setAnimationsProgress(insTime);\n    } else {\n      if (instance.changeBegan) {\n        instance.changeCompleted = true;\n        instance.changeBegan = false;\n        setCallback('changeComplete');\n      }\n    }\n    instance.currentTime = minMax(insTime, 0, insDuration);\n    if (instance.began) { setCallback('update'); }\n    if (engineTime >= insDuration) {\n      lastTime = 0;\n      countIteration();\n      if (instance.remaining) {\n        startTime = now;\n        setCallback('loopComplete');\n        setCallback('loopBegin');\n        if (instance.direction === 'alternate') { toggleInstanceDirection(); }\n      } else {\n        instance.paused = true;\n        if (!instance.completed) {\n          instance.completed = true;\n          setCallback('loopComplete');\n          setCallback('complete');\n          if (!instance.passThrough && 'Promise' in window) {\n            resolve();\n            promise = makePromise(instance);\n          }\n        }\n      }\n    }\n  }\n\n  instance.reset = function() {\n    var direction = instance.direction;\n    instance.passThrough = false;\n    instance.currentTime = 0;\n    instance.progress = 0;\n    instance.paused = true;\n    instance.began = false;\n    instance.changeBegan = false;\n    instance.completed = false;\n    instance.changeCompleted = false;\n    instance.reversePlayback = false;\n    instance.reversed = direction === 'reverse';\n    instance.remaining = instance.loop;\n    children = instance.children;\n    childrenLength = children.length;\n    for (var i = childrenLength; i--;) { instance.children[i].reset(); }\n    if (instance.reversed && instance.loop !== true || (direction === 'alternate' && instance.loop === 1)) { instance.remaining++; }\n    setAnimationsProgress(0);\n  };\n\n  // Set Value helper\n\n  instance.set = function(targets, properties) {\n    setTargetsValue(targets, properties);\n    return instance;\n  };\n\n  instance.tick = function(t) {\n    now = t;\n    if (!startTime) { startTime = now; }\n    setInstanceProgress((now + (lastTime - startTime)) * anime.speed);\n  };\n\n  instance.seek = function(time) {\n    setInstanceProgress(adjustTime(time));\n  };\n\n  instance.pause = function() {\n    instance.paused = true;\n    resetTime();\n  };\n\n  instance.play = function() {\n    if (!instance.paused) { return; }\n    if (instance.completed) { instance.reset(); }\n    instance.paused = false;\n    activeInstances.push(instance);\n    resetTime();\n    if (!raf) { engine(); }\n  };\n\n  instance.reverse = function() {\n    toggleInstanceDirection();\n    resetTime();\n  };\n\n  instance.restart = function() {\n    instance.reset();\n    instance.play();\n  };\n\n  instance.reset();\n\n  if (instance.autoplay) { instance.play(); }\n\n  return instance;\n\n}\n\n// Remove targets from animation\n\nfunction removeTargetsFromAnimations(targetsArray, animations) {\n  for (var a = animations.length; a--;) {\n    if (arrayContains(targetsArray, animations[a].animatable.target)) {\n      animations.splice(a, 1);\n    }\n  }\n}\n\nfunction removeTargets(targets) {\n  var targetsArray = parseTargets(targets);\n  for (var i = activeInstances.length; i--;) {\n    var instance = activeInstances[i];\n    var animations = instance.animations;\n    var children = instance.children;\n    removeTargetsFromAnimations(targetsArray, animations);\n    for (var c = children.length; c--;) {\n      var child = children[c];\n      var childAnimations = child.animations;\n      removeTargetsFromAnimations(targetsArray, childAnimations);\n      if (!childAnimations.length && !child.children.length) { children.splice(c, 1); }\n    }\n    if (!animations.length && !children.length) { instance.pause(); }\n  }\n}\n\n// Stagger helpers\n\nfunction stagger(val, params) {\n  if ( params === void 0 ) params = {};\n\n  var direction = params.direction || 'normal';\n  var easing = params.easing ? parseEasings(params.easing) : null;\n  var grid = params.grid;\n  var axis = params.axis;\n  var fromIndex = params.from || 0;\n  var fromFirst = fromIndex === 'first';\n  var fromCenter = fromIndex === 'center';\n  var fromLast = fromIndex === 'last';\n  var isRange = is.arr(val);\n  var val1 = isRange ? parseFloat(val[0]) : parseFloat(val);\n  var val2 = isRange ? parseFloat(val[1]) : 0;\n  var unit = getUnit(isRange ? val[1] : val) || 0;\n  var start = params.start || 0 + (isRange ? val1 : 0);\n  var values = [];\n  var maxValue = 0;\n  return function (el, i, t) {\n    if (fromFirst) { fromIndex = 0; }\n    if (fromCenter) { fromIndex = (t - 1) / 2; }\n    if (fromLast) { fromIndex = t - 1; }\n    if (!values.length) {\n      for (var index = 0; index < t; index++) {\n        if (!grid) {\n          values.push(Math.abs(fromIndex - index));\n        } else {\n          var fromX = !fromCenter ? fromIndex%grid[0] : (grid[0]-1)/2;\n          var fromY = !fromCenter ? Math.floor(fromIndex/grid[0]) : (grid[1]-1)/2;\n          var toX = index%grid[0];\n          var toY = Math.floor(index/grid[0]);\n          var distanceX = fromX - toX;\n          var distanceY = fromY - toY;\n          var value = Math.sqrt(distanceX * distanceX + distanceY * distanceY);\n          if (axis === 'x') { value = -distanceX; }\n          if (axis === 'y') { value = -distanceY; }\n          values.push(value);\n        }\n        maxValue = Math.max.apply(Math, values);\n      }\n      if (easing) { values = values.map(function (val) { return easing(val / maxValue) * maxValue; }); }\n      if (direction === 'reverse') { values = values.map(function (val) { return axis ? (val < 0) ? val * -1 : -val : Math.abs(maxValue - val); }); }\n    }\n    var spacing = isRange ? (val2 - val1) / maxValue : val1;\n    return start + (spacing * (Math.round(values[i] * 100) / 100)) + unit;\n  }\n}\n\n// Timeline\n\nfunction timeline(params) {\n  if ( params === void 0 ) params = {};\n\n  var tl = anime(params);\n  tl.duration = 0;\n  tl.add = function(instanceParams, timelineOffset) {\n    var tlIndex = activeInstances.indexOf(tl);\n    var children = tl.children;\n    if (tlIndex > -1) { activeInstances.splice(tlIndex, 1); }\n    function passThrough(ins) { ins.passThrough = true; }\n    for (var i = 0; i < children.length; i++) { passThrough(children[i]); }\n    var insParams = mergeObjects(instanceParams, replaceObjectProps(defaultTweenSettings, params));\n    insParams.targets = insParams.targets || params.targets;\n    var tlDuration = tl.duration;\n    insParams.autoplay = false;\n    insParams.direction = tl.direction;\n    insParams.timelineOffset = is.und(timelineOffset) ? tlDuration : getRelativeValue(timelineOffset, tlDuration);\n    passThrough(tl);\n    tl.seek(insParams.timelineOffset);\n    var ins = anime(insParams);\n    passThrough(ins);\n    children.push(ins);\n    var timings = getInstanceTimings(children, params);\n    tl.delay = timings.delay;\n    tl.endDelay = timings.endDelay;\n    tl.duration = timings.duration;\n    tl.seek(0);\n    tl.reset();\n    if (tl.autoplay) { tl.play(); }\n    return tl;\n  };\n  return tl;\n}\n\nanime.version = '3.0.1';\nanime.speed = 1;\nanime.running = activeInstances;\nanime.remove = removeTargets;\nanime.get = getOriginalTargetValue;\nanime.set = setTargetsValue;\nanime.convertPx = convertPxToUnit;\nanime.path = getPath;\nanime.setDashoffset = setDashoffset;\nanime.stagger = stagger;\nanime.timeline = timeline;\nanime.easing = parseEasings;\nanime.penner = penner;\nanime.random = function (min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };\n\nexport default anime;\n","/**!\n * Sortable 1.10.0-rc3\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar version = \"1.10.0-rc3\";\n\nfunction userAgent(pattern) {\n  return !!\n  /*@__PURE__*/\n  navigator.userAgent.match(pattern);\n}\n\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\n\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction matches(\n/**HTMLElement*/\nel,\n/**String*/\nselector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n\n  return false;\n}\n\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\n\nfunction closest(\n/**HTMLElement*/\nel,\n/**String*/\nselector,\n/**HTMLElement*/\nctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n\n  return null;\n}\n\nvar R_SPACE = /\\s+/g;\n\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\n\nfunction css(el, prop, val) {\n  var style = el && el.style;\n\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\n\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n\n  do {\n    var transform = css(el, 'transform');\n\n    if (transform && transform !== 'none') {\n      appliedTransforms = transform + ' ' + appliedTransforms;\n    }\n    /* jshint boss:true */\n\n  } while (!selfOnly && (el = el.parentNode));\n\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix;\n  /*jshint -W056 */\n\n  return matrixFn && new matrixFn(appliedTransforms);\n}\n\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n        i = 0,\n        n = list.length;\n\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n\n    return list;\n  }\n\n  return [];\n}\n\nfunction getWindowScrollingElement() {\n  if (IE11OrLess) {\n    return document.documentElement;\n  } else {\n    return document.scrollingElement;\n  }\n}\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\n\n\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n\n  if (el !== window && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode; // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect(); // Set relative to edges of padding box of container\n\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n\n      } while (container = container.parentNode);\n    }\n  }\n\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n        scaleX = elMatrix && elMatrix.a,\n        scaleY = elMatrix && elMatrix.d;\n\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {[DOMRect]}    rect         Optional rect of `el` to use\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\n\n\nfunction isScrolledPast(el, rect, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n      elSideVal = (rect ? rect : getRect(el))[elSide];\n  /* jshint boss:true */\n\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n        visible = void 0;\n\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n\n  return false;\n}\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\n\n\nfunction getChild(el, childNum, options) {\n  var currentChild = 0,\n      i = 0,\n      children = el.children;\n\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && children[i] !== Sortable.dragged && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n\n      currentChild++;\n    }\n\n    i++;\n  }\n\n  return null;\n}\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\n\n\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n\n  return last || null;\n}\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\n\n\nfunction index(el, selector) {\n  var index = 0;\n\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n  /* jshint boss:true */\n\n\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n\n  return index;\n}\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\n\n\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n      offsetTop = 0,\n      winScroller = getWindowScrollingElement();\n\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n          scaleX = elMatrix.a,\n          scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n\n  return [offsetLeft, offsetTop];\n}\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\n\n\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n\n  return -1;\n}\n\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n\n  } while (elem = elem.parentNode);\n\n  return getWindowScrollingElement();\n}\n\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\n\nvar _throttleTimeout;\n\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n          _this = this;\n\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\n\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\n\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\n\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\n\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\n\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\n\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n      animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n        var fromRect = getRect(child); // If animating: compensate for current animation\n\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n\n      var animating = false,\n          animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n            target = state.target,\n            fromRect = target.fromRect,\n            toRect = getRect(target),\n            prevFromRect = target.prevFromRect,\n            prevToRect = target.prevToRect,\n            animatingRect = state.rect,\n            targetMatrix = matrix(target, true);\n\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n\n        target.toRect = toRect; // If element is scrolled out of view: Do not animate\n\n        if ((isScrolledPast(target, toRect, 'bottom', 'top') || isScrolledPast(target, toRect, 'top', 'bottom') || isScrolledPast(target, toRect, 'right', 'left') || isScrolledPast(target, toRect, 'left', 'right')) && (isScrolledPast(target, animatingRect, 'bottom', 'top') || isScrolledPast(target, animatingRect, 'top', 'bottom') || isScrolledPast(target, animatingRect, 'right', 'left') || isScrolledPast(target, animatingRect, 'left', 'right')) && (isScrolledPast(target, fromRect, 'bottom', 'top') || isScrolledPast(target, fromRect, 'top', 'bottom') || isScrolledPast(target, fromRect, 'right', 'left') || isScrolledPast(target, fromRect, 'left', 'right'))) return;\n\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) && // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        } // if fromRect != toRect: animate\n\n\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n\n          if (!time) {\n            time = _this.options.animation;\n          }\n\n          _this.animate(target, animatingRect, time);\n        }\n\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n\n      animationStates = [];\n    },\n    animate: function animate(target, prev, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var currentRect = getRect(target),\n            elMatrix = matrix(this.el),\n            scaleX = elMatrix && elMatrix.a,\n            scaleY = elMatrix && elMatrix.d,\n            translateX = (prev.left - currentRect.left) / (scaleX || 1),\n            translateY = (prev.top - currentRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\n\nfunction repaint(target) {\n  return target.offsetWidth;\n}\n\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n\n    this.eventCanceled = false;\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return; // Fire global events if it exists in this sortable\n\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        _this.eventCanceled = !!sortable[plugin.pluginName][eventNameGlobal](_objectSpread({\n          sortable: sortable\n        }, evt));\n      } // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n\n\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        _this.eventCanceled = _this.eventCanceled || !!sortable[plugin.pluginName][eventName](_objectSpread({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el);\n      initialized.sortable = sortable;\n      sortable[pluginName] = initialized; // Add default options from plugin\n\n      _extends(defaults, initialized.options);\n    });\n\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventOptions: function getEventOptions(name, sortable) {\n    var eventOptions = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventOptions !== 'function') return;\n\n      _extends(eventOptions, plugin.eventOptions.call(sortable, name));\n    });\n    return eventOptions;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return; // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n      rootEl = _ref.rootEl,\n      name = _ref.name,\n      targetEl = _ref.targetEl,\n      cloneEl = _ref.cloneEl,\n      toEl = _ref.toEl,\n      fromEl = _ref.fromEl,\n      oldIndex = _ref.oldIndex,\n      newIndex = _ref.newIndex,\n      oldDraggableIndex = _ref.oldDraggableIndex,\n      newDraggableIndex = _ref.newDraggableIndex,\n      originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      eventOptions = _ref.eventOptions;\n  sortable = sortable || rootEl[expando];\n  var evt,\n      options = sortable.options,\n      onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1); // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n\n  var allEventOptions = _objectSpread({}, eventOptions, PluginManager.getEventOptions(name, sortable));\n\n  for (var option in allEventOptions) {\n    evt[option] = allEventOptions[option];\n  }\n\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      originalEvent = _ref.evt,\n      data = _objectWithoutProperties(_ref, [\"evt\"]);\n\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\n\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\n\nif (typeof window === \"undefined\" || !window.document) {\n  throw new Error(\"Sortable.js requires a window with a document\");\n}\n\nvar dragEl,\n    parentEl,\n    ghostEl,\n    rootEl,\n    nextEl,\n    lastDownEl,\n    cloneEl,\n    cloneHidden,\n    oldIndex,\n    newIndex,\n    oldDraggableIndex,\n    newDraggableIndex,\n    activeGroup,\n    putSortable,\n    awaitingDragStarted = false,\n    ignoreNextClick = false,\n    sortables = [],\n    tapEvt,\n    touchEvt,\n    moved,\n    lastTarget,\n    lastDirection,\n    pastFirstInvertThresh = false,\n    isCircumstantialInvert = false,\n    targetMoveDistance,\n    // For positioning ghost absolutely\nghostRelativeParent,\n    ghostRelativeParentInitialScroll = [],\n    // (left, top)\n_silent = false,\n    savedInputChecked = [];\n/** @const */\n\nvar PositionGhostAbsolutely = IOS,\n    CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n    // This will not pass for IE9, because IE9 DnD only works on anchors\nsupportDraggable = !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n    supportCssPointerEvents = function () {\n  // false when <= IE11\n  if (IE11OrLess) {\n    return false;\n  }\n\n  var el = document.createElement('x');\n  el.style.cssText = 'pointer-events:auto';\n  return el.style.pointerEvents === 'auto';\n}(),\n    _detectDirection = function _detectDirection(el, options) {\n  var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n\n  if (elCSS.display === 'flex') {\n    return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n  }\n\n  if (elCSS.display === 'grid') {\n    return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n  }\n\n  if (child1 && firstChildCSS[\"float\"] !== 'none') {\n    var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n    return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n  }\n\n  return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n},\n    _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n  var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n  return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n},\n\n/**\n * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\n * @param  {Number} x      X position\n * @param  {Number} y      Y position\n * @return {HTMLElement}   Element of the first found nearest Sortable\n */\n_detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n  var ret;\n  sortables.some(function (sortable) {\n    if (lastChild(sortable)) return;\n    var rect = getRect(sortable),\n        threshold = sortable[expando].options.emptyInsertThreshold,\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n\n    if (threshold && insideHorizontally && insideVertically) {\n      return ret = sortable;\n    }\n  });\n  return ret;\n},\n    _prepareGroup = function _prepareGroup(options) {\n  function toFn(value, pull) {\n    return function (to, from, dragEl, evt) {\n      var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n\n      if (value == null && (pull || sameGroup)) {\n        // Default pull value\n        // Default pull and put value if same group\n        return true;\n      } else if (value == null || value === false) {\n        return false;\n      } else if (pull && value === 'clone') {\n        return value;\n      } else if (typeof value === 'function') {\n        return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n      } else {\n        var otherGroup = (pull ? to : from).options.group.name;\n        return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n      }\n    };\n  }\n\n  var group = {};\n  var originalGroup = options.group;\n\n  if (!originalGroup || _typeof(originalGroup) != 'object') {\n    originalGroup = {\n      name: originalGroup\n    };\n  }\n\n  group.name = originalGroup.name;\n  group.checkPull = toFn(originalGroup.pull, true);\n  group.checkPut = toFn(originalGroup.put);\n  group.revertClone = originalGroup.revertClone;\n  options.group = group;\n},\n    _hideGhostForTarget = function _hideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', 'none');\n  }\n},\n    _unhideGhostForTarget = function _unhideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', '');\n  }\n}; // #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\n\ndocument.addEventListener('click', function (evt) {\n  if (ignoreNextClick) {\n    evt.preventDefault();\n    evt.stopPropagation && evt.stopPropagation();\n    evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n    ignoreNextClick = false;\n    return false;\n  }\n}, true);\n\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\n\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n/**\n * @class  Sortable\n * @param  {HTMLElement}  el\n * @param  {Object}       [options]\n */\n\n\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n\n  this.el = el; // root element\n\n  this.options = options = _extends({}, options); // Export instance\n\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults); // Set default options\n\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n\n  _prepareGroup(options); // Bind all private methods\n\n\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  } // Setup drag mode\n\n\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  } // Bind events\n\n\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n\n  sortables.push(this.el); // Restore sorting\n\n  options.store && options.store.get && this.sort(options.store.get(this) || []); // Add animation state manager\n\n  _extends(this, AnimationStateManager());\n}\n\nSortable.prototype =\n/** @lends Sortable.prototype */\n{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart(\n  /** Event|TouchEvent */\n  evt) {\n    if (!evt.cancelable) return;\n\n    var _this = this,\n        el = this.el,\n        options = this.options,\n        preventOnFilter = options.preventOnFilter,\n        type = evt.type,\n        touch = evt.touches && evt.touches[0],\n        target = (touch || evt).target,\n        originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n        filter = options.filter;\n\n    _saveInputCheckedState(el); // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\n\n    if (dragEl) {\n      return;\n    }\n\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    } // cancel dnd if original target is content editable\n\n\n    if (originalTarget.isContentEditable) {\n      return;\n    }\n\n    target = closest(target, options.draggable, el, false);\n\n    if (target && target.animated) {\n      return;\n    }\n\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    } // Get the index of the dragged element within its parent\n\n\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable); // Check filter\n\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    } // Prepare `dragstart`\n\n\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch,\n  /** HTMLElement */\n  target) {\n    var _this = this,\n        el = _this.el,\n        options = _this.options,\n        ownerDocument = el.ownerDocument,\n        dragStartFn;\n\n    if (target && !dragEl && target.parentNode === el) {\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n\n          return;\n        } // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n\n\n        _this._disableDelayedDragEvents();\n\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        } // Bind the events: dragstart/dragend\n\n\n        _this._triggerDragStart(evt, touch); // Drag start event\n\n\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        }); // Chosen item\n\n\n        toggleClass(dragEl, options.chosenClass, true);\n      }; // Disable \"draggable\"\n\n\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop); // Make dragEl draggable (must be before delay for FireFox)\n\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n\n      pluginEvent('delayStart', this, {\n        evt: evt\n      }); // Delay is impossible for native DnD in Edge or IE\n\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n\n          return;\n        } // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n\n\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler(\n  /** TouchEvent|PointerEvent **/\n  e) {\n    var touch = e.touches ? e.touches[0] : e;\n\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n\n    awaitingDragStarted = false;\n\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n\n      var options = this.options; // Apply effect\n\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost(); // Drag start event\n\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n\n      _hideGhostForTarget();\n\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n\n          target = parent; // store last element\n        }\n        /* jshint boss:true */\n        while (parent = parent.parentNode);\n      }\n\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove(\n  /**TouchEvent*/\n  evt) {\n    if (tapEvt) {\n      var options = this.options,\n          fallbackTolerance = options.fallbackTolerance,\n          fallbackOffset = options.fallbackOffset,\n          touch = evt.touches ? evt.touches[0] : evt,\n          ghostMatrix = ghostEl && matrix(ghostEl),\n          scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n          scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n          relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n          dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n          dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1),\n          translate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)'; // only set the status to dragging, when we are actually dragging\n\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n\n        this._onDragStart(evt, true);\n      }\n\n      touchEvt = touch;\n      css(ghostEl, 'webkitTransform', translate3d);\n      css(ghostEl, 'mozTransform', translate3d);\n      css(ghostEl, 'msTransform', translate3d);\n      css(ghostEl, 'transform', translate3d);\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n          rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n          options = this.options; // Position absolutely\n\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl);\n    }\n  },\n  _onDragStart: function _onDragStart(\n  /**Event*/\n  evt,\n  /**boolean*/\n  fallback) {\n    var _this = this;\n\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n\n      return;\n    }\n\n    pluginEvent('setupClone', this);\n\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n\n      this._hideClone();\n\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    } // #1143: IFrame support workaround\n\n\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n\n      _this._hideClone();\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true); // Set proper drop events\n\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n\n      on(document, 'drop', _this); // #1276 fix:\n\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        target = evt.target,\n        dragRect,\n        targetRect,\n        revert,\n        options = this.options,\n        group = options.group,\n        activeSortable = Sortable.active,\n        isOwner = activeGroup === group,\n        canSort = options.sort,\n        fromSortable = putSortable || activeSortable,\n        vertical,\n        _this = this,\n        completedFired = false;\n\n    if (_silent) return;\n\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    } // Capture animation state\n\n\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n\n      _this.captureAnimationState();\n\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    } // Return invocation when dragEl is inserted (or completed)\n\n\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        } // Animation\n\n\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      } // Null lastTarget if it is not inside a previously swapped element\n\n\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      } // no bubbling and not fallback\n\n\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target); // Do not detect for empty insert if already inserted\n\n\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    } // Call when dragEl has been inserted\n\n\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n\n    ignoreNextClick = false;\n\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n\n      if (revert) {\n        parentEl = rootEl; // actualization\n\n        capture();\n\n        this._hideClone();\n\n        dragOverEvent('revert');\n\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n\n        return completed(true);\n      }\n\n      var elLastChild = lastChild(el, options.draggable);\n\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        } // assign target only if condition is true\n\n\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n\n        if (target) {\n          targetRect = getRect(target);\n        }\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          el.appendChild(dragEl);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n            targetBeforeFirstSwap,\n            differentLevel = dragEl.parentNode !== el,\n            differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n            side1 = vertical ? 'top' : 'left',\n            scrolledPastTop = isScrolledPast(target, null, 'top', 'top') || isScrolledPast(dragEl, null, 'top', 'top'),\n            scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        } // If dragEl is already beside target: Do not insert\n\n\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n            after = false;\n        after = direction === 1;\n\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          } // Undo chrome's scroll adjustment (has no effect on other browsers)\n\n\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n\n          parentEl = dragEl.parentNode; // actualization\n          // must be done before animation\n\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n\n          changed();\n          return completed(true);\n        }\n      }\n\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        options = this.options; // Get the index of the dragged element within its parent\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    }); // Get again after plugin event\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n\n    if (Sortable.eventCanceled) {\n      this._nulling();\n\n      return;\n    }\n\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n\n    _cancelNextTick(this.cloneId);\n\n    _cancelNextTick(this._dragStartId); // Unbind events\n\n\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n\n    this._offMoveEvents();\n\n    this._offUpEvents();\n\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n\n        _disableDraggable(dragEl);\n\n        dragEl.style['will-change'] = ''; // Remove classes\n        // ghostClass is added in dragStarted\n\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n\n        toggleClass(dragEl, this.options.chosenClass, false); // Drag stop event\n\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            }); // Remove event\n\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            }); // drag from one list and drop into another\n\n\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          }); // Save sorting\n\n\n          this.save();\n        }\n      }\n    }\n\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = 0;\n  },\n  handleEvent: function handleEvent(\n  /**Event*/\n  evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n\n        break;\n\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n\n          _globalDragOver(evt);\n        }\n\n        break;\n\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n\n  /**\n   * Serializes the item into an array of string.\n   * @returns {String[]}\n   */\n  toArray: function toArray() {\n    var order = [],\n        el,\n        children = this.el.children,\n        i = 0,\n        n = children.length,\n        options = this.options;\n\n    for (; i < n; i++) {\n      el = children[i];\n\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n\n    return order;\n  },\n\n  /**\n   * Sorts the elements according to the array.\n   * @param  {String[]}  order  order of the items\n   */\n  sort: function sort(order) {\n    var items = {},\n        rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n  },\n\n  /**\n   * Save the current sorting\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n\n  /**\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n   * @param   {HTMLElement}  el\n   * @param   {String}       [selector]  default: `options.draggable`\n   * @returns {HTMLElement|null}\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n\n  /**\n   * Set/get option\n   * @param   {string} name\n   * @param   {*}      [value]\n   * @returns {*}\n   */\n  option: function option(name, value) {\n    var options = this.options;\n\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n\n  /**\n   * Destroy\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    } // Remove draggable attributes\n\n\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n\n    this._onDrop();\n\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n\n      return;\n    }\n\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return; // show clone at dragEl or original position\n\n      if (rootEl.contains(dragEl) && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n\n      if (this.options.group.revertClone) {\n        this._animate(dragEl, cloneEl);\n      }\n\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\n\nfunction _globalDragOver(\n/**Event*/\nevt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n\n  evt.cancelable && evt.preventDefault();\n}\n\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n      sortable = fromEl[expando],\n      onMoveFn = sortable.options.onMove,\n      retVal; // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n\n  return retVal;\n}\n\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\n\nfunction _unsilent() {\n  _silent = false;\n}\n\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var rect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var spacer = 10;\n  return vertical ? evt.clientX > rect.right + spacer || evt.clientX <= rect.right && evt.clientY > rect.bottom && evt.clientX >= rect.left : evt.clientX > rect.right && evt.clientY > rect.top || evt.clientX <= rect.right && evt.clientY > rect.bottom + spacer;\n}\n\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n      targetLength = vertical ? targetRect.height : targetRect.width,\n      targetS1 = vertical ? targetRect.top : targetRect.left,\n      targetS2 = vertical ? targetRect.bottom : targetRect.right,\n      invert = false;\n\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n\n  invert = invert || invertSwap;\n\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n\n  return 0;\n}\n/**\n * Gets the direction dragEl must be swapped relative to target in order to make it\n * seem that dragEl has been \"inserted\" into that element's position\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\n * @return {Number}                   Direction dragEl must be swapped\n */\n\n\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n/**\n * Generate id\n * @param   {HTMLElement} el\n * @returns {String}\n * @private\n */\n\n\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n      i = str.length,\n      sum = 0;\n\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n\n  return sum.toString(36);\n}\n\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n\n  while (idx--) {\n    var _el = inputs[idx];\n    _el.checked && savedInputChecked.push(_el);\n  }\n}\n\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\n\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n} // Fixed #973:\n\n\non(document, 'touchmove', function (evt) {\n  if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n    evt.preventDefault();\n  }\n}); // Export utils\n\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild\n};\n/**\n * Mount a plugin to Sortable\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\n */\n\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(el));\n    }\n\n    if (plugin.utils) Sortable.utils = _objectSpread({}, Sortable.utils, plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n/**\n * Create sortable instance\n * @param {HTMLElement}  el\n * @param {Object}      [options]\n */\n\n\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n}; // Export\n\n\nSortable.version = version;\n\nvar autoScrolls = [],\n    scrollEl,\n    scrollRootEl,\n    scrolling = false,\n    lastAutoScrollX,\n    lastAutoScrollY,\n    touchEvt$1,\n    pointerElemChangedInterval;\n\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.options = {\n      scroll: true,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    }; // Bind all private methods\n\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.sortable.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.sortable.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n\n      var x = evt.clientX,\n          y = evt.clientY,\n          elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt; // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n\n      if (fallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback); // Listener for pointer element change\n\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval(); // Detect for pointer elem change, emulating native DnD behaviour\n\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.sortable.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\n\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\n\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\n\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var sens = options.scrollSensitivity,\n      speed = options.scrollSpeed,\n      winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n      scrollCustomFn; // New scroll root, set scrollEl\n\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n\n  var layersOut = 0;\n  var currentParent = scrollEl;\n\n  do {\n    var el = currentParent,\n        rect = getRect(el),\n        top = rect.top,\n        bottom = rect.bottom,\n        left = rect.left,\n        right = rect.right,\n        width = rect.width,\n        height = rect.height,\n        canScrollX = void 0,\n        canScrollY = void 0,\n        scrollWidth = el.scrollWidth,\n        scrollHeight = el.scrollHeight,\n        elCSS = css(el),\n        scrollPosX = el.scrollLeft,\n        scrollPosY = el.scrollTop;\n\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n\n    var vx = canScrollX && (Math.abs(right - evt.clientX) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - evt.clientX) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - evt.clientY) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - evt.clientY) <= sens && !!scrollPosY);\n\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n\n          }\n\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      dragEl = _ref.dragEl,\n      activeSortable = _ref.activeSortable,\n      dispatchSortableEvent = _ref.dispatchSortableEvent,\n      hideGhostForTarget = _ref.hideGhostForTarget,\n      unhideGhostForTarget = _ref.unhideGhostForTarget;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var target = document.elementFromPoint(originalEvent.clientX, originalEvent.clientY);\n  unhideGhostForTarget();\n\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill(dragEl);\n  }\n};\n\nfunction Revert() {}\n\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(dragEl) {\n    this.sortable.captureAnimationState();\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.sortable.options);\n\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n\n    this.sortable.animateAll();\n  },\n  drop: drop\n};\n\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\n\nfunction Remove() {}\n\nRemove.prototype = {\n  onSpill: function onSpill(dragEl) {\n    this.sortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    this.sortable.animateAll();\n  },\n  drop: drop\n};\n\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\n\nfunction SwapPlugin() {\n  function Swap() {\n    this.options = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n          target = _ref2.target,\n          onMove = _ref2.onMove,\n          activeSortable = _ref2.activeSortable,\n          changed = _ref2.changed;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n          options = this.sortable.options;\n\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n\n      changed();\n      return completed(true);\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n          putSortable = _ref3.putSortable,\n          dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.sortable.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventOptions: function eventOptions() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\n\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n      p2 = n2.parentNode,\n      i1,\n      i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n    multiDragClones = [],\n    lastMultiDragSelect,\n    // for selection with modifier key down (SHIFT)\nmultiDragSortable,\n    initialFolding = false,\n    // Initial multi-drag fold when drag started\nfolding = false,\n    // Folding any other time\ndragStarted = false,\n    dragEl$1,\n    clonesFromRect,\n    clonesHidden;\n\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n\n    if (sortable.options.supportPointer) {\n      on(document, 'pointerup', this._deselectMultiDrag);\n    } else {\n      on(document, 'mouseup', this._deselectMultiDrag);\n      on(document, 'touchend', this._deselectMultiDrag);\n    }\n\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.options = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable;\n      if (!this.isMultiDrag) return;\n\n      for (var _i = 0; _i < multiDragElements.length; _i++) {\n        multiDragClones.push(clone(multiDragElements[_i]));\n        multiDragClones[_i].sortableIndex = multiDragElements[_i].sortableIndex;\n        multiDragClones[_i].draggable = false;\n        multiDragClones[_i].style['will-change'] = '';\n        toggleClass(multiDragClones[_i], sortable.options.selectedClass, false);\n        multiDragElements[_i] === dragEl$1 && toggleClass(multiDragClones[_i], sortable.options.chosenClass, false);\n      }\n\n      sortable._hideClone();\n\n      return true;\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n          rootEl = _ref3.rootEl,\n          dispatchSortableEvent = _ref3.dispatchSortableEvent;\n      if (!this.isMultiDrag) return;\n\n      if (!sortable.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          return true;\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n          rootEl = _ref4.rootEl;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      return true;\n    },\n    hideClone: function hideClone(_ref5) {\n      var sortable = _ref5.sortable,\n          cloneNowHidden = _ref5.cloneNowHidden;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n\n        if (sortable.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      return true;\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      }); // Sort multi-drag elements\n\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n\n      if (sortable.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n        sortable.captureAnimationState();\n\n        if (sortable.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n\n        if (sortable.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        } // Remove all auxiliary multidrag items from el, if sorting enabled\n\n\n        if (sortable.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n          completed = _ref8.completed;\n\n      if (folding && ~multiDragElements.indexOf(target)) {\n        return completed(false);\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n          rootEl = _ref9.rootEl,\n          sortable = _ref9.sortable,\n          dragRect = _ref9.dragRect;\n\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!sortable.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n          isOwner = _ref10.isOwner,\n          insertion = _ref10.insertion,\n          activeSortable = _ref10.activeSortable,\n          parentEl = _ref10.parentEl,\n          putSortable = _ref10.putSortable;\n      var options = sortable.options;\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n\n        initialFolding = false; // If leaving sort:false root, or already folding - Fold to new location\n\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute); // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        } // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n\n\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n\n            activeSortable._showClone(sortable); // Unfold animation for clones if showing from hidden\n\n\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n          isOwner = _ref11.isOwner,\n          activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n          rootEl = _ref12.rootEl,\n          parentEl = _ref12.parentEl,\n          sortable = _ref12.sortable,\n          dispatchSortableEvent = _ref12.dispatchSortableEvent,\n          oldIndex = _ref12.oldIndex,\n          putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = sortable.options,\n          children = parentEl.children; // Multi-drag selection\n\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvt: evt\n          }); // Modifier activated, select from last to dragEl\n\n          if ((!options.multiDragKey || this.multiDragKeyDown) && evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n                currentIndex = index(dragEl$1);\n\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n              // (but previous selection existed)\n              var n, _i2;\n\n              if (currentIndex > lastIndex) {\n                _i2 = lastIndex;\n                n = currentIndex;\n              } else {\n                _i2 = currentIndex;\n                n = lastIndex + 1;\n              }\n\n              for (; _i2 < n; _i2++) {\n                if (~multiDragElements.indexOf(children[_i2])) continue;\n                toggleClass(children[_i2], options.selectedClass, true);\n                multiDragElements.push(children[_i2]);\n                dispatchEvent({\n                  sortable: sortable,\n                  rootEl: rootEl,\n                  name: 'select',\n                  targetEl: children[_i2],\n                  originalEvt: evt\n                });\n              }\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvt: evt\n          });\n        }\n      } // Multi-drag drop\n\n\n      if (dragStarted && this.isMultiDrag) {\n        // Do not \"unfold\" after around dragEl if reverted\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n              multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect; // Prepare unfold animation\n\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            } // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n\n\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n\n              multiDragIndex++;\n            }); // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n\n              if (update) {\n                dispatchSortableEvent('update');\n              }\n            }\n          } // Must be done after capturing individual rects (scroll bar)\n\n\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n\n        multiDragSortable = toSortable;\n      } // Remove clones if necessary\n\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroy: function destroy() {\n      this._deselectMultiDrag();\n\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (dragStarted) return; // Only deselect if selection is in this sortable\n\n      if (multiDragSortable !== this.sortable) return; // Only deselect if target is not item in this sortable\n\n      if (evt && closest(evt.target, this.sortable.options.draggable, this.sortable.el, false)) return; // Only deselect if left click\n\n      if (evt && evt.button !== 0) return;\n\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.sortable.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvt: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.sortable.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.sortable.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n\n          multiDragSortable = sortable;\n        }\n\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n            index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventOptions: function eventOptions() {\n      var _this = this;\n\n      var oldIndicies = [],\n          newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        }); // multiDragElements will already be sorted if folding\n\n        var newIndex;\n\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n\n        return key;\n      }\n    }\n  });\n}\n\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\n\n\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\n\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9dA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9LA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3IA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/EA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC1tBA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChWA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9HA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpmBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9EA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACthEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACppBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACjMA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC/wCA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}